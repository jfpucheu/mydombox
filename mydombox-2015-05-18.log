[2015-05-18 21:51:59][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:51:59][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:51:59][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:51:59][DEBUG]: MYSQL = 1
[2015-05-18 21:51:59][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:51:59][DEBUG]: PORT = 3306
[2015-05-18 21:51:59][DEBUG]: LOGIN = mydombox
[2015-05-18 21:51:59][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:51:59][DEBUG]: DATABASE = mydombox
[2015-05-18 21:51:59][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:51:59][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:51:59][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:51:59][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:51:59][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:51:59][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:51:59][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:51:59][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:51:59][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:51:59][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:51:59][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:51:59][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:51:59][DEBUG]: MDB_KEY = 
[2015-05-18 21:51:59][DEBUG]: MDB_ID = 
[2015-05-18 21:51:59][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:51:59][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:51:59][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:51:59][DEBUG]: --------------------------------------------------------

[2015-05-18 21:51:59][INFO]: --------- Starting Mydombox Server ---------
[2015-05-18 21:51:59][INFO]: MySQL client version: 5.5.41
[2015-05-18 21:51:59][INFO]: Loglevel: DEBUG_SQL
[2015-05-18 21:51:59][INFO]: Learn Mode: 0
[2015-05-18 21:51:59][DEBUG_SQL]: SELECT * FROM devices;
[2015-05-18 21:51:59][INFO]: Module RFXTRX433 Started
[2015-05-18 21:51:59][INFO]: [rfxtrx433] Starting Rfxtrx433 Module
[2015-05-18 21:51:59][INFO]: [rfxtrx433] Starting Listening on /dev/ttyUSB1
[2015-05-18 21:51:59][DEBUG]: [rfxtrx433] Rfxtrx Port Open
[2015-05-18 21:51:59][DEBUG]: [rfxtrx433] Rfxtrx Port IO flush
[2015-05-18 21:51:59][DEBUG]: [rfxtrx433] Rfxtrx Reset Message Sent:
[2015-05-18 21:51:59][DEBUG]: Message sent: 0D 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[2015-05-18 21:51:59][DEBUG]: [rfxtrx433] Sleeping 1 sec
[2015-05-18 21:52:00][DEBUG]: [rfxtrx433] Rfxtrx Port IO flush
[2015-05-18 21:52:00][DEBUG]: [rfxtrx433] Rfxtrx Get Status Sent :
[2015-05-18 21:52:00][DEBUG]: Message sent: 0D 00 00 01 02 00 00 00 00 00 00 00 00 00 00
[2015-05-18 21:52:00][DEBUG]: Message lu : size : 0
[2015-05-18 21:52:00][DEBUG]: Message lu : (20 first bytes): 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:52:00][DEBUG]: The message is valid
[2015-05-18 21:52:00][DEBUG]: Message de type: Interface Control
[2015-05-18 21:52:00][DEBUG]: Not Suported yet
[2015-05-18 21:52:04][INFO]: Module USB300 Started
[2015-05-18 21:52:04][INFO]: [EnOcean] Starting EnOcean USB300 Module
[2015-05-18 21:52:04][INFO]: [EnOcean] Starting Listening on /dev/ttyUSB0 

[2015-05-18 21:52:04][INFO]: [EnOcean] ENOUSB300 Port Open
[2015-05-18 21:52:07][DEBUG]: Message lu : size : 11
[2015-05-18 21:52:07][DEBUG]: Message lu : (20 first bytes): 0B 55 02 00 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:52:07][DEBUG]: The message is valid
[2015-05-18 21:52:07][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 0 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:52:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),0,0.00,1705.00,9,5);					
[2015-05-18 21:52:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:52:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:52:07][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:52:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:52:07][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:52:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:52:08][DEBUG]: Message lu : size : 16
[2015-05-18 21:52:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 01 F0 00 00 5A 00 00 00 00 02 00 00 00 79 00 00 00| 
[2015-05-18 21:52:08][DEBUG]: The message is valid
[2015-05-18 21:52:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 1 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:52:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),1,90,0,0,9,7);					
[2015-05-18 21:52:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:52:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:52:11][DEBUG]: [EnOcean] Message received 

[2015-05-18 21:52:11][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 21:52:11][DEBUG]: [EnOcean] Data =  a5 08 28 2c 80 00 88 fb 73 00
[2015-05-18 21:52:11][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 44 00
[2015-05-18 21:52:11][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 21:52:11][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 21:52:11][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 21:52:11][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 21:52:11][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 21:52:11][DEBUG]: [EnDevice] func = 02
[2015-05-18 21:52:11][DEBUG]: [EnDevice] type = 05
[2015-05-18 21:52:11][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 21:52:11][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 21:52:11][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 21:52:11][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 21:52:11][DEBUG]: [EnDevice] enable = 1
[2015-05-18 21:52:11][DEBUG]: [EnOcean] device: 30
[2015-05-18 21:52:11][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 21:52:11][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 21:52:11][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 21:52:11][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=33.10 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 0, NOW(), 33.10);
[2015-05-18 21:52:11][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Data telegram 
 temperature: 33.10 

[2015-05-18 21:52:14][INFO]: Module SOAP Started
[2015-05-18 21:52:14][INFO]: Socket connection successful
[2015-05-18 21:52:19][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:52:19][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:52:19][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:52:19][DEBUG]: MYSQL = 1
[2015-05-18 21:52:19][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:52:19][DEBUG]: PORT = 3306
[2015-05-18 21:52:19][DEBUG]: LOGIN = mydombox
[2015-05-18 21:52:19][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:52:19][DEBUG]: DATABASE = mydombox
[2015-05-18 21:52:19][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:52:19][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:52:19][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:52:19][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:52:19][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:52:19][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:52:19][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:52:19][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:52:19][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:52:19][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:52:19][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:52:19][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:52:19][DEBUG]: MDB_KEY = 
[2015-05-18 21:52:19][DEBUG]: MDB_ID = 
[2015-05-18 21:52:19][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:52:19][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:52:19][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:52:19][DEBUG]: --------------------------------------------------------

[2015-05-18 21:52:19][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:52:19][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:52:19][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:52:19][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:52:19][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:52:19][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:52:19][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:52:19][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:52:19][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:52:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:52:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:52:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:44:28 

[2015-05-18 21:52:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:52:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:52:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:52:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:52:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:52:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:52:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:52:20][DEBUG]: Message lu : size : 4
[2015-05-18 21:52:20][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:52:20][DEBUG]: The message is valid
[2015-05-18 21:52:20][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:52:20][DEBUG]: Not Suported yet
[2015-05-18 21:52:22][DEBUG]: Message lu : size : 16
[2015-05-18 21:52:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 02 F0 00 00 5A 00 00 00 00 02 00 00 00 79 00 00 00| 
[2015-05-18 21:52:22][DEBUG]: The message is valid
[2015-05-18 21:52:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 2 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:52:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),2,90,0,0,9,7);					
[2015-05-18 21:52:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:52:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:52:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:52:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 03 89 F2 00 00 00 01 31 00 00 53 BA 42 EE 69 00 00| 
[2015-05-18 21:52:31][DEBUG]: The message is valid
[2015-05-18 21:52:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 3 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280417 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:52:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280417,9,6);					
[2015-05-18 21:52:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:52:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:52:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:52:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:52:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:52:36][DEBUG]: Message lu : size : 16
[2015-05-18 21:52:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 04 F0 00 00 5A 00 00 00 00 00 53 BA 42 79 00 00 00| 
[2015-05-18 21:52:36][DEBUG]: The message is valid
[2015-05-18 21:52:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 4 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:52:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),4,90,0,0,9,7);					
[2015-05-18 21:52:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:52:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:52:50][DEBUG]: Message lu : size : 16
[2015-05-18 21:52:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 05 F0 00 00 5A 00 00 00 00 00 53 BA 42 79 00 00 00| 
[2015-05-18 21:52:50][DEBUG]: The message is valid
[2015-05-18 21:52:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 5 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:52:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),5,90,0,0,9,7);					
[2015-05-18 21:52:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:52:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:52:53][DEBUG]: Message lu : size : 10
[2015-05-18 21:52:53][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 06 00 01 00 78 5B 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:52:53][DEBUG]: The message is valid
[2015-05-18 21:52:53][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 6 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:52:53][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),6,12.00,91,'wet',9,5);					
[2015-05-18 21:52:53][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 21:52:53][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 21:52:53][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 21:52:53][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 21:52:53][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:52:54][DEBUG]: Message lu : size : 11
[2015-05-18 21:52:54][DEBUG]: Message lu : (20 first bytes): 0B 55 02 07 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:52:54][DEBUG]: The message is valid
[2015-05-18 21:52:54][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 7 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:52:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),7,0.00,1705.00,9,5);					
[2015-05-18 21:52:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:52:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:52:54][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:52:54][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:52:54][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:52:54][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:04][DEBUG]: Message lu : size : 16
[2015-05-18 21:53:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 08 F0 00 00 5A 00 00 00 00 00 53 BA 42 79 00 00 00| 
[2015-05-18 21:53:04][DEBUG]: The message is valid
[2015-05-18 21:53:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 8 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),8,90,0,0,9,7);					
[2015-05-18 21:53:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:53:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:53:07][DEBUG]: Message lu : size : 17
[2015-05-18 21:53:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 09 89 F2 02 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:53:07][DEBUG]: The message is valid
[2015-05-18 21:53:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 9 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,338,0,9,7);					
[2015-05-18 21:53:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:53:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:53:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:53:07][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:53:08][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:18][DEBUG]: Message lu : size : 16
[2015-05-18 21:53:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 0A F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:53:18][DEBUG]: The message is valid
[2015-05-18 21:53:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 10 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),10,90,0,0,9,7);					
[2015-05-18 21:53:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:53:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:53:19][DEBUG]: Message lu : size : 17
[2015-05-18 21:53:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 0B 89 F2 01 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:53:19][DEBUG]: The message is valid
[2015-05-18 21:53:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 11 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,338,0,9,7);					
[2015-05-18 21:53:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:53:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:53:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:53:19][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:53:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:53:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:53:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:53:20][DEBUG]: MYSQL = 1
[2015-05-18 21:53:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:53:20][DEBUG]: PORT = 3306
[2015-05-18 21:53:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:53:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:53:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:53:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:53:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:53:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:53:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:53:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:53:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:53:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:53:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:53:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:53:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:53:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:53:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:53:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:53:20][DEBUG]: MDB_ID = 
[2015-05-18 21:53:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:53:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:53:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:53:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:53:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:53:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:53:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:53:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:53:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:53:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:53:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:44:28 

[2015-05-18 21:53:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:53:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:53:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:53:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:53:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:53:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:53:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:53:20][DEBUG]: Message lu : size : 4
[2015-05-18 21:53:20][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:53:20][DEBUG]: The message is valid
[2015-05-18 21:53:20][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:53:20][DEBUG]: Not Suported yet
[2015-05-18 21:53:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:53:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 0C 89 F2 00 00 00 01 31 00 00 53 BA 47 86 79 00 00| 
[2015-05-18 21:53:31][DEBUG]: The message is valid
[2015-05-18 21:53:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 12 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280422 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280422,9,7);					
[2015-05-18 21:53:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:53:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:53:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:53:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:53:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:32][DEBUG]: Message lu : size : 16
[2015-05-18 21:53:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 0D F0 00 00 5A 00 00 00 00 00 53 BA 47 79 00 00 00| 
[2015-05-18 21:53:32][DEBUG]: The message is valid
[2015-05-18 21:53:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 13 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),13,90,0,0,9,7);					
[2015-05-18 21:53:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:53:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:53:41][DEBUG]: Message lu : size : 11
[2015-05-18 21:53:41][DEBUG]: Message lu : (20 first bytes): 0B 55 02 0E FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:53:41][DEBUG]: The message is valid
[2015-05-18 21:53:41][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 14 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:53:41][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),14,0.00,1705.00,9,5);					
[2015-05-18 21:53:41][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:53:41][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:53:41][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:53:41][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:53:41][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:53:41][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:43][DEBUG]: Message lu : size : 17
[2015-05-18 21:53:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 0F 89 F2 04 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:53:43][DEBUG]: The message is valid
[2015-05-18 21:53:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 15 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,7);					
[2015-05-18 21:53:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:53:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:53:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:53:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:53:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:53:46][DEBUG]: Message lu : size : 16
[2015-05-18 21:53:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 10 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:53:46][DEBUG]: The message is valid
[2015-05-18 21:53:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 16 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:53:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),16,90,0,0,9,7);					
[2015-05-18 21:53:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:53:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:54:00][DEBUG]: Message lu : size : 16
[2015-05-18 21:54:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 11 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:54:00][DEBUG]: The message is valid
[2015-05-18 21:54:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 17 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),17,90,0,0,9,7);					
[2015-05-18 21:54:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:54:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:54:07][DEBUG]: Message lu : size : 17
[2015-05-18 21:54:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 12 89 F2 02 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:54:07][DEBUG]: The message is valid
[2015-05-18 21:54:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 18 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,338,0,9,7);					
[2015-05-18 21:54:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:54:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:54:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:54:07][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:54:08][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:14][DEBUG]: Message lu : size : 16
[2015-05-18 21:54:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 13 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:54:14][DEBUG]: The message is valid
[2015-05-18 21:54:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 19 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),19,90,0,0,9,7);					
[2015-05-18 21:54:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:54:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:54:19][DEBUG]: Message lu : size : 17
[2015-05-18 21:54:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 14 89 F2 01 00 00 01 52 00 00 00 00 00 00 69 00 00| 
[2015-05-18 21:54:19][DEBUG]: The message is valid
[2015-05-18 21:54:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 20 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:54:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,338,0,9,6);					
[2015-05-18 21:54:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:54:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:54:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:54:19][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:54:20][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:54:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:54:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:54:20][DEBUG]: MYSQL = 1
[2015-05-18 21:54:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:54:20][DEBUG]: PORT = 3306
[2015-05-18 21:54:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:54:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:54:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:54:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:54:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:54:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:54:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:54:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:54:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:54:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:54:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:54:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:54:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:54:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:54:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:54:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:54:20][DEBUG]: MDB_ID = 
[2015-05-18 21:54:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:54:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:54:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:54:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:54:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:54:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:54:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:54:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:54:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:54:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:54:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:44:28 

[2015-05-18 21:54:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:54:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:54:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:54:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:54:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:54:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:54:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:54:20][DEBUG]: Message lu : size : 4
[2015-05-18 21:54:20][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:54:20][DEBUG]: The message is valid
[2015-05-18 21:54:20][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:54:20][DEBUG]: Not Suported yet
[2015-05-18 21:54:22][DEBUG]: Message lu : size : 10
[2015-05-18 21:54:22][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 15 00 01 00 78 5B 03 69 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:54:22][DEBUG]: The message is valid
[2015-05-18 21:54:22][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 21 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:54:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),21,12.00,91,'wet',9,6);					
[2015-05-18 21:54:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 21:54:22][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 21:54:22][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 21:54:22][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 21:54:23][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:28][DEBUG]: Message lu : size : 16
[2015-05-18 21:54:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 16 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:54:28][DEBUG]: The message is valid
[2015-05-18 21:54:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 22 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),22,90,0,0,9,7);					
[2015-05-18 21:54:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:54:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:54:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:54:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 17 89 F2 00 00 00 01 31 00 00 53 BA 4C 1E 79 00 00| 
[2015-05-18 21:54:31][DEBUG]: The message is valid
[2015-05-18 21:54:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 23 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280427 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280427,9,7);					
[2015-05-18 21:54:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:54:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:54:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:54:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:54:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:42][DEBUG]: Message lu : size : 16
[2015-05-18 21:54:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 18 F0 00 00 5A 00 00 00 00 00 53 BA 4C 79 00 00 00| 
[2015-05-18 21:54:42][DEBUG]: The message is valid
[2015-05-18 21:54:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 24 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),24,90,0,0,9,7);					
[2015-05-18 21:54:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:54:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:54:43][DEBUG]: Message lu : size : 17
[2015-05-18 21:54:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 19 89 F2 04 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:54:43][DEBUG]: The message is valid
[2015-05-18 21:54:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 25 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,7);					
[2015-05-18 21:54:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:54:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:54:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:54:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:54:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:55][DEBUG]: Message lu : size : 17
[2015-05-18 21:54:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 1A 89 F2 03 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:54:55][DEBUG]: The message is valid
[2015-05-18 21:54:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 26 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,338,0,9,7);					
[2015-05-18 21:54:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:54:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:54:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:54:55][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:54:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:54:56][DEBUG]: Message lu : size : 16
[2015-05-18 21:54:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 1B F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:54:56][DEBUG]: The message is valid
[2015-05-18 21:54:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 27 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:54:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),27,90,0,0,9,7);					
[2015-05-18 21:54:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:54:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:07][DEBUG]: Message lu : size : 17
[2015-05-18 21:55:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 1C 89 F2 02 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:55:07][DEBUG]: The message is valid
[2015-05-18 21:55:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 28 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,305,0,9,7);					
[2015-05-18 21:55:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:55:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:55:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:55:07][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:55:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:55:08][DEBUG]: Message lu : size : 9
[2015-05-18 21:55:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 1D 4A AA 15 15 01 61 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:55:08][DEBUG]: The message is valid
[2015-05-18 21:55:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 29 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 21:55:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),29,21,21,'Heating','Demand',6);					
[2015-05-18 21:55:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 21:55:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:10][DEBUG]: Message lu : size : 16
[2015-05-18 21:55:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 1E F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:55:10][DEBUG]: The message is valid
[2015-05-18 21:55:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 30 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),30,90,0,0,9,7);					
[2015-05-18 21:55:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:55:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:15][DEBUG]: Message lu : size : 11
[2015-05-18 21:55:15][DEBUG]: Message lu : (20 first bytes): 0B 55 02 1F FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:55:15][DEBUG]: The message is valid
[2015-05-18 21:55:15][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 31 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:55:15][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),31,0.00,1705.00,9,5);					
[2015-05-18 21:55:15][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:55:15][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:55:15][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:55:15][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:55:15][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:55:15][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:55:19][DEBUG]: Message lu : size : 17
[2015-05-18 21:55:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 20 89 F2 01 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:55:19][DEBUG]: The message is valid
[2015-05-18 21:55:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 32 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,305,0,9,7);					
[2015-05-18 21:55:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:55:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:55:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:55:19][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:55:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:55:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:55:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:55:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:55:20][DEBUG]: MYSQL = 1
[2015-05-18 21:55:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:55:20][DEBUG]: PORT = 3306
[2015-05-18 21:55:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:55:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:55:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:55:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:55:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:55:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:55:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:55:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:55:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:55:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:55:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:55:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:55:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:55:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:55:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:55:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:55:20][DEBUG]: MDB_ID = 
[2015-05-18 21:55:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:55:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:55:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:55:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:55:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:55:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:55:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:55:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:55:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:55:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:55:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 21:55:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:55:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:55:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:55:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:55:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:55:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:55:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:55:20][DEBUG]: Message lu : size : 4
[2015-05-18 21:55:20][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:55:20][DEBUG]: The message is valid
[2015-05-18 21:55:20][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:55:20][DEBUG]: Not Suported yet
[2015-05-18 21:55:24][DEBUG]: Message lu : size : 16
[2015-05-18 21:55:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 21 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:55:24][DEBUG]: The message is valid
[2015-05-18 21:55:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 33 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),33,90,0,0,9,7);					
[2015-05-18 21:55:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:55:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:55:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 22 89 F2 00 00 00 01 31 00 00 53 BA 50 9E 79 00 00| 
[2015-05-18 21:55:31][DEBUG]: The message is valid
[2015-05-18 21:55:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 34 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280432 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280432,9,7);					
[2015-05-18 21:55:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:55:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:55:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:55:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:55:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:55:38][DEBUG]: Message lu : size : 16
[2015-05-18 21:55:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 23 F0 00 00 5A 00 00 00 00 00 53 BA 50 79 00 00 00| 
[2015-05-18 21:55:38][DEBUG]: The message is valid
[2015-05-18 21:55:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 35 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),35,90,0,0,9,7);					
[2015-05-18 21:55:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:55:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:52][DEBUG]: Message lu : size : 16
[2015-05-18 21:55:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 24 F0 00 00 5A 00 00 00 00 00 53 BA 50 79 00 00 00| 
[2015-05-18 21:55:52][DEBUG]: The message is valid
[2015-05-18 21:55:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 36 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:55:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),36,90,0,0,9,7);					
[2015-05-18 21:55:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:55:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:55:52][DEBUG]: Message lu : size : 10
[2015-05-18 21:55:52][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 25 00 01 00 78 5B 03 69 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:55:52][DEBUG]: The message is valid
[2015-05-18 21:55:52][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 37 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:55:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),37,12.00,91,'wet',9,6);					
[2015-05-18 21:55:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 21:55:52][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 21:55:52][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 21:55:52][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 21:55:52][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:56:02][DEBUG]: Message lu : size : 11
[2015-05-18 21:56:02][DEBUG]: Message lu : (20 first bytes): 0B 55 02 26 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:56:02][DEBUG]: The message is valid
[2015-05-18 21:56:02][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 38 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:56:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),38,0.00,1705.00,9,5);					
[2015-05-18 21:56:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:56:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:56:02][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:56:02][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:56:02][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:56:02][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:56:06][DEBUG]: Message lu : size : 16
[2015-05-18 21:56:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 27 F0 00 00 5A 00 00 00 00 00 53 BA 50 79 00 00 00| 
[2015-05-18 21:56:06][DEBUG]: The message is valid
[2015-05-18 21:56:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 39 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:56:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),39,90,0,0,9,7);					
[2015-05-18 21:56:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:56:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:56:20][DEBUG]: Message lu : size : 16
[2015-05-18 21:56:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 28 F0 00 00 5A 00 00 00 00 00 53 BA 50 79 00 00 00| 
[2015-05-18 21:56:20][DEBUG]: The message is valid
[2015-05-18 21:56:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 40 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:56:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),40,90,0,0,9,7);					
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:56:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:56:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:56:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:56:20][DEBUG]: MYSQL = 1
[2015-05-18 21:56:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:56:20][DEBUG]: PORT = 3306
[2015-05-18 21:56:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:56:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:56:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:56:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:56:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:56:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:56:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:56:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:56:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:56:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:56:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:56:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:56:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:56:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:56:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:56:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:56:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:56:20][DEBUG]: MDB_ID = 
[2015-05-18 21:56:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:56:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:56:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:56:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:56:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:56:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:56:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:56:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:56:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:56:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:56:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 21:56:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:56:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:56:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:56:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:56:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:56:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:56:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:56:21][DEBUG]: Message lu : size : 4
[2015-05-18 21:56:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:56:21][DEBUG]: The message is valid
[2015-05-18 21:56:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:56:21][DEBUG]: Not Suported yet
[2015-05-18 21:56:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:56:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 29 89 F2 00 00 00 01 31 00 00 53 BA 55 2A 79 00 00| 
[2015-05-18 21:56:31][DEBUG]: The message is valid
[2015-05-18 21:56:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 41 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280437 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:56:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280437,9,7);					
[2015-05-18 21:56:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:56:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:56:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:56:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:56:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:56:34][DEBUG]: Message lu : size : 16
[2015-05-18 21:56:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 2A F0 00 00 5A 00 00 00 00 00 53 BA 55 79 00 00 00| 
[2015-05-18 21:56:34][DEBUG]: The message is valid
[2015-05-18 21:56:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 42 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:56:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),42,90,0,0,9,7);					
[2015-05-18 21:56:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:56:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:56:48][DEBUG]: Message lu : size : 16
[2015-05-18 21:56:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 2B F0 00 00 5A 00 00 00 00 00 53 BA 55 79 00 00 00| 
[2015-05-18 21:56:48][DEBUG]: The message is valid
[2015-05-18 21:56:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 43 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:56:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),43,90,0,0,9,7);					
[2015-05-18 21:56:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:56:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:56:49][DEBUG]: Message lu : size : 11
[2015-05-18 21:56:49][DEBUG]: Message lu : (20 first bytes): 0B 55 02 2C FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:56:49][DEBUG]: The message is valid
[2015-05-18 21:56:49][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 44 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:56:49][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),44,0.00,1705.00,9,5);					
[2015-05-18 21:56:49][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:56:49][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:56:49][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:56:49][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:56:49][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:56:49][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:56:54][DEBUG]: [EnOcean] Message received 

[2015-05-18 21:56:54][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 21:56:54][DEBUG]: [EnOcean] Data =  d5 08 00 8b 3c 6b 00
[2015-05-18 21:56:54][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 50 00
[2015-05-18 21:56:54][DEBUG]: [EnOcean] byte 1: d5
[2015-05-18 21:56:54][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 21:56:54][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='8B'AND id3='3C'AND id4='6B';
[2015-05-18 21:56:54][DEBUG]: [EnDevice] dc_id = 21 ,21
[2015-05-18 21:56:54][DEBUG]: [EnDevice] rorg = D5
[2015-05-18 21:56:54][DEBUG]: [EnDevice] func = 00
[2015-05-18 21:56:54][DEBUG]: [EnDevice] type = 01
[2015-05-18 21:56:54][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 21:56:54][DEBUG]: [EnDevice] id2 = 8B
[2015-05-18 21:56:54][DEBUG]: [EnDevice] id3 = 3C
[2015-05-18 21:56:54][DEBUG]: [EnDevice] id4 = 6B
[2015-05-18 21:56:54][DEBUG]: [EnDevice] enable = 1
[2015-05-18 21:56:54][DEBUG]: 

 [EnOcean] 
 Packetype: 1BS Telegram  
 id1: 00  
 id2: 8B 
 id3: 3C  
 id4: 6B 
 Learn Button: not pressed 
 Contact: open 

[2015-05-18 21:57:02][DEBUG]: Message lu : size : 16
[2015-05-18 21:57:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 2D F0 00 00 5A 00 00 00 00 00 53 BA 55 79 00 00 00| 
[2015-05-18 21:57:02][DEBUG]: The message is valid
[2015-05-18 21:57:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 45 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),45,90,0,0,9,7);					
[2015-05-18 21:57:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:57:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:57:07][DEBUG]: Message lu : size : 17
[2015-05-18 21:57:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 2E 89 F2 02 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:57:07][DEBUG]: The message is valid
[2015-05-18 21:57:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 46 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,338,0,9,7);					
[2015-05-18 21:57:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:57:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:57:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:57:07][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:57:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:57:16][DEBUG]: Message lu : size : 16
[2015-05-18 21:57:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 2F F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:57:16][DEBUG]: The message is valid
[2015-05-18 21:57:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 47 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),47,90,0,0,9,7);					
[2015-05-18 21:57:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:57:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:57:19][DEBUG]: Message lu : size : 17
[2015-05-18 21:57:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 30 89 F2 01 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:57:19][DEBUG]: The message is valid
[2015-05-18 21:57:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 48 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,338,0,9,7);					
[2015-05-18 21:57:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:57:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:57:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:57:19][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:57:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:57:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:57:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:57:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:57:20][DEBUG]: MYSQL = 1
[2015-05-18 21:57:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:57:20][DEBUG]: PORT = 3306
[2015-05-18 21:57:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:57:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:57:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:57:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:57:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:57:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:57:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:57:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:57:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:57:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:57:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:57:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:57:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:57:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:57:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:57:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:57:20][DEBUG]: MDB_ID = 
[2015-05-18 21:57:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:57:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:57:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:57:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:57:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:57:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:57:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:57:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:57:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:57:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:57:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 21:57:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:57:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:57:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:57:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:57:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:57:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:57:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:57:20][DEBUG]: Message lu : size : 4
[2015-05-18 21:57:20][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:57:20][DEBUG]: The message is valid
[2015-05-18 21:57:20][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:57:20][DEBUG]: Not Suported yet
[2015-05-18 21:57:21][DEBUG]: Message lu : size : 10
[2015-05-18 21:57:21][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 31 00 01 00 78 5B 03 69 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:57:21][DEBUG]: The message is valid
[2015-05-18 21:57:21][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 49 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:57:21][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),49,12.00,91,'wet',9,6);					
[2015-05-18 21:57:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 21:57:22][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 21:57:22][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 21:57:22][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 21:57:22][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:57:30][DEBUG]: Message lu : size : 16
[2015-05-18 21:57:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 32 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:57:30][DEBUG]: The message is valid
[2015-05-18 21:57:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 50 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),50,90,0,0,9,7);					
[2015-05-18 21:57:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:57:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:57:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:57:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 33 89 F2 00 00 00 01 52 00 00 53 BA 59 E6 79 00 00| 
[2015-05-18 21:57:31][DEBUG]: The message is valid
[2015-05-18 21:57:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 51 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 338 
 Total: 6280443 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,338,6280443,9,7);					
[2015-05-18 21:57:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:57:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:57:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:57:31][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:57:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:57:36][DEBUG]: Message lu : size : 11
[2015-05-18 21:57:36][DEBUG]: Message lu : (20 first bytes): 0B 55 02 34 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:57:36][DEBUG]: The message is valid
[2015-05-18 21:57:36][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 52 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:57:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),52,0.00,1705.00,9,5);					
[2015-05-18 21:57:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:57:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:57:36][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:57:36][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:57:36][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:57:36][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:57:44][DEBUG]: Message lu : size : 16
[2015-05-18 21:57:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 35 F0 00 00 5A 00 00 00 00 00 53 BA 59 79 00 00 00| 
[2015-05-18 21:57:44][DEBUG]: The message is valid
[2015-05-18 21:57:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 53 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),53,90,0,0,9,7);					
[2015-05-18 21:57:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:57:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:57:58][DEBUG]: Message lu : size : 16
[2015-05-18 21:57:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 36 F0 00 00 5A 00 00 00 00 00 53 BA 59 79 00 00 00| 
[2015-05-18 21:57:58][DEBUG]: The message is valid
[2015-05-18 21:57:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 54 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:57:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),54,90,0,0,9,7);					
[2015-05-18 21:57:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:57:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:58:12][DEBUG]: Message lu : size : 16
[2015-05-18 21:58:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 37 F0 00 00 5A 00 00 00 00 00 53 BA 59 79 00 00 00| 
[2015-05-18 21:58:12][DEBUG]: The message is valid
[2015-05-18 21:58:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 55 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),55,90,0,0,9,7);					
[2015-05-18 21:58:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:58:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:58:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:58:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:58:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:58:20][DEBUG]: MYSQL = 1
[2015-05-18 21:58:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:58:20][DEBUG]: PORT = 3306
[2015-05-18 21:58:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:58:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:58:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:58:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:58:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:58:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:58:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:58:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:58:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:58:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:58:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:58:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:58:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:58:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:58:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:58:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:58:20][DEBUG]: MDB_ID = 
[2015-05-18 21:58:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:58:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:58:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:58:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:58:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:58:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:58:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:58:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:58:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:58:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:58:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 21:58:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:58:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:58:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:58:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:58:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:58:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:58:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:58:21][DEBUG]: Message lu : size : 4
[2015-05-18 21:58:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:58:21][DEBUG]: The message is valid
[2015-05-18 21:58:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:58:21][DEBUG]: Not Suported yet
[2015-05-18 21:58:23][DEBUG]: Message lu : size : 11
[2015-05-18 21:58:23][DEBUG]: Message lu : (20 first bytes): 0B 55 02 38 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:58:23][DEBUG]: The message is valid
[2015-05-18 21:58:23][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 56 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:58:23][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),56,0.00,1705.00,9,5);					
[2015-05-18 21:58:23][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:58:23][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:58:23][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:58:23][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:58:23][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:58:23][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:58:26][DEBUG]: Message lu : size : 16
[2015-05-18 21:58:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 39 F0 00 00 5A 00 00 00 00 00 53 BA 59 79 00 00 00| 
[2015-05-18 21:58:26][DEBUG]: The message is valid
[2015-05-18 21:58:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 57 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),57,90,0,0,9,7);					
[2015-05-18 21:58:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:58:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:58:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:58:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 3A 89 F2 00 00 00 01 31 00 00 53 BA 5E D2 79 00 00| 
[2015-05-18 21:58:31][DEBUG]: The message is valid
[2015-05-18 21:58:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 58 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280448 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280448,9,7);					
[2015-05-18 21:58:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:58:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:58:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:58:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:58:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:58:40][DEBUG]: Message lu : size : 16
[2015-05-18 21:58:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 3B F0 00 00 5A 00 00 00 00 00 53 BA 5E 79 00 00 00| 
[2015-05-18 21:58:40][DEBUG]: The message is valid
[2015-05-18 21:58:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 59 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),59,90,0,0,9,7);					
[2015-05-18 21:58:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:58:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:58:43][DEBUG]: Message lu : size : 17
[2015-05-18 21:58:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 3C 89 F2 04 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:58:43][DEBUG]: The message is valid
[2015-05-18 21:58:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 60 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,338,0,9,7);					
[2015-05-18 21:58:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:58:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:58:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:58:43][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:58:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:58:51][DEBUG]: Message lu : size : 10
[2015-05-18 21:58:51][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 3D 00 01 00 78 5B 03 69 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:58:51][DEBUG]: The message is valid
[2015-05-18 21:58:51][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 61 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 21:58:51][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),61,12.00,91,'wet',9,6);					
[2015-05-18 21:58:51][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 21:58:51][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 21:58:51][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 21:58:51][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 21:58:51][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:58:54][DEBUG]: Message lu : size : 16
[2015-05-18 21:58:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 3E F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:58:54][DEBUG]: The message is valid
[2015-05-18 21:58:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 62 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),62,90,0,0,9,7);					
[2015-05-18 21:58:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:58:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:58:55][DEBUG]: Message lu : size : 17
[2015-05-18 21:58:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 3F 89 F2 03 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:58:55][DEBUG]: The message is valid
[2015-05-18 21:58:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 63 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:58:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,338,0,9,7);					
[2015-05-18 21:58:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:58:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:58:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:58:55][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:58:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:07][DEBUG]: Message lu : size : 17
[2015-05-18 21:59:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 40 89 F2 02 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:59:07][DEBUG]: The message is valid
[2015-05-18 21:59:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 64 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,305,0,9,7);					
[2015-05-18 21:59:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:59:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:59:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:59:07][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:59:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:08][DEBUG]: Message lu : size : 16
[2015-05-18 21:59:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 41 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:59:08][DEBUG]: The message is valid
[2015-05-18 21:59:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 65 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),65,90,0,0,9,7);					
[2015-05-18 21:59:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:59:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:59:10][DEBUG]: Message lu : size : 11
[2015-05-18 21:59:10][DEBUG]: Message lu : (20 first bytes): 0B 55 02 42 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:59:10][DEBUG]: The message is valid
[2015-05-18 21:59:10][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 66 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:59:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),66,0.00,1705.00,9,5);					
[2015-05-18 21:59:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:59:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:59:10][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:59:10][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:59:10][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:59:10][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:19][DEBUG]: Message lu : size : 17
[2015-05-18 21:59:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 43 89 F2 01 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:59:19][DEBUG]: The message is valid
[2015-05-18 21:59:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 67 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,305,0,9,7);					
[2015-05-18 21:59:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:59:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:59:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:59:19][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:59:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 21:59:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 21:59:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 21:59:20][DEBUG]: MYSQL = 1
[2015-05-18 21:59:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 21:59:20][DEBUG]: PORT = 3306
[2015-05-18 21:59:20][DEBUG]: LOGIN = mydombox
[2015-05-18 21:59:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 21:59:20][DEBUG]: DATABASE = mydombox
[2015-05-18 21:59:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 21:59:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 21:59:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 21:59:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 21:59:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 21:59:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 21:59:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 21:59:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 21:59:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 21:59:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 21:59:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 21:59:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 21:59:20][DEBUG]: MDB_KEY = 
[2015-05-18 21:59:20][DEBUG]: MDB_ID = 
[2015-05-18 21:59:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 21:59:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 21:59:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 21:59:20][DEBUG]: --------------------------------------------------------

[2015-05-18 21:59:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 21:59:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:59:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 21:59:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 21:59:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 21:59:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 21:59:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 21:59:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 21:59:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 21:59:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 21:59:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 21:59:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 21:59:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 21:59:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 21:59:21][DEBUG]: Message lu : size : 4
[2015-05-18 21:59:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 21:59:21][DEBUG]: The message is valid
[2015-05-18 21:59:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 21:59:21][DEBUG]: Not Suported yet
[2015-05-18 21:59:22][DEBUG]: Message lu : size : 16
[2015-05-18 21:59:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 44 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 21:59:22][DEBUG]: The message is valid
[2015-05-18 21:59:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 68 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),68,90,0,0,9,7);					
[2015-05-18 21:59:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:59:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:59:31][DEBUG]: Message lu : size : 17
[2015-05-18 21:59:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 45 89 F2 00 00 00 01 31 00 00 53 BA 63 76 79 00 00| 
[2015-05-18 21:59:31][DEBUG]: The message is valid
[2015-05-18 21:59:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 69 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280454 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280454,9,7);					
[2015-05-18 21:59:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:59:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:59:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:59:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 21:59:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:36][DEBUG]: Message lu : size : 16
[2015-05-18 21:59:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 46 F0 00 00 5A 00 00 00 00 00 53 BA 63 79 00 00 00| 
[2015-05-18 21:59:36][DEBUG]: The message is valid
[2015-05-18 21:59:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 70 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),70,90,0,0,9,7);					
[2015-05-18 21:59:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:59:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:59:50][DEBUG]: Message lu : size : 16
[2015-05-18 21:59:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 47 F0 00 00 5A 00 00 00 00 00 53 BA 63 79 00 00 00| 
[2015-05-18 21:59:50][DEBUG]: The message is valid
[2015-05-18 21:59:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 71 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),71,90,0,0,9,7);					
[2015-05-18 21:59:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 21:59:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 21:59:55][DEBUG]: Message lu : size : 17
[2015-05-18 21:59:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 48 89 F2 03 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 21:59:55][DEBUG]: The message is valid
[2015-05-18 21:59:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 72 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 21:59:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,338,0,9,7);					
[2015-05-18 21:59:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 21:59:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 21:59:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 21:59:55][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 21:59:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 21:59:57][DEBUG]: Message lu : size : 11
[2015-05-18 21:59:57][DEBUG]: Message lu : (20 first bytes): 0B 55 02 49 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 21:59:57][DEBUG]: The message is valid
[2015-05-18 21:59:57][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 73 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 21:59:57][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),73,0.00,1705.00,9,5);					
[2015-05-18 21:59:57][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:59:57][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 21:59:57][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 21:59:57][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 21:59:57][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 21:59:57][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:00:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 4A F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:00:04][DEBUG]: The message is valid
[2015-05-18 22:00:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 74 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),74,90,0,0,9,7);					
[2015-05-18 22:00:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:00:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:00:07][DEBUG]: Message lu : size : 17
[2015-05-18 22:00:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 4B 89 F2 02 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:00:07][DEBUG]: The message is valid
[2015-05-18 22:00:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 75 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,305,0,9,7);					
[2015-05-18 22:00:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:00:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:00:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:00:07][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:00:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:00:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 4C F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:00:18][DEBUG]: The message is valid
[2015-05-18 22:00:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 76 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),76,90,0,0,9,7);					
[2015-05-18 22:00:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:00:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:00:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:00:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 4D 89 F2 01 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:00:19][DEBUG]: The message is valid
[2015-05-18 22:00:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 77 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,305,0,9,7);					
[2015-05-18 22:00:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:00:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:00:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:00:19][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:00:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:00:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:00:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:00:20][DEBUG]: MYSQL = 1
[2015-05-18 22:00:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:00:20][DEBUG]: PORT = 3306
[2015-05-18 22:00:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:00:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:00:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:00:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:00:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:00:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:00:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:00:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:00:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:00:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:00:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:00:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:00:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:00:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:00:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:00:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:00:20][DEBUG]: MDB_ID = 
[2015-05-18 22:00:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:00:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:00:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:00:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:00:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:00:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:00:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:00:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:00:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:00:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:00:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 21:55:08 

[2015-05-18 22:00:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:00:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:00:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:00:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:00:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:00:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:00:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:00:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:00:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:00:21][DEBUG]: The message is valid
[2015-05-18 22:00:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:00:21][DEBUG]: Not Suported yet
[2015-05-18 22:00:28][DEBUG]: Message lu : size : 9
[2015-05-18 22:00:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 4E 4A AA 15 15 01 61 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:00:28][DEBUG]: The message is valid
[2015-05-18 22:00:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 78 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:00:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),78,21,21,'Heating','Demand',6);					
[2015-05-18 22:00:29][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:00:29][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:00:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:00:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 4F 89 F2 00 00 00 01 52 00 00 53 BA 68 0E 79 00 00| 
[2015-05-18 22:00:31][DEBUG]: The message is valid
[2015-05-18 22:00:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 79 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 338 
 Total: 6280459 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,338,6280459,9,7);					
[2015-05-18 22:00:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:00:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:00:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:00:31][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 22:00:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:00:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 50 F0 00 00 5A 00 00 00 00 00 53 BA 68 79 00 00 00| 
[2015-05-18 22:00:32][DEBUG]: The message is valid
[2015-05-18 22:00:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 80 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),80,90,0,0,9,7);					
[2015-05-18 22:00:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:00:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:00:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:00:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 51 89 F2 04 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:00:43][DEBUG]: The message is valid
[2015-05-18 22:00:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 81 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,338,0,9,7);					
[2015-05-18 22:00:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:00:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:00:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:00:43][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 22:00:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:44][DEBUG]: Message lu : size : 11
[2015-05-18 22:00:44][DEBUG]: Message lu : (20 first bytes): 0B 55 02 52 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 22:00:44][DEBUG]: The message is valid
[2015-05-18 22:00:44][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 82 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:00:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),82,0.00,1705.00,9,5);					
[2015-05-18 22:00:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:00:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:00:44][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 22:00:44][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 22:00:44][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 22:00:44][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:00:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:00:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 53 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:00:46][DEBUG]: The message is valid
[2015-05-18 22:00:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 83 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:00:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),83,90,0,0,9,7);					
[2015-05-18 22:00:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:00:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:01:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:01:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 54 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:01:00][DEBUG]: The message is valid
[2015-05-18 22:01:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 84 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),84,90,0,0,9,7);					
[2015-05-18 22:01:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:01:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:01:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:01:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 55 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:01:14][DEBUG]: The message is valid
[2015-05-18 22:01:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 85 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),85,90,0,0,9,7);					
[2015-05-18 22:01:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:01:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:01:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:01:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:01:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:01:20][DEBUG]: MYSQL = 1
[2015-05-18 22:01:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:01:20][DEBUG]: PORT = 3306
[2015-05-18 22:01:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:01:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:01:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:01:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:01:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:01:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:01:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:01:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:01:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:01:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:01:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:01:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:01:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:01:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:01:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:01:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:01:20][DEBUG]: MDB_ID = 
[2015-05-18 22:01:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:01:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:01:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:01:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:01:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:01:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:01:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:01:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:01:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:01:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:01:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:00:28 

[2015-05-18 22:01:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:01:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:01:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:01:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:01:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:01:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:01:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:01:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:01:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:01:21][DEBUG]: The message is valid
[2015-05-18 22:01:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:01:21][DEBUG]: Not Suported yet
[2015-05-18 22:01:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:01:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 56 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:01:28][DEBUG]: The message is valid
[2015-05-18 22:01:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 86 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),86,90,0,0,9,7);					
[2015-05-18 22:01:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:01:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:01:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:01:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 57 89 F2 00 00 00 01 21 00 00 53 BA 6C E8 79 00 00| 
[2015-05-18 22:01:31][DEBUG]: The message is valid
[2015-05-18 22:01:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 87 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280465 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280465,9,7);					
[2015-05-18 22:01:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:01:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:01:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:01:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:01:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:01:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:01:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 58 F0 00 00 5A 00 00 00 00 00 53 BA 6C 79 00 00 00| 
[2015-05-18 22:01:42][DEBUG]: The message is valid
[2015-05-18 22:01:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 88 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),88,90,0,0,9,7);					
[2015-05-18 22:01:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:01:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:01:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:01:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 59 89 F2 04 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:01:43][DEBUG]: The message is valid
[2015-05-18 22:01:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 89 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,7);					
[2015-05-18 22:01:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:01:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:01:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:01:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:01:44][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:01:50][DEBUG]: Message lu : size : 10
[2015-05-18 22:01:50][DEBUG]: Message lu : (20 first bytes): 0A 52 0C 5A 00 01 00 78 5B 03 69 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:01:50][DEBUG]: The message is valid
[2015-05-18 22:01:50][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: TH12 is Imagintronix Soil sensor 
 Seqnbr: 90 
 id1: 00  
 id2: 01 
 Temperature: 12.00 
 Humidity: 91 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:01:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','0C',1,'00','01','tx',12.00,91 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=91;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='01' LIMIT 1),NOW(),90,12.00,91,'wet',9,6);					
[2015-05-18 22:01:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='01' LIMIT 1;
[2015-05-18 22:01:50][DEBUG]: MDB Cloud: ISS status : 1  Name: ab4abfaea8104ed09a745a6176c53176
[2015-05-18 22:01:50][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/ab4abfaea8104ed09a745a6176c53176/values
[2015-05-18 22:01:50][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "91" }}]
[2015-05-18 22:01:50][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:01:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:01:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 5B F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:01:56][DEBUG]: The message is valid
[2015-05-18 22:01:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 91 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:01:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),91,90,0,0,9,7);					
[2015-05-18 22:01:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:01:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:02:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:02:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 5C F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:02:10][DEBUG]: The message is valid
[2015-05-18 22:02:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 92 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:02:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),92,90,0,0,9,7);					
[2015-05-18 22:02:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:02:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:02:18][DEBUG]: Message lu : size : 11
[2015-05-18 22:02:18][DEBUG]: Message lu : (20 first bytes): 0B 55 02 5D FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 22:02:18][DEBUG]: The message is valid
[2015-05-18 22:02:18][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 93 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:02:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),93,0.00,1705.00,9,5);					
[2015-05-18 22:02:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:02:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:02:18][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 22:02:18][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 22:02:18][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 22:02:18][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:02:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:02:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:02:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:02:20][DEBUG]: MYSQL = 1
[2015-05-18 22:02:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:02:20][DEBUG]: PORT = 3306
[2015-05-18 22:02:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:02:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:02:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:02:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:02:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:02:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:02:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:02:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:02:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:02:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:02:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:02:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:02:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:02:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:02:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:02:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:02:20][DEBUG]: MDB_ID = 
[2015-05-18 22:02:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:02:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:02:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:02:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:02:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:02:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:02:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:02:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:02:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:02:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:02:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:00:28 

[2015-05-18 22:02:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:02:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:02:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:02:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:02:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:02:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:02:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:02:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:02:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:02:21][DEBUG]: The message is valid
[2015-05-18 22:02:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:02:21][DEBUG]: Not Suported yet
[2015-05-18 22:02:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:02:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 5E F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:02:24][DEBUG]: The message is valid
[2015-05-18 22:02:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 94 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:02:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),94,90,0,0,9,7);					
[2015-05-18 22:02:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:02:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:02:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:02:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 5F 89 F2 00 00 00 01 21 00 00 53 BA 71 2C 79 00 00| 
[2015-05-18 22:02:31][DEBUG]: The message is valid
[2015-05-18 22:02:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 95 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280469 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:02:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280469,9,7);					
[2015-05-18 22:02:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:02:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:02:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:02:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:02:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:02:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:02:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 60 F0 00 00 5A 00 00 00 00 00 53 BA 71 79 00 00 00| 
[2015-05-18 22:02:38][DEBUG]: The message is valid
[2015-05-18 22:02:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 96 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:02:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),96,90,0,0,9,7);					
[2015-05-18 22:02:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:02:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:02:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:02:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 61 F0 00 00 5A 00 00 00 00 00 53 BA 71 79 00 00 00| 
[2015-05-18 22:02:52][DEBUG]: The message is valid
[2015-05-18 22:02:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 97 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:02:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),97,90,0,0,9,7);					
[2015-05-18 22:02:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:02:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:03:05][DEBUG]: Message lu : size : 11
[2015-05-18 22:03:05][DEBUG]: Message lu : (20 first bytes): 0B 55 02 62 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 22:03:05][DEBUG]: The message is valid
[2015-05-18 22:03:05][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 98 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:03:05][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),98,0.00,1705.00,9,5);					
[2015-05-18 22:03:05][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:03:05][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:03:05][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 22:03:05][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 22:03:05][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 22:03:05][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:03:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:03:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 63 F0 00 00 5A 00 00 00 00 00 53 BA 71 79 00 00 00| 
[2015-05-18 22:03:06][DEBUG]: The message is valid
[2015-05-18 22:03:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 99 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),99,90,0,0,9,7);					
[2015-05-18 22:03:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:03:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:03:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:03:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 64 89 F2 01 00 00 01 92 00 00 00 00 00 00 69 00 00| 
[2015-05-18 22:03:19][DEBUG]: The message is valid
[2015-05-18 22:03:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 100 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 402 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:03:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 402 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=402;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,402,0,9,6);					
[2015-05-18 22:03:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:03:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:03:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:03:19][DEBUG]: ISS POST DATA : [{ "value": "402" }]
[2015-05-18 22:03:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:03:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:03:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 66 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:03:20][DEBUG]: The message is valid
[2015-05-18 22:03:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 102 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),102,90,0,0,9,7);					
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:03:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:03:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:03:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:03:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:03:20][DEBUG]: MYSQL = 1
[2015-05-18 22:03:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:03:20][DEBUG]: PORT = 3306
[2015-05-18 22:03:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:03:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:03:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:03:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:03:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:03:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:03:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:03:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:03:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:03:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:03:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:03:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:03:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:03:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:03:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:03:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:03:20][DEBUG]: MDB_ID = 
[2015-05-18 22:03:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:03:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:03:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:03:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:03:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:03:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:03:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:03:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:03:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:03:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:03:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:00:28 

[2015-05-18 22:03:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:03:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:03:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:03:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:03:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:03:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:03:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:03:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:03:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:03:21][DEBUG]: The message is valid
[2015-05-18 22:03:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:03:21][DEBUG]: Not Suported yet
[2015-05-18 22:03:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:03:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 67 89 F2 00 00 00 02 53 00 00 53 BA 76 48 69 00 00| 
[2015-05-18 22:03:31][DEBUG]: The message is valid
[2015-05-18 22:03:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 103 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 595 
 Total: 6280475 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:03:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 595 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=595;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,595,6280475,9,6);					
[2015-05-18 22:03:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:03:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:03:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:03:31][DEBUG]: ISS POST DATA : [{ "value": "595" }]
[2015-05-18 22:03:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:03:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:03:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 68 F0 00 00 5A 00 00 00 00 00 53 BA 76 79 00 00 00| 
[2015-05-18 22:03:34][DEBUG]: The message is valid
[2015-05-18 22:03:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 104 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),104,90,0,0,9,7);					
[2015-05-18 22:03:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:03:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:03:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:03:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 69 89 F2 04 00 00 01 A2 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:03:43][DEBUG]: The message is valid
[2015-05-18 22:03:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 105 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 418 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 418 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=418;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,418,0,9,7);					
[2015-05-18 22:03:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:03:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:03:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:03:43][DEBUG]: ISS POST DATA : [{ "value": "418" }]
[2015-05-18 22:03:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:03:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:03:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 6A F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:03:48][DEBUG]: The message is valid
[2015-05-18 22:03:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 106 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),106,90,0,0,9,7);					
[2015-05-18 22:03:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:03:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:03:55][DEBUG]: Message lu : size : 17
[2015-05-18 22:03:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 6B 89 F2 03 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:03:55][DEBUG]: The message is valid
[2015-05-18 22:03:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 107 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:03:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,305,0,9,7);					
[2015-05-18 22:03:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:03:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:03:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:03:55][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:03:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:04:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:04:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 6C F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:04:02][DEBUG]: The message is valid
[2015-05-18 22:04:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 108 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),108,90,0,0,9,7);					
[2015-05-18 22:04:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:04:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:04:07][DEBUG]: Message lu : size : 17
[2015-05-18 22:04:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 6D 89 F2 02 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:04:07][DEBUG]: The message is valid
[2015-05-18 22:04:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 109 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,305,0,9,7);					
[2015-05-18 22:04:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:04:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:04:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:04:07][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:04:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:04:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:04:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 6E F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:04:16][DEBUG]: The message is valid
[2015-05-18 22:04:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 110 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),110,90,0,0,9,7);					
[2015-05-18 22:04:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:04:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:04:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:04:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:04:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:04:20][DEBUG]: MYSQL = 1
[2015-05-18 22:04:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:04:20][DEBUG]: PORT = 3306
[2015-05-18 22:04:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:04:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:04:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:04:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:04:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:04:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:04:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:04:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:04:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:04:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:04:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:04:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:04:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:04:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:04:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:04:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:04:20][DEBUG]: MDB_ID = 
[2015-05-18 22:04:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:04:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:04:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:04:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:04:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:04:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:04:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:04:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:04:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:04:20][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:04:20][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:00:28 

[2015-05-18 22:04:20][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:04:20][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:04:20][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:04:20][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:04:20][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:04:20][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:04:20][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:04:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:04:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:04:21][DEBUG]: The message is valid
[2015-05-18 22:04:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:04:21][DEBUG]: Not Suported yet
[2015-05-18 22:04:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:04:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 6F F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:04:30][DEBUG]: The message is valid
[2015-05-18 22:04:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 111 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),111,90,0,0,9,7);					
[2015-05-18 22:04:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:04:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:04:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:04:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 70 89 F2 00 00 00 01 31 00 00 53 BA 7B 7C 79 00 00| 
[2015-05-18 22:04:31][DEBUG]: The message is valid
[2015-05-18 22:04:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 112 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280481 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280481,9,7);					
[2015-05-18 22:04:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:04:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:04:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:04:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:04:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:04:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:04:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 71 F0 00 00 5A 00 00 00 00 00 53 BA 7B 79 00 00 00| 
[2015-05-18 22:04:44][DEBUG]: The message is valid
[2015-05-18 22:04:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 113 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),113,90,0,0,9,7);					
[2015-05-18 22:04:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:04:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:04:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:04:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 72 F0 00 00 5A 00 00 00 00 00 53 BA 7B 79 00 00 00| 
[2015-05-18 22:04:58][DEBUG]: The message is valid
[2015-05-18 22:04:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 114 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:04:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),114,90,0,0,9,7);					
[2015-05-18 22:04:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:04:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:05:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:05:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 73 F0 00 00 5A 00 00 00 00 00 53 BA 7B 79 00 00 00| 
[2015-05-18 22:05:12][DEBUG]: The message is valid
[2015-05-18 22:05:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 115 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),115,90,0,0,9,7);					
[2015-05-18 22:05:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:05:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:05:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:05:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 74 89 F2 01 00 00 01 72 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:05:19][DEBUG]: The message is valid
[2015-05-18 22:05:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 116 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 370 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 370 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=370;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,370,0,9,7);					
[2015-05-18 22:05:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:05:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:05:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:05:19][DEBUG]: ISS POST DATA : [{ "value": "370" }]
[2015-05-18 22:05:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:05:20][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:05:20][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:05:20][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:05:20][DEBUG]: MYSQL = 1
[2015-05-18 22:05:20][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:05:20][DEBUG]: PORT = 3306
[2015-05-18 22:05:20][DEBUG]: LOGIN = mydombox
[2015-05-18 22:05:20][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:05:20][DEBUG]: DATABASE = mydombox
[2015-05-18 22:05:20][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:05:20][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:05:20][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:05:20][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:05:20][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:05:20][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:05:20][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:05:20][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:05:20][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:05:20][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:05:20][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:05:20][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:05:20][DEBUG]: MDB_KEY = 
[2015-05-18 22:05:20][DEBUG]: MDB_ID = 
[2015-05-18 22:05:20][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:05:20][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:05:20][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:05:20][DEBUG]: --------------------------------------------------------

[2015-05-18 22:05:20][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:05:20][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:05:20][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:05:20][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:05:20][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:05:20][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:05:20][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:05:20][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:05:20][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:05:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:05:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:05:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:00:28 

[2015-05-18 22:05:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:05:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:05:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:05:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:05:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:05:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:05:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:05:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:05:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:05:21][DEBUG]: The message is valid
[2015-05-18 22:05:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:05:21][DEBUG]: Not Suported yet
[2015-05-18 22:05:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:05:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 75 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:05:26][DEBUG]: The message is valid
[2015-05-18 22:05:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 117 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),117,90,0,0,9,7);					
[2015-05-18 22:05:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:05:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:05:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:05:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 76 89 F2 00 00 00 01 31 00 00 53 BA 80 20 79 00 00| 
[2015-05-18 22:05:31][DEBUG]: The message is valid
[2015-05-18 22:05:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 118 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280487 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280487,9,7);					
[2015-05-18 22:05:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:05:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:05:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:05:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:05:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:05:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:05:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 77 F0 00 00 5A 00 00 00 00 00 53 BA 80 79 00 00 00| 
[2015-05-18 22:05:40][DEBUG]: The message is valid
[2015-05-18 22:05:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 119 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),119,90,0,0,9,7);					
[2015-05-18 22:05:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:05:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:05:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:05:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 78 89 F2 04 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:05:43][DEBUG]: The message is valid
[2015-05-18 22:05:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 120 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,7);					
[2015-05-18 22:05:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:05:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:05:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:05:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:05:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:05:48][DEBUG]: Message lu : size : 9
[2015-05-18 22:05:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 79 4A AA 15 15 01 61 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:05:48][DEBUG]: The message is valid
[2015-05-18 22:05:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 121 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:05:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),121,21,21,'Heating','Demand',6);					
[2015-05-18 22:05:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:05:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:05:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:05:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 7A F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:05:54][DEBUG]: The message is valid
[2015-05-18 22:05:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 122 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:05:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),122,90,0,0,9,7);					
[2015-05-18 22:05:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:05:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:06:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:06:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 7B F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:06:08][DEBUG]: The message is valid
[2015-05-18 22:06:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 123 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),123,90,0,0,9,7);					
[2015-05-18 22:06:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:06:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:06:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:06:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:06:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:06:21][DEBUG]: MYSQL = 1
[2015-05-18 22:06:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:06:21][DEBUG]: PORT = 3306
[2015-05-18 22:06:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:06:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:06:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:06:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:06:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:06:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:06:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:06:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:06:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:06:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:06:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:06:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:06:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:06:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:06:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:06:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:06:21][DEBUG]: MDB_ID = 
[2015-05-18 22:06:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:06:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:06:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:06:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:06:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:06:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:06:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:06:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:06:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:06:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:06:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:05:48 

[2015-05-18 22:06:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:06:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:06:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:06:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:06:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:06:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:06:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:06:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:06:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:06:21][DEBUG]: The message is valid
[2015-05-18 22:06:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:06:21][DEBUG]: Not Suported yet
[2015-05-18 22:06:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:06:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 7C F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:06:22][DEBUG]: The message is valid
[2015-05-18 22:06:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 124 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),124,90,0,0,9,7);					
[2015-05-18 22:06:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:06:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:06:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:06:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 7D 89 F2 00 00 00 01 31 00 00 53 BA 84 94 79 00 00| 
[2015-05-18 22:06:31][DEBUG]: The message is valid
[2015-05-18 22:06:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 125 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280492 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280492,9,7);					
[2015-05-18 22:06:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:06:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:06:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:06:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:06:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:06:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:06:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 7E F0 00 00 5A 00 00 00 00 00 53 BA 84 79 00 00 00| 
[2015-05-18 22:06:36][DEBUG]: The message is valid
[2015-05-18 22:06:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 126 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),126,90,0,0,9,7);					
[2015-05-18 22:06:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:06:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:06:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:06:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 7F 89 F2 04 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:06:43][DEBUG]: The message is valid
[2015-05-18 22:06:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 127 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,338,0,9,7);					
[2015-05-18 22:06:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:06:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:06:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:06:43][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 22:06:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:06:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:06:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 80 F0 00 00 5A 00 00 00 00 00 00 00 00 69 00 00 00| 
[2015-05-18 22:06:50][DEBUG]: The message is valid
[2015-05-18 22:06:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 128 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:06:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),128,90,0,0,9,6);					
[2015-05-18 22:06:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:06:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:06:55][DEBUG]: Message lu : size : 17
[2015-05-18 22:06:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 81 89 F2 03 00 00 01 52 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:06:55][DEBUG]: The message is valid
[2015-05-18 22:06:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 129 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 338 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:06:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,338,0,9,7);					
[2015-05-18 22:06:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:06:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:06:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:06:55][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 22:06:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:07:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:07:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 82 F0 00 00 5A 00 00 00 00 00 00 00 00 69 00 00 00| 
[2015-05-18 22:07:04][DEBUG]: The message is valid
[2015-05-18 22:07:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 130 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:07:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),130,90,0,0,9,6);					
[2015-05-18 22:07:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:07:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:07:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:07:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 83 F0 00 00 5A 00 00 00 00 00 00 00 00 69 00 00 00| 
[2015-05-18 22:07:18][DEBUG]: The message is valid
[2015-05-18 22:07:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 131 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:07:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),131,90,0,0,9,6);					
[2015-05-18 22:07:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:07:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:07:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:07:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:07:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:07:21][DEBUG]: MYSQL = 1
[2015-05-18 22:07:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:07:21][DEBUG]: PORT = 3306
[2015-05-18 22:07:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:07:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:07:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:07:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:07:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:07:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:07:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:07:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:07:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:07:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:07:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:07:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:07:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:07:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:07:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:07:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:07:21][DEBUG]: MDB_ID = 
[2015-05-18 22:07:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:07:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:07:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:07:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:07:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:07:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:07:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:07:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:07:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:07:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:07:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:05:48 

[2015-05-18 22:07:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:07:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:07:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:07:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:07:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:07:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:07:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:07:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:07:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:07:21][DEBUG]: The message is valid
[2015-05-18 22:07:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:07:21][DEBUG]: Not Suported yet
[2015-05-18 22:07:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:07:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 84 89 F2 00 00 00 01 21 00 00 53 BA 89 4A 79 00 00| 
[2015-05-18 22:07:31][DEBUG]: The message is valid
[2015-05-18 22:07:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 132 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280497 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:07:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280497,9,7);					
[2015-05-18 22:07:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:07:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:07:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:07:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:07:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:07:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:07:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 85 F0 00 00 5A 00 00 00 00 00 53 BA 89 79 00 00 00| 
[2015-05-18 22:07:32][DEBUG]: The message is valid
[2015-05-18 22:07:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 133 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:07:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),133,90,0,0,9,7);					
[2015-05-18 22:07:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:07:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:07:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:07:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 86 89 F2 04 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:07:43][DEBUG]: The message is valid
[2015-05-18 22:07:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 134 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:07:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,7);					
[2015-05-18 22:07:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:07:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:07:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:07:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:07:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:07:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:07:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 87 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:07:46][DEBUG]: The message is valid
[2015-05-18 22:07:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 135 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:07:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),135,90,0,0,9,7);					
[2015-05-18 22:07:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:07:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:07:47][DEBUG]: Message lu : size : 11
[2015-05-18 22:07:47][DEBUG]: Message lu : (20 first bytes): 0B 55 02 88 FC 00 00 00 00 42 9A 59 00 00 00 00 00 00 00 00| 
[2015-05-18 22:07:47][DEBUG]: The message is valid
[2015-05-18 22:07:47][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 136 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.50 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:07:47][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1705.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1705.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),136,0.00,1705.00,9,5);					
[2015-05-18 22:07:47][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:07:47][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:07:47][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 22:07:47][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 22:07:47][DEBUG]: ISS POST DATA : [{ "value": "170.50" }]
[2015-05-18 22:07:47][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:08:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:08:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 89 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:08:00][DEBUG]: The message is valid
[2015-05-18 22:08:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 137 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:08:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),137,90,0,0,9,7);					
[2015-05-18 22:08:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:08:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:08:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:08:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 8A F0 00 00 5A 00 00 00 00 00 00 00 00 69 00 00 00| 
[2015-05-18 22:08:14][DEBUG]: The message is valid
[2015-05-18 22:08:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 138 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:08:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),138,90,0,0,9,6);					
[2015-05-18 22:08:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:08:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:08:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:08:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:08:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:08:21][DEBUG]: MYSQL = 1
[2015-05-18 22:08:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:08:21][DEBUG]: PORT = 3306
[2015-05-18 22:08:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:08:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:08:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:08:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:08:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:08:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:08:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:08:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:08:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:08:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:08:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:08:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:08:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:08:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:08:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:08:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:08:21][DEBUG]: MDB_ID = 
[2015-05-18 22:08:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:08:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:08:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:08:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:08:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:08:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:08:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:08:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:08:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:08:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:08:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:05:48 

[2015-05-18 22:08:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:08:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:08:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:08:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:08:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:08:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:08:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:08:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:08:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:08:21][DEBUG]: The message is valid
[2015-05-18 22:08:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:08:21][DEBUG]: Not Suported yet
[2015-05-18 22:08:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:08:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 8B F0 00 00 5A 00 00 00 00 00 00 00 00 69 00 00 00| 
[2015-05-18 22:08:28][DEBUG]: The message is valid
[2015-05-18 22:08:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 139 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:08:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),139,90,0,0,9,6);					
[2015-05-18 22:08:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:08:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:08:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:08:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 8C 89 F2 00 00 00 01 21 00 00 53 BA 8D 94 79 00 00| 
[2015-05-18 22:08:31][DEBUG]: The message is valid
[2015-05-18 22:08:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 140 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280502 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:08:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280502,9,7);					
[2015-05-18 22:08:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:08:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:08:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:08:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:08:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:08:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:08:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 8D F0 00 00 5A 00 00 00 00 00 53 BA 8D 69 00 00 00| 
[2015-05-18 22:08:42][DEBUG]: The message is valid
[2015-05-18 22:08:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 141 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:08:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),141,90,0,0,9,6);					
[2015-05-18 22:08:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:08:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:08:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:08:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 8E F0 00 00 5A 00 00 00 00 00 53 BA 8D 69 00 00 00| 
[2015-05-18 22:08:56][DEBUG]: The message is valid
[2015-05-18 22:08:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 142 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:08:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),142,90,0,0,9,6);					
[2015-05-18 22:08:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:08:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:09:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:09:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 8F F0 00 00 5A 00 00 00 00 00 53 BA 8D 69 00 00 00| 
[2015-05-18 22:09:10][DEBUG]: The message is valid
[2015-05-18 22:09:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 143 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:09:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),143,90,0,0,9,6);					
[2015-05-18 22:09:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:09:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:09:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:09:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:09:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:09:21][DEBUG]: MYSQL = 1
[2015-05-18 22:09:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:09:21][DEBUG]: PORT = 3306
[2015-05-18 22:09:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:09:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:09:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:09:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:09:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:09:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:09:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:09:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:09:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:09:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:09:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:09:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:09:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:09:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:09:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:09:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:09:21][DEBUG]: MDB_ID = 
[2015-05-18 22:09:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:09:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:09:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:09:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:09:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:09:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:09:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:09:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:09:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:09:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:09:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:05:48 

[2015-05-18 22:09:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:09:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:09:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:09:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:09:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:09:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:09:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:09:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:09:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:09:21][DEBUG]: The message is valid
[2015-05-18 22:09:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:09:21][DEBUG]: Not Suported yet
[2015-05-18 22:09:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:09:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 90 F0 00 00 5A 00 00 00 00 00 53 BA 8D 79 00 00 00| 
[2015-05-18 22:09:24][DEBUG]: The message is valid
[2015-05-18 22:09:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 144 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:09:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),144,90,0,0,9,7);					
[2015-05-18 22:09:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:09:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:09:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:09:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 91 89 F2 00 00 00 01 21 00 00 53 BA 91 CC 79 00 00| 
[2015-05-18 22:09:31][DEBUG]: The message is valid
[2015-05-18 22:09:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 145 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280507 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:09:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280507,9,7);					
[2015-05-18 22:09:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:09:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:09:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:09:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:09:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:09:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:09:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 92 F0 00 00 5A 00 00 00 00 00 53 BA 91 69 00 00 00| 
[2015-05-18 22:09:38][DEBUG]: The message is valid
[2015-05-18 22:09:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 146 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:09:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),146,90,0,0,9,6);					
[2015-05-18 22:09:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:09:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:09:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:09:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 93 F0 00 00 5A 00 00 00 00 00 53 BA 91 69 00 00 00| 
[2015-05-18 22:09:52][DEBUG]: The message is valid
[2015-05-18 22:09:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 147 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:09:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),147,90,0,0,9,6);					
[2015-05-18 22:09:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:09:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:10:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:10:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 94 F0 00 00 5A 00 00 00 00 00 53 BA 91 69 00 00 00| 
[2015-05-18 22:10:06][DEBUG]: The message is valid
[2015-05-18 22:10:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 148 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:10:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),148,90,0,0,9,6);					
[2015-05-18 22:10:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:10:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:10:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:10:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 95 F0 00 00 5A 00 00 00 00 00 53 BA 91 79 00 00 00| 
[2015-05-18 22:10:20][DEBUG]: The message is valid
[2015-05-18 22:10:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 149 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:10:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),149,90,0,0,9,7);					
[2015-05-18 22:10:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:10:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:10:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:10:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:10:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:10:21][DEBUG]: MYSQL = 1
[2015-05-18 22:10:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:10:21][DEBUG]: PORT = 3306
[2015-05-18 22:10:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:10:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:10:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:10:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:10:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:10:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:10:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:10:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:10:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:10:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:10:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:10:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:10:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:10:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:10:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:10:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:10:21][DEBUG]: MDB_ID = 
[2015-05-18 22:10:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:10:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:10:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:10:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:10:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:10:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:10:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:10:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:10:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:10:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:10:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:05:48 

[2015-05-18 22:10:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:10:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:10:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:10:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:10:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:10:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:10:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:10:21][DEBUG]: Message lu : size : 4
[2015-05-18 22:10:21][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:10:21][DEBUG]: The message is valid
[2015-05-18 22:10:21][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:10:21][DEBUG]: Not Suported yet
[2015-05-18 22:10:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:10:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 96 89 F2 00 00 00 01 21 00 00 53 BA 96 04 79 00 00| 
[2015-05-18 22:10:31][DEBUG]: The message is valid
[2015-05-18 22:10:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 150 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280512 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:10:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280512,9,7);					
[2015-05-18 22:10:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:10:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:10:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:10:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:10:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:10:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:10:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 97 F0 00 00 5A 00 00 00 00 00 53 BA 96 69 00 00 00| 
[2015-05-18 22:10:34][DEBUG]: The message is valid
[2015-05-18 22:10:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 151 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:10:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),151,90,0,0,9,6);					
[2015-05-18 22:10:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:10:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:10:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:10:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 98 F0 00 00 5A 00 00 00 00 00 53 BA 96 79 00 00 00| 
[2015-05-18 22:10:48][DEBUG]: The message is valid
[2015-05-18 22:10:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 152 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:10:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),152,90,0,0,9,7);					
[2015-05-18 22:10:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:10:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:11:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 99 F0 00 00 5A 00 00 00 00 00 53 BA 96 79 00 00 00| 
[2015-05-18 22:11:02][DEBUG]: The message is valid
[2015-05-18 22:11:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 153 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),153,90,0,0,9,7);					
[2015-05-18 22:11:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:11:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:08][DEBUG]: Message lu : size : 9
[2015-05-18 22:11:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 9A 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:11:08][DEBUG]: The message is valid
[2015-05-18 22:11:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 154 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:11:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),154,21,21,'Heating','Demand',6);					
[2015-05-18 22:11:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:11:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:11:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 9B F0 00 00 5A 00 00 00 00 00 53 BA 96 79 00 00 00| 
[2015-05-18 22:11:16][DEBUG]: The message is valid
[2015-05-18 22:11:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 155 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),155,90,0,0,9,7);					
[2015-05-18 22:11:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:11:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:11:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:11:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:11:21][DEBUG]: MYSQL = 1
[2015-05-18 22:11:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:11:21][DEBUG]: PORT = 3306
[2015-05-18 22:11:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:11:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:11:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:11:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:11:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:11:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:11:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:11:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:11:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:11:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:11:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:11:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:11:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:11:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:11:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:11:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:11:21][DEBUG]: MDB_ID = 
[2015-05-18 22:11:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:11:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:11:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:11:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:11:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:11:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:11:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:11:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:11:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:11:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:11:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:11:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:11:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:11:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:11:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:11:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:11:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:11:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:11:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:11:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:11:22][DEBUG]: The message is valid
[2015-05-18 22:11:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:11:22][DEBUG]: Not Suported yet
[2015-05-18 22:11:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:11:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 9C F0 00 00 5A 00 00 00 00 00 53 BA 96 79 00 00 00| 
[2015-05-18 22:11:30][DEBUG]: The message is valid
[2015-05-18 22:11:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 156 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),156,90,0,0,9,7);					
[2015-05-18 22:11:30][DEBUG]: [EnOcean] Message received 

[2015-05-18 22:11:30][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 22:11:30][DEBUG]: [EnOcean] Data =  a5 00 00 7c 08 00 88 fb 73 00
[2015-05-18 22:11:30][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 4f 00
[2015-05-18 22:11:30][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 22:11:30][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 22:11:30][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 22:11:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:11:30][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 22:11:30][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 22:11:30][DEBUG]: [EnDevice] func = 02
[2015-05-18 22:11:30][DEBUG]: [EnDevice] type = 05
[2015-05-18 22:11:30][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 22:11:30][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 22:11:30][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 22:11:30][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 22:11:30][DEBUG]: [EnDevice] enable = 1
[2015-05-18 22:11:30][DEBUG]: [EnOcean] device: 30
[2015-05-18 22:11:30][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 22:11:30][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 22:11:30][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 22:11:30][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.55 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 18592112, NOW(), 20.55);
[2015-05-18 22:11:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:30][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.55 

[2015-05-18 22:11:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:11:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 9D 89 F2 00 00 00 01 21 00 00 53 BA 9A 3C 79 00 00| 
[2015-05-18 22:11:31][DEBUG]: The message is valid
[2015-05-18 22:11:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 157 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280516 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280516,9,7);					
[2015-05-18 22:11:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:11:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:11:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:11:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:11:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:11:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:11:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 9E F0 00 00 5A 00 00 00 00 00 53 BA 9A 79 00 00 00| 
[2015-05-18 22:11:44][DEBUG]: The message is valid
[2015-05-18 22:11:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 158 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),158,90,0,0,9,7);					
[2015-05-18 22:11:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:11:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:11:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:11:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 9F F0 00 00 5A 00 00 00 00 00 53 BA 9A 79 00 00 00| 
[2015-05-18 22:11:58][DEBUG]: The message is valid
[2015-05-18 22:11:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 159 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:11:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),159,90,0,0,9,7);					
[2015-05-18 22:11:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:11:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:12:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:12:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 A0 F0 00 00 5A 00 00 00 00 00 53 BA 9A 79 00 00 00| 
[2015-05-18 22:12:12][DEBUG]: The message is valid
[2015-05-18 22:12:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 160 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:12:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),160,90,0,0,9,7);					
[2015-05-18 22:12:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:12:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:12:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:12:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:12:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:12:21][DEBUG]: MYSQL = 1
[2015-05-18 22:12:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:12:21][DEBUG]: PORT = 3306
[2015-05-18 22:12:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:12:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:12:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:12:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:12:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:12:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:12:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:12:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:12:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:12:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:12:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:12:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:12:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:12:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:12:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:12:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:12:21][DEBUG]: MDB_ID = 
[2015-05-18 22:12:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:12:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:12:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:12:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:12:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:12:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:12:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:12:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:12:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:12:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:12:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:12:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:12:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:12:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:12:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:12:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:12:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:12:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:12:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:12:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:12:22][DEBUG]: The message is valid
[2015-05-18 22:12:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:12:22][DEBUG]: Not Suported yet
[2015-05-18 22:12:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:12:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 A1 F0 00 00 5A 00 00 00 00 00 53 BA 9A 79 00 00 00| 
[2015-05-18 22:12:26][DEBUG]: The message is valid
[2015-05-18 22:12:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 161 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:12:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),161,90,0,0,9,7);					
[2015-05-18 22:12:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:12:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:12:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:12:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A2 89 F2 00 00 00 01 21 00 00 53 BA 9E 74 79 00 00| 
[2015-05-18 22:12:31][DEBUG]: The message is valid
[2015-05-18 22:12:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 162 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280521 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:12:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280521,9,7);					
[2015-05-18 22:12:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:12:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:12:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:12:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:12:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:12:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:12:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 A3 F0 00 00 5A 00 00 00 00 00 53 BA 9E 79 00 00 00| 
[2015-05-18 22:12:40][DEBUG]: The message is valid
[2015-05-18 22:12:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 163 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:12:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),163,90,0,0,9,7);					
[2015-05-18 22:12:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:12:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:12:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:12:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 A4 F0 00 00 5A 00 00 00 00 00 53 BA 9E 79 00 00 00| 
[2015-05-18 22:12:54][DEBUG]: The message is valid
[2015-05-18 22:12:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 164 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:12:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),164,90,0,0,9,7);					
[2015-05-18 22:12:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:12:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:13:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:13:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 A5 F0 00 00 5A 00 00 00 00 00 53 BA 9E 79 00 00 00| 
[2015-05-18 22:13:08][DEBUG]: The message is valid
[2015-05-18 22:13:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 165 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:13:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),165,90,0,0,9,7);					
[2015-05-18 22:13:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:13:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:13:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:13:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:13:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:13:21][DEBUG]: MYSQL = 1
[2015-05-18 22:13:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:13:21][DEBUG]: PORT = 3306
[2015-05-18 22:13:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:13:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:13:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:13:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:13:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:13:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:13:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:13:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:13:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:13:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:13:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:13:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:13:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:13:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:13:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:13:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:13:21][DEBUG]: MDB_ID = 
[2015-05-18 22:13:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:13:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:13:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:13:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:13:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:13:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:13:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:13:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:13:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:13:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:13:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:13:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:13:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:13:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:13:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:13:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:13:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:13:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:13:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:13:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:13:22][DEBUG]: The message is valid
[2015-05-18 22:13:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:13:22][DEBUG]: Not Suported yet
[2015-05-18 22:13:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:13:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A6 89 F2 00 00 00 01 21 00 00 53 BA A2 AC 69 00 00| 
[2015-05-18 22:13:31][DEBUG]: The message is valid
[2015-05-18 22:13:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 166 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280526 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:13:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280526,9,6);					
[2015-05-18 22:13:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:13:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:13:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:13:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:13:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:13:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:13:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 A7 F0 00 00 5A 00 00 00 00 00 53 BA A2 79 00 00 00| 
[2015-05-18 22:13:36][DEBUG]: The message is valid
[2015-05-18 22:13:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 167 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:13:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),167,90,0,0,9,7);					
[2015-05-18 22:13:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:13:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:13:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:13:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 A8 F0 00 00 5A 00 00 00 00 00 53 BA A2 79 00 00 00| 
[2015-05-18 22:13:50][DEBUG]: The message is valid
[2015-05-18 22:13:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 168 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:13:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),168,90,0,0,9,7);					
[2015-05-18 22:13:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:13:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:13:52][DEBUG]: Message lu : size : 10
[2015-05-18 22:13:52][DEBUG]: Message lu : (20 first bytes): 0A 52 02 A9 91 01 00 79 4C 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:13:52][DEBUG]: The message is valid
[2015-05-18 22:13:52][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 169 
 id1: 91  
 id2: 01 
 Temperature: 12.10 
 Humidity: 76 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:13:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',12.10,76 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.10,home_data2=76;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),169,12.10,76,'wet',9,5);					
[2015-05-18 22:13:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 22:13:52][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 22:13:52][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 22:13:52][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.10", "Humidity" : "76" }}]
[2015-05-18 22:13:53][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:14:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:14:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 AA F0 00 00 5A 00 00 00 00 00 53 BA A2 79 00 00 00| 
[2015-05-18 22:14:04][DEBUG]: The message is valid
[2015-05-18 22:14:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 170 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:14:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),170,90,0,0,9,7);					
[2015-05-18 22:14:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:14:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:14:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:14:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 AB F0 00 00 5A 00 00 00 00 00 53 BA A2 79 00 00 00| 
[2015-05-18 22:14:18][DEBUG]: The message is valid
[2015-05-18 22:14:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 171 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:14:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),171,90,0,0,9,7);					
[2015-05-18 22:14:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:14:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:14:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:14:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:14:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:14:21][DEBUG]: MYSQL = 1
[2015-05-18 22:14:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:14:21][DEBUG]: PORT = 3306
[2015-05-18 22:14:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:14:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:14:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:14:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:14:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:14:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:14:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:14:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:14:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:14:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:14:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:14:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:14:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:14:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:14:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:14:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:14:21][DEBUG]: MDB_ID = 
[2015-05-18 22:14:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:14:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:14:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:14:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:14:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:14:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:14:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:14:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:14:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:14:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:14:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:14:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:14:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:14:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:14:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:14:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:14:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:14:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:14:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:14:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:14:22][DEBUG]: The message is valid
[2015-05-18 22:14:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:14:22][DEBUG]: Not Suported yet
[2015-05-18 22:14:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:14:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 AC 89 F2 00 00 00 01 21 00 00 53 BA A6 E4 69 00 00| 
[2015-05-18 22:14:31][DEBUG]: The message is valid
[2015-05-18 22:14:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 172 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280531 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:14:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280531,9,6);					
[2015-05-18 22:14:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:14:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:14:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:14:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:14:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:14:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:14:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 AD F0 00 00 5A 00 00 00 00 00 53 BA A6 79 00 00 00| 
[2015-05-18 22:14:32][DEBUG]: The message is valid
[2015-05-18 22:14:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 173 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:14:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),173,90,0,0,9,7);					
[2015-05-18 22:14:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:14:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:14:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:14:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 AE F0 00 00 5A 00 00 00 00 00 53 BA A6 79 00 00 00| 
[2015-05-18 22:14:46][DEBUG]: The message is valid
[2015-05-18 22:14:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 174 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:14:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),174,90,0,0,9,7);					
[2015-05-18 22:14:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:14:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:15:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:15:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 AF F0 00 00 5A 00 00 00 00 00 53 BA A6 79 00 00 00| 
[2015-05-18 22:15:00][DEBUG]: The message is valid
[2015-05-18 22:15:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 175 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),175,90,0,0,9,7);					
[2015-05-18 22:15:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:15:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:15:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:15:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 B0 F0 00 00 5A 00 00 00 00 00 53 BA A6 79 00 00 00| 
[2015-05-18 22:15:14][DEBUG]: The message is valid
[2015-05-18 22:15:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 176 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),176,90,0,0,9,7);					
[2015-05-18 22:15:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:15:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:15:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:15:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:15:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:15:21][DEBUG]: MYSQL = 1
[2015-05-18 22:15:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:15:21][DEBUG]: PORT = 3306
[2015-05-18 22:15:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:15:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:15:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:15:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:15:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:15:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:15:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:15:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:15:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:15:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:15:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:15:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:15:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:15:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:15:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:15:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:15:21][DEBUG]: MDB_ID = 
[2015-05-18 22:15:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:15:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:15:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:15:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:15:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:15:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:15:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:15:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:15:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:15:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:15:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:15:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:15:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:15:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:15:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:15:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:15:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:15:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:15:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:15:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:15:22][DEBUG]: The message is valid
[2015-05-18 22:15:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:15:22][DEBUG]: Not Suported yet
[2015-05-18 22:15:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:15:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 B1 F0 00 00 5A 00 00 00 00 00 53 BA A6 79 00 00 00| 
[2015-05-18 22:15:28][DEBUG]: The message is valid
[2015-05-18 22:15:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 177 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),177,90,0,0,9,7);					
[2015-05-18 22:15:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:15:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:15:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:15:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 B2 89 F2 00 00 00 01 21 00 00 53 BA AB 22 79 00 00| 
[2015-05-18 22:15:31][DEBUG]: The message is valid
[2015-05-18 22:15:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 178 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280536 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280536,9,7);					
[2015-05-18 22:15:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:15:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:15:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:15:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:15:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:15:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:15:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 B3 F0 00 00 5A 00 00 00 00 00 53 BA AB 79 00 00 00| 
[2015-05-18 22:15:42][DEBUG]: The message is valid
[2015-05-18 22:15:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 179 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),179,90,0,0,9,7);					
[2015-05-18 22:15:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:15:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:15:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:15:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 B4 F0 00 00 5A 00 00 00 00 00 53 BA AB 79 00 00 00| 
[2015-05-18 22:15:56][DEBUG]: The message is valid
[2015-05-18 22:15:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 180 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:15:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),180,90,0,0,9,7);					
[2015-05-18 22:15:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:15:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:16:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:16:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 B5 F0 00 00 5A 00 00 00 00 00 53 BA AB 79 00 00 00| 
[2015-05-18 22:16:10][DEBUG]: The message is valid
[2015-05-18 22:16:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 181 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:16:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),181,90,0,0,9,7);					
[2015-05-18 22:16:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:16:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:16:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:16:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:16:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:16:21][DEBUG]: MYSQL = 1
[2015-05-18 22:16:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:16:21][DEBUG]: PORT = 3306
[2015-05-18 22:16:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:16:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:16:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:16:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:16:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:16:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:16:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:16:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:16:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:16:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:16:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:16:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:16:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:16:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:16:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:16:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:16:21][DEBUG]: MDB_ID = 
[2015-05-18 22:16:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:16:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:16:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:16:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:16:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:16:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:16:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:16:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:16:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:16:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:16:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:11:08 

[2015-05-18 22:16:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:16:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:16:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:16:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:16:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:16:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:16:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:16:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:16:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:16:22][DEBUG]: The message is valid
[2015-05-18 22:16:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:16:22][DEBUG]: Not Suported yet
[2015-05-18 22:16:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:16:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 B6 F0 00 00 5A 00 00 00 00 00 53 BA AB 79 00 00 00| 
[2015-05-18 22:16:24][DEBUG]: The message is valid
[2015-05-18 22:16:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 182 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:16:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),182,90,0,0,9,7);					
[2015-05-18 22:16:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:16:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:16:28][DEBUG]: Message lu : size : 9
[2015-05-18 22:16:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 B7 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:16:28][DEBUG]: The message is valid
[2015-05-18 22:16:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 183 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:16:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),183,21,21,'Heating','Demand',6);					
[2015-05-18 22:16:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:16:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:16:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:16:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 B8 89 F2 00 00 00 01 21 00 00 53 BA AF 5A 69 00 00| 
[2015-05-18 22:16:31][DEBUG]: The message is valid
[2015-05-18 22:16:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 184 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280541 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:16:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280541,9,6);					
[2015-05-18 22:16:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:16:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:16:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:16:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:16:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:16:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:16:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 B9 F0 00 00 5A 00 00 00 00 00 53 BA AF 79 00 00 00| 
[2015-05-18 22:16:38][DEBUG]: The message is valid
[2015-05-18 22:16:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 185 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:16:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),185,90,0,0,9,7);					
[2015-05-18 22:16:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:16:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:16:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:16:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 BA F0 00 00 5A 00 00 00 00 00 53 BA AF 79 00 00 00| 
[2015-05-18 22:16:52][DEBUG]: The message is valid
[2015-05-18 22:16:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 186 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:16:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),186,90,0,0,9,7);					
[2015-05-18 22:16:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:16:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:17:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:17:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 BB F0 00 00 5A 00 00 00 00 00 53 BA AF 79 00 00 00| 
[2015-05-18 22:17:06][DEBUG]: The message is valid
[2015-05-18 22:17:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 187 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:17:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),187,90,0,0,9,7);					
[2015-05-18 22:17:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:17:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:17:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:17:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 BC F0 00 00 5A 00 00 00 00 00 53 BA AF 79 00 00 00| 
[2015-05-18 22:17:20][DEBUG]: The message is valid
[2015-05-18 22:17:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 188 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:17:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),188,90,0,0,9,7);					
[2015-05-18 22:17:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:17:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:17:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:17:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:17:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:17:21][DEBUG]: MYSQL = 1
[2015-05-18 22:17:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:17:21][DEBUG]: PORT = 3306
[2015-05-18 22:17:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:17:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:17:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:17:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:17:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:17:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:17:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:17:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:17:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:17:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:17:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:17:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:17:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:17:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:17:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:17:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:17:21][DEBUG]: MDB_ID = 
[2015-05-18 22:17:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:17:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:17:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:17:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:17:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:17:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:17:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:17:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:17:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:17:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:17:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:16:28 

[2015-05-18 22:17:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:17:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:17:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:17:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:17:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:17:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:17:21][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:17:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:17:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:17:22][DEBUG]: The message is valid
[2015-05-18 22:17:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:17:22][DEBUG]: Not Suported yet
[2015-05-18 22:17:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:17:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 BD 89 F2 00 00 00 01 21 00 00 53 BA B3 92 79 00 00| 
[2015-05-18 22:17:31][DEBUG]: The message is valid
[2015-05-18 22:17:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 189 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280545 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:17:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280545,9,7);					
[2015-05-18 22:17:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:17:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:17:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:17:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:17:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:17:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:17:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 BE F0 00 00 5A 00 00 00 00 00 53 BA B3 79 00 00 00| 
[2015-05-18 22:17:34][DEBUG]: The message is valid
[2015-05-18 22:17:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 190 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:17:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),190,90,0,0,9,7);					
[2015-05-18 22:17:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:17:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:17:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:17:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 BF F0 00 00 5A 00 00 00 00 00 53 BA B3 79 00 00 00| 
[2015-05-18 22:17:48][DEBUG]: The message is valid
[2015-05-18 22:17:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 191 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:17:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),191,90,0,0,9,7);					
[2015-05-18 22:17:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:17:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:17:56][DEBUG]: [EnOcean] Message received 

[2015-05-18 22:17:56][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 22:17:56][DEBUG]: [EnOcean] Data =  d5 08 00 8b 3c 6b 00
[2015-05-18 22:17:56][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 52 00
[2015-05-18 22:17:56][DEBUG]: [EnOcean] byte 1: d5
[2015-05-18 22:17:56][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 22:17:56][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='8B'AND id3='3C'AND id4='6B';
[2015-05-18 22:17:56][DEBUG]: [EnDevice] dc_id = 21 ,21
[2015-05-18 22:17:56][DEBUG]: [EnDevice] rorg = D5
[2015-05-18 22:17:56][DEBUG]: [EnDevice] func = 00
[2015-05-18 22:17:56][DEBUG]: [EnDevice] type = 01
[2015-05-18 22:17:56][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 22:17:56][DEBUG]: [EnDevice] id2 = 8B
[2015-05-18 22:17:56][DEBUG]: [EnDevice] id3 = 3C
[2015-05-18 22:17:56][DEBUG]: [EnDevice] id4 = 6B
[2015-05-18 22:17:56][DEBUG]: [EnDevice] enable = 1
[2015-05-18 22:17:56][DEBUG]: 

 [EnOcean] 
 Packetype: 1BS Telegram  
 id1: 00  
 id2: 8B 
 id3: 3C  
 id4: 6B 
 Learn Button: not pressed 
 Contact: open 

[2015-05-18 22:18:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:18:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 C0 F0 00 00 5A 00 00 00 00 00 53 BA B3 79 00 00 00| 
[2015-05-18 22:18:02][DEBUG]: The message is valid
[2015-05-18 22:18:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 192 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),192,90,0,0,9,7);					
[2015-05-18 22:18:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:18:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:18:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:18:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 C1 F0 00 00 5A 00 00 00 00 00 53 BA B3 79 00 00 00| 
[2015-05-18 22:18:16][DEBUG]: The message is valid
[2015-05-18 22:18:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 193 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),193,90,0,0,9,7);					
[2015-05-18 22:18:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:18:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:18:21][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:18:21][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:18:21][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:18:21][DEBUG]: MYSQL = 1
[2015-05-18 22:18:21][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:18:21][DEBUG]: PORT = 3306
[2015-05-18 22:18:21][DEBUG]: LOGIN = mydombox
[2015-05-18 22:18:21][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:18:21][DEBUG]: DATABASE = mydombox
[2015-05-18 22:18:21][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:18:21][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:18:21][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:18:21][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:18:21][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:18:21][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:18:21][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:18:21][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:18:21][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:18:21][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:18:21][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:18:21][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:18:21][DEBUG]: MDB_KEY = 
[2015-05-18 22:18:21][DEBUG]: MDB_ID = 
[2015-05-18 22:18:21][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:18:21][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:18:21][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:18:21][DEBUG]: --------------------------------------------------------

[2015-05-18 22:18:21][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:18:21][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:18:21][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:18:21][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:18:21][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:18:21][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:18:21][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:16:28 

[2015-05-18 22:18:21][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:18:21][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:18:21][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:18:21][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:18:21][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:18:21][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:18:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:18:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:18:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:18:22][DEBUG]: The message is valid
[2015-05-18 22:18:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:18:22][DEBUG]: Not Suported yet
[2015-05-18 22:18:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:18:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 C2 F0 00 00 5A 00 00 00 00 00 53 BA B3 79 00 00 00| 
[2015-05-18 22:18:30][DEBUG]: The message is valid
[2015-05-18 22:18:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 194 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),194,90,0,0,9,7);					
[2015-05-18 22:18:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:18:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:18:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:18:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 C3 89 F2 00 00 00 01 21 00 00 53 BA B7 CA 79 00 00| 
[2015-05-18 22:18:31][DEBUG]: The message is valid
[2015-05-18 22:18:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 195 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280550 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280550,9,7);					
[2015-05-18 22:18:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:18:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:18:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:18:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:18:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:18:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:18:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 C4 F0 00 00 5A 00 00 00 00 00 53 BA B7 79 00 00 00| 
[2015-05-18 22:18:44][DEBUG]: The message is valid
[2015-05-18 22:18:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 196 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),196,90,0,0,9,7);					
[2015-05-18 22:18:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:18:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:18:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:18:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 C5 F0 00 00 5A 00 00 00 00 00 53 BA B7 79 00 00 00| 
[2015-05-18 22:18:58][DEBUG]: The message is valid
[2015-05-18 22:18:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 197 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:18:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),197,90,0,0,9,7);					
[2015-05-18 22:18:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:18:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:19:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:19:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 C6 F0 00 00 5A 00 00 00 00 00 53 BA B7 79 00 00 00| 
[2015-05-18 22:19:12][DEBUG]: The message is valid
[2015-05-18 22:19:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 198 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:19:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),198,90,0,0,9,7);					
[2015-05-18 22:19:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:19:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:19:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:19:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:19:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:19:22][DEBUG]: MYSQL = 1
[2015-05-18 22:19:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:19:22][DEBUG]: PORT = 3306
[2015-05-18 22:19:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:19:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:19:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:19:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:19:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:19:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:19:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:19:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:19:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:19:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:19:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:19:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:19:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:19:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:19:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:19:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:19:22][DEBUG]: MDB_ID = 
[2015-05-18 22:19:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:19:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:19:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:19:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:19:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:19:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:19:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:19:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:19:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:19:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:19:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:16:28 

[2015-05-18 22:19:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:19:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:19:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:19:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:19:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:19:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:19:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:19:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:19:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:19:22][DEBUG]: The message is valid
[2015-05-18 22:19:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:19:22][DEBUG]: Not Suported yet
[2015-05-18 22:19:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:19:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 C7 F0 00 00 5A 00 00 00 00 00 53 BA B7 79 00 00 00| 
[2015-05-18 22:19:26][DEBUG]: The message is valid
[2015-05-18 22:19:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 199 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:19:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),199,90,0,0,9,7);					
[2015-05-18 22:19:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:19:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:19:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:19:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 C8 89 F2 00 00 00 01 21 00 00 53 BA BC 02 69 00 00| 
[2015-05-18 22:19:31][DEBUG]: The message is valid
[2015-05-18 22:19:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 200 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280555 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:19:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280555,9,6);					
[2015-05-18 22:19:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:19:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:19:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:19:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:19:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:19:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:19:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 C9 F0 00 00 5A 00 00 00 00 00 53 BA BC 79 00 00 00| 
[2015-05-18 22:19:40][DEBUG]: The message is valid
[2015-05-18 22:19:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 201 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:19:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),201,90,0,0,9,7);					
[2015-05-18 22:19:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:19:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:19:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:19:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 CA F0 00 00 5A 00 00 00 00 00 53 BA BC 79 00 00 00| 
[2015-05-18 22:19:54][DEBUG]: The message is valid
[2015-05-18 22:19:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 202 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:19:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),202,90,0,0,9,7);					
[2015-05-18 22:19:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:19:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:20:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:20:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 CB F0 00 00 5A 00 00 00 00 00 53 BA BC 79 00 00 00| 
[2015-05-18 22:20:08][DEBUG]: The message is valid
[2015-05-18 22:20:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 203 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:20:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),203,90,0,0,9,7);					
[2015-05-18 22:20:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:20:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:20:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:20:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:20:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:20:22][DEBUG]: MYSQL = 1
[2015-05-18 22:20:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:20:22][DEBUG]: PORT = 3306
[2015-05-18 22:20:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:20:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:20:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:20:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:20:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:20:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:20:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:20:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:20:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:20:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:20:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:20:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:20:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:20:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:20:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:20:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:20:22][DEBUG]: MDB_ID = 
[2015-05-18 22:20:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:20:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:20:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:20:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:20:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:20:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:20:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:20:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:20:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:20:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:20:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:16:28 

[2015-05-18 22:20:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:20:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:20:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:20:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:20:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:20:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:20:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:20:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 CC F0 00 00 5A 00 00 00 00 00 53 BA BC 79 00 00 00| 
[2015-05-18 22:20:22][DEBUG]: The message is valid
[2015-05-18 22:20:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 204 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:20:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),204,90,0,0,9,7);					
[2015-05-18 22:20:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:20:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:20:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:20:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:20:23][DEBUG]: The message is valid
[2015-05-18 22:20:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:20:23][DEBUG]: Not Suported yet
[2015-05-18 22:20:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:20:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 CD 89 F2 00 00 00 01 21 00 00 53 BA C0 3A 69 00 00| 
[2015-05-18 22:20:31][DEBUG]: The message is valid
[2015-05-18 22:20:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 205 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280560 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:20:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280560,9,6);					
[2015-05-18 22:20:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:20:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:20:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:20:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:20:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:20:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:20:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 CE F0 00 00 5A 00 00 00 00 00 53 BA C0 79 00 00 00| 
[2015-05-18 22:20:36][DEBUG]: The message is valid
[2015-05-18 22:20:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 206 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:20:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),206,90,0,0,9,7);					
[2015-05-18 22:20:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:20:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:20:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:20:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 CF F0 00 00 5A 00 00 00 00 00 53 BA C0 79 00 00 00| 
[2015-05-18 22:20:50][DEBUG]: The message is valid
[2015-05-18 22:20:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 207 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:20:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),207,90,0,0,9,7);					
[2015-05-18 22:20:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:20:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:21:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:21:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 D0 F0 00 00 5A 00 00 00 00 00 53 BA C0 79 00 00 00| 
[2015-05-18 22:21:04][DEBUG]: The message is valid
[2015-05-18 22:21:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 208 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:21:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),208,90,0,0,9,7);					
[2015-05-18 22:21:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:21:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:21:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:21:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 D1 F0 00 00 5A 00 00 00 00 00 53 BA C0 79 00 00 00| 
[2015-05-18 22:21:18][DEBUG]: The message is valid
[2015-05-18 22:21:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 209 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:21:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),209,90,0,0,9,7);					
[2015-05-18 22:21:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:21:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:21:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:21:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:21:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:21:22][DEBUG]: MYSQL = 1
[2015-05-18 22:21:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:21:22][DEBUG]: PORT = 3306
[2015-05-18 22:21:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:21:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:21:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:21:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:21:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:21:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:21:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:21:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:21:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:21:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:21:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:21:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:21:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:21:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:21:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:21:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:21:22][DEBUG]: MDB_ID = 
[2015-05-18 22:21:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:21:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:21:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:21:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:21:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:21:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:21:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:21:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:21:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:21:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:21:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:16:28 

[2015-05-18 22:21:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:21:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:21:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:21:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:21:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:21:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:21:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:21:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:21:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:21:22][DEBUG]: The message is valid
[2015-05-18 22:21:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:21:22][DEBUG]: Not Suported yet
[2015-05-18 22:21:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:21:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D2 89 F2 00 00 00 01 21 00 00 53 BA C4 72 69 00 00| 
[2015-05-18 22:21:31][DEBUG]: The message is valid
[2015-05-18 22:21:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 210 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280565 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:21:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280565,9,6);					
[2015-05-18 22:21:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:21:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:21:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:21:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:21:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:21:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:21:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 D3 F0 00 00 5A 00 00 00 00 00 53 BA C4 79 00 00 00| 
[2015-05-18 22:21:32][DEBUG]: The message is valid
[2015-05-18 22:21:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 211 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:21:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),211,90,0,0,9,7);					
[2015-05-18 22:21:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:21:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:21:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:21:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 D4 F0 00 00 5A 00 00 00 00 00 53 BA C4 79 00 00 00| 
[2015-05-18 22:21:46][DEBUG]: The message is valid
[2015-05-18 22:21:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 212 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:21:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),212,90,0,0,9,7);					
[2015-05-18 22:21:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:21:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:21:48][DEBUG]: Message lu : size : 9
[2015-05-18 22:21:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 D5 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:21:48][DEBUG]: The message is valid
[2015-05-18 22:21:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 213 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:21:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),213,21,21,'Heating','Demand',6);					
[2015-05-18 22:21:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:21:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:22:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:22:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 D6 F0 00 00 5A 00 00 00 00 00 53 BA C4 79 00 00 00| 
[2015-05-18 22:22:00][DEBUG]: The message is valid
[2015-05-18 22:22:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 214 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:22:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),214,90,0,0,9,7);					
[2015-05-18 22:22:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:22:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:22:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:22:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 D7 F0 00 00 5A 00 00 00 00 00 53 BA C4 79 00 00 00| 
[2015-05-18 22:22:14][DEBUG]: The message is valid
[2015-05-18 22:22:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 215 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:22:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),215,90,0,0,9,7);					
[2015-05-18 22:22:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:22:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:22:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:22:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:22:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:22:22][DEBUG]: MYSQL = 1
[2015-05-18 22:22:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:22:22][DEBUG]: PORT = 3306
[2015-05-18 22:22:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:22:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:22:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:22:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:22:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:22:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:22:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:22:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:22:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:22:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:22:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:22:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:22:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:22:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:22:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:22:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:22:22][DEBUG]: MDB_ID = 
[2015-05-18 22:22:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:22:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:22:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:22:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:22:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:22:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:22:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:22:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:22:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:22:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:22:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:21:48 

[2015-05-18 22:22:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:22:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:22:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:22:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:22:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:22:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:22:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:22:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:22:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:22:22][DEBUG]: The message is valid
[2015-05-18 22:22:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:22:22][DEBUG]: Not Suported yet
[2015-05-18 22:22:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:22:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 D8 F0 00 00 5A 00 00 00 00 00 53 BA C4 79 00 00 00| 
[2015-05-18 22:22:28][DEBUG]: The message is valid
[2015-05-18 22:22:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 216 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:22:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),216,90,0,0,9,7);					
[2015-05-18 22:22:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:22:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:22:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:22:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D9 89 F2 00 00 00 01 21 00 00 53 BA C8 B0 69 00 00| 
[2015-05-18 22:22:31][DEBUG]: The message is valid
[2015-05-18 22:22:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 217 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280570 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:22:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280570,9,6);					
[2015-05-18 22:22:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:22:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:22:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:22:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:22:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:22:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:22:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 DA F0 00 00 5A 00 00 00 00 00 53 BA C8 79 00 00 00| 
[2015-05-18 22:22:42][DEBUG]: The message is valid
[2015-05-18 22:22:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 218 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:22:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),218,90,0,0,9,7);					
[2015-05-18 22:22:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:22:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:22:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:22:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 DB F0 00 00 5A 00 00 00 00 00 53 BA C8 79 00 00 00| 
[2015-05-18 22:22:56][DEBUG]: The message is valid
[2015-05-18 22:22:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 219 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:22:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),219,90,0,0,9,7);					
[2015-05-18 22:22:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:22:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:23:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:23:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 DC F0 00 00 5A 00 00 00 00 00 53 BA C8 69 00 00 00| 
[2015-05-18 22:23:10][DEBUG]: The message is valid
[2015-05-18 22:23:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 220 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:23:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),220,90,0,0,9,6);					
[2015-05-18 22:23:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:23:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:23:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:23:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:23:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:23:22][DEBUG]: MYSQL = 1
[2015-05-18 22:23:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:23:22][DEBUG]: PORT = 3306
[2015-05-18 22:23:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:23:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:23:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:23:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:23:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:23:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:23:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:23:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:23:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:23:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:23:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:23:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:23:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:23:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:23:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:23:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:23:22][DEBUG]: MDB_ID = 
[2015-05-18 22:23:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:23:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:23:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:23:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:23:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:23:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:23:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:23:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:23:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:23:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:23:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:21:48 

[2015-05-18 22:23:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:23:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:23:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:23:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:23:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:23:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:23:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:23:22][DEBUG]: Message lu : size : 4
[2015-05-18 22:23:22][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:23:22][DEBUG]: The message is valid
[2015-05-18 22:23:22][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:23:22][DEBUG]: Not Suported yet
[2015-05-18 22:23:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:23:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 DD F0 00 00 5A 00 00 00 00 00 53 BA C8 79 00 00 00| 
[2015-05-18 22:23:24][DEBUG]: The message is valid
[2015-05-18 22:23:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 221 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:23:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),221,90,0,0,9,7);					
[2015-05-18 22:23:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:23:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:23:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:23:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 DE 89 F2 00 00 00 01 21 00 00 53 BA CC F4 69 00 00| 
[2015-05-18 22:23:31][DEBUG]: The message is valid
[2015-05-18 22:23:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 222 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280575 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:23:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280575,9,6);					
[2015-05-18 22:23:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:23:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:23:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:23:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:23:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:23:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:23:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 DF F0 00 00 5A 00 00 00 00 00 53 BA CC 79 00 00 00| 
[2015-05-18 22:23:38][DEBUG]: The message is valid
[2015-05-18 22:23:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 223 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:23:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),223,90,0,0,9,7);					
[2015-05-18 22:23:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:23:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:23:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:23:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 E0 F0 00 00 5A 00 00 00 00 00 53 BA CC 79 00 00 00| 
[2015-05-18 22:23:52][DEBUG]: The message is valid
[2015-05-18 22:23:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 224 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:23:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),224,90,0,0,9,7);					
[2015-05-18 22:23:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:23:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:24:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:24:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 E1 F0 00 00 5A 00 00 00 00 00 53 BA CC 79 00 00 00| 
[2015-05-18 22:24:06][DEBUG]: The message is valid
[2015-05-18 22:24:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 225 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:24:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),225,90,0,0,9,7);					
[2015-05-18 22:24:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:24:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:24:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:24:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 E2 F0 00 00 5A 00 00 00 00 00 53 BA CC 79 00 00 00| 
[2015-05-18 22:24:20][DEBUG]: The message is valid
[2015-05-18 22:24:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 226 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:24:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),226,90,0,0,9,7);					
[2015-05-18 22:24:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:24:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:24:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:24:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:24:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:24:22][DEBUG]: MYSQL = 1
[2015-05-18 22:24:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:24:22][DEBUG]: PORT = 3306
[2015-05-18 22:24:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:24:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:24:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:24:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:24:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:24:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:24:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:24:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:24:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:24:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:24:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:24:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:24:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:24:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:24:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:24:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:24:22][DEBUG]: MDB_ID = 
[2015-05-18 22:24:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:24:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:24:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:24:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:24:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:24:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:24:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:24:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:24:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:24:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:24:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:21:48 

[2015-05-18 22:24:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:24:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:24:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:24:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:24:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:24:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:24:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:24:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:24:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:24:23][DEBUG]: The message is valid
[2015-05-18 22:24:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:24:23][DEBUG]: Not Suported yet
[2015-05-18 22:24:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:24:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 E3 89 F2 00 00 00 01 21 00 00 53 BA D1 2C 69 00 00| 
[2015-05-18 22:24:31][DEBUG]: The message is valid
[2015-05-18 22:24:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 227 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280579 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:24:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280579,9,6);					
[2015-05-18 22:24:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:24:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:24:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:24:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:24:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:24:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:24:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 E4 F0 00 00 5A 00 00 00 00 00 53 BA D1 79 00 00 00| 
[2015-05-18 22:24:34][DEBUG]: The message is valid
[2015-05-18 22:24:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 228 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:24:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),228,90,0,0,9,7);					
[2015-05-18 22:24:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:24:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:24:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:24:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 E5 F0 00 00 5A 00 00 00 00 00 53 BA D1 79 00 00 00| 
[2015-05-18 22:24:48][DEBUG]: The message is valid
[2015-05-18 22:24:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 229 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:24:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),229,90,0,0,9,7);					
[2015-05-18 22:24:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:24:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:25:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:25:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 E6 F0 00 00 5A 00 00 00 00 00 53 BA D1 79 00 00 00| 
[2015-05-18 22:25:02][DEBUG]: The message is valid
[2015-05-18 22:25:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 230 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:25:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),230,90,0,0,9,7);					
[2015-05-18 22:25:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:25:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:25:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:25:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 E7 F0 00 00 5A 00 00 00 00 00 53 BA D1 79 00 00 00| 
[2015-05-18 22:25:16][DEBUG]: The message is valid
[2015-05-18 22:25:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 231 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:25:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),231,90,0,0,9,7);					
[2015-05-18 22:25:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:25:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:25:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:25:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:25:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:25:22][DEBUG]: MYSQL = 1
[2015-05-18 22:25:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:25:22][DEBUG]: PORT = 3306
[2015-05-18 22:25:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:25:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:25:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:25:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:25:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:25:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:25:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:25:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:25:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:25:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:25:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:25:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:25:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:25:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:25:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:25:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:25:22][DEBUG]: MDB_ID = 
[2015-05-18 22:25:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:25:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:25:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:25:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:25:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:25:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:25:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:25:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:25:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:25:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:25:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:21:48 

[2015-05-18 22:25:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:25:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:25:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:25:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:25:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:25:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:25:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:25:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:25:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:25:23][DEBUG]: The message is valid
[2015-05-18 22:25:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:25:23][DEBUG]: Not Suported yet
[2015-05-18 22:25:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:25:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 E8 F0 00 00 5A 00 00 00 00 00 53 BA D1 79 00 00 00| 
[2015-05-18 22:25:30][DEBUG]: The message is valid
[2015-05-18 22:25:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 232 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:25:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),232,90,0,0,9,7);					
[2015-05-18 22:25:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:25:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:25:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:25:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 E9 89 F2 00 00 00 01 21 00 00 53 BA D5 64 69 00 00| 
[2015-05-18 22:25:31][DEBUG]: The message is valid
[2015-05-18 22:25:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 233 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280584 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:25:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280584,9,6);					
[2015-05-18 22:25:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:25:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:25:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:25:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:25:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:25:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:25:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 EA F0 00 00 5A 00 00 00 00 00 53 BA D5 79 00 00 00| 
[2015-05-18 22:25:44][DEBUG]: The message is valid
[2015-05-18 22:25:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 234 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:25:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),234,90,0,0,9,7);					
[2015-05-18 22:25:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:25:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:25:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:25:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 EB F0 00 00 5A 00 00 00 00 00 53 BA D5 79 00 00 00| 
[2015-05-18 22:25:58][DEBUG]: The message is valid
[2015-05-18 22:25:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 235 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:25:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),235,90,0,0,9,7);					
[2015-05-18 22:25:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:25:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:26:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:26:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 EC F0 00 00 5A 00 00 00 00 00 53 BA D5 79 00 00 00| 
[2015-05-18 22:26:12][DEBUG]: The message is valid
[2015-05-18 22:26:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 236 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:26:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),236,90,0,0,9,7);					
[2015-05-18 22:26:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:26:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:26:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:26:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:26:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:26:22][DEBUG]: MYSQL = 1
[2015-05-18 22:26:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:26:22][DEBUG]: PORT = 3306
[2015-05-18 22:26:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:26:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:26:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:26:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:26:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:26:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:26:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:26:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:26:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:26:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:26:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:26:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:26:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:26:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:26:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:26:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:26:22][DEBUG]: MDB_ID = 
[2015-05-18 22:26:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:26:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:26:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:26:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:26:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:26:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:26:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:26:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:26:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:26:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:26:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:21:48 

[2015-05-18 22:26:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:26:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:26:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:26:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:26:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:26:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:26:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:26:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:26:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:26:23][DEBUG]: The message is valid
[2015-05-18 22:26:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:26:23][DEBUG]: Not Suported yet
[2015-05-18 22:26:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:26:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 ED F0 00 00 5A 00 00 00 00 00 53 BA D5 79 00 00 00| 
[2015-05-18 22:26:26][DEBUG]: The message is valid
[2015-05-18 22:26:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 237 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:26:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),237,90,0,0,9,7);					
[2015-05-18 22:26:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:26:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:26:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:26:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 EE 89 F2 00 00 00 01 21 00 00 53 BA D9 9C 69 00 00| 
[2015-05-18 22:26:31][DEBUG]: The message is valid
[2015-05-18 22:26:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 238 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280589 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:26:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280589,9,6);					
[2015-05-18 22:26:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:26:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:26:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:26:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:26:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:26:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:26:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 EF F0 00 00 5A 00 00 00 00 00 53 BA D9 79 00 00 00| 
[2015-05-18 22:26:40][DEBUG]: The message is valid
[2015-05-18 22:26:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 239 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:26:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),239,90,0,0,9,7);					
[2015-05-18 22:26:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:26:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:26:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:26:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 F0 F0 00 00 5A 00 00 00 00 00 53 BA D9 79 00 00 00| 
[2015-05-18 22:26:54][DEBUG]: The message is valid
[2015-05-18 22:26:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 240 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:26:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),240,90,0,0,9,7);					
[2015-05-18 22:26:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:26:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:27:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:27:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 F1 F0 00 00 5A 00 00 00 00 00 53 BA D9 79 00 00 00| 
[2015-05-18 22:27:08][DEBUG]: The message is valid
[2015-05-18 22:27:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 241 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:27:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),241,90,0,0,9,7);					
[2015-05-18 22:27:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:27:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:27:08][DEBUG]: Message lu : size : 9
[2015-05-18 22:27:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 F2 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:27:08][DEBUG]: The message is valid
[2015-05-18 22:27:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 242 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:27:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),242,21,21,'Heating','Demand',6);					
[2015-05-18 22:27:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:27:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:27:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:27:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 F3 F0 00 00 5A 00 00 00 00 00 53 BA D9 79 00 00 00| 
[2015-05-18 22:27:22][DEBUG]: The message is valid
[2015-05-18 22:27:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 243 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:27:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),243,90,0,0,9,7);					
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:27:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:27:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:27:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:27:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:27:22][DEBUG]: MYSQL = 1
[2015-05-18 22:27:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:27:22][DEBUG]: PORT = 3306
[2015-05-18 22:27:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:27:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:27:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:27:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:27:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:27:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:27:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:27:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:27:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:27:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:27:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:27:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:27:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:27:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:27:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:27:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:27:22][DEBUG]: MDB_ID = 
[2015-05-18 22:27:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:27:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:27:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:27:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:27:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:27:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:27:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:27:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:27:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:27:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:27:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:27:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:27:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:27:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:27:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:27:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:27:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:27:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:27:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:27:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:27:23][DEBUG]: The message is valid
[2015-05-18 22:27:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:27:23][DEBUG]: Not Suported yet
[2015-05-18 22:27:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:27:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F4 89 F2 00 00 00 01 31 00 00 53 BA DD E0 69 00 00| 
[2015-05-18 22:27:31][DEBUG]: The message is valid
[2015-05-18 22:27:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 244 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280594 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:27:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280594,9,6);					
[2015-05-18 22:27:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:27:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:27:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:27:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:27:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:27:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:27:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 F5 F0 00 00 5A 00 00 00 00 00 53 BA DD 79 00 00 00| 
[2015-05-18 22:27:36][DEBUG]: The message is valid
[2015-05-18 22:27:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 245 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:27:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),245,90,0,0,9,7);					
[2015-05-18 22:27:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:27:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:27:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:27:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 F6 F0 00 00 5A 00 00 00 00 00 53 BA DD 79 00 00 00| 
[2015-05-18 22:27:50][DEBUG]: The message is valid
[2015-05-18 22:27:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 246 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:27:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),246,90,0,0,9,7);					
[2015-05-18 22:27:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:27:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:28:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:28:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 F7 F0 00 00 5A 00 00 00 00 00 53 BA DD 79 00 00 00| 
[2015-05-18 22:28:04][DEBUG]: The message is valid
[2015-05-18 22:28:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 247 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:28:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),247,90,0,0,9,7);					
[2015-05-18 22:28:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:28:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:28:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:28:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 F8 F0 00 00 5A 00 00 00 00 00 53 BA DD 79 00 00 00| 
[2015-05-18 22:28:18][DEBUG]: The message is valid
[2015-05-18 22:28:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 248 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:28:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),248,90,0,0,9,7);					
[2015-05-18 22:28:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:28:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:28:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:28:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:28:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:28:22][DEBUG]: MYSQL = 1
[2015-05-18 22:28:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:28:22][DEBUG]: PORT = 3306
[2015-05-18 22:28:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:28:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:28:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:28:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:28:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:28:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:28:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:28:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:28:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:28:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:28:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:28:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:28:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:28:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:28:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:28:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:28:22][DEBUG]: MDB_ID = 
[2015-05-18 22:28:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:28:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:28:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:28:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:28:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:28:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:28:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:28:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:28:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:28:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:28:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:28:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:28:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:28:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:28:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:28:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:28:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:28:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:28:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:28:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:28:23][DEBUG]: The message is valid
[2015-05-18 22:28:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:28:23][DEBUG]: Not Suported yet
[2015-05-18 22:28:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:28:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F9 89 F2 00 00 00 01 21 00 00 53 BA E2 24 69 00 00| 
[2015-05-18 22:28:31][DEBUG]: The message is valid
[2015-05-18 22:28:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 249 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280599 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:28:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280599,9,6);					
[2015-05-18 22:28:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:28:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:28:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:28:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:28:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:28:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:28:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 FA F0 00 00 5A 00 00 00 00 00 53 BA E2 79 00 00 00| 
[2015-05-18 22:28:32][DEBUG]: The message is valid
[2015-05-18 22:28:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 250 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:28:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),250,90,0,0,9,7);					
[2015-05-18 22:28:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:28:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:28:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:28:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 FB F0 00 00 5A 00 00 00 00 00 53 BA E2 79 00 00 00| 
[2015-05-18 22:28:46][DEBUG]: The message is valid
[2015-05-18 22:28:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 251 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:28:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),251,90,0,0,9,7);					
[2015-05-18 22:28:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:28:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:29:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:29:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 FC F0 00 00 5A 00 00 00 00 00 53 BA E2 79 00 00 00| 
[2015-05-18 22:29:00][DEBUG]: The message is valid
[2015-05-18 22:29:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 252 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:29:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),252,90,0,0,9,7);					
[2015-05-18 22:29:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:29:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:29:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:29:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 FD F0 00 00 5A 00 00 00 00 00 53 BA E2 79 00 00 00| 
[2015-05-18 22:29:14][DEBUG]: The message is valid
[2015-05-18 22:29:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 253 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:29:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),253,90,0,0,9,7);					
[2015-05-18 22:29:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:29:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:29:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:29:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:29:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:29:22][DEBUG]: MYSQL = 1
[2015-05-18 22:29:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:29:22][DEBUG]: PORT = 3306
[2015-05-18 22:29:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:29:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:29:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:29:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:29:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:29:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:29:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:29:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:29:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:29:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:29:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:29:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:29:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:29:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:29:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:29:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:29:22][DEBUG]: MDB_ID = 
[2015-05-18 22:29:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:29:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:29:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:29:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:29:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:29:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:29:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:29:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:29:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:29:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:29:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:29:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:29:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:29:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:29:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:29:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:29:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:29:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:29:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:29:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:29:23][DEBUG]: The message is valid
[2015-05-18 22:29:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:29:23][DEBUG]: Not Suported yet
[2015-05-18 22:29:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:29:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 FE F0 00 00 5A 00 00 00 00 00 53 BA E2 79 00 00 00| 
[2015-05-18 22:29:28][DEBUG]: The message is valid
[2015-05-18 22:29:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 254 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:29:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),254,90,0,0,9,7);					
[2015-05-18 22:29:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:29:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:29:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:29:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 FF 89 F2 00 00 00 01 21 00 00 53 BA E6 62 69 00 00| 
[2015-05-18 22:29:31][DEBUG]: The message is valid
[2015-05-18 22:29:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 255 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280604 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:29:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280604,9,6);					
[2015-05-18 22:29:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:29:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:29:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:29:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:29:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:29:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:29:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 00 F0 00 00 5A 00 00 00 00 00 53 BA E6 79 00 00 00| 
[2015-05-18 22:29:42][DEBUG]: The message is valid
[2015-05-18 22:29:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 0 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:29:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),0,90,0,0,9,7);					
[2015-05-18 22:29:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:29:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:29:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:29:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 01 F0 00 00 5A 00 00 00 00 00 53 BA E6 79 00 00 00| 
[2015-05-18 22:29:56][DEBUG]: The message is valid
[2015-05-18 22:29:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 1 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:29:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),1,90,0,0,9,7);					
[2015-05-18 22:29:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:29:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:30:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:30:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 02 F0 00 00 5A 00 00 00 00 00 53 BA E6 79 00 00 00| 
[2015-05-18 22:30:10][DEBUG]: The message is valid
[2015-05-18 22:30:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 2 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:30:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),2,90,0,0,9,7);					
[2015-05-18 22:30:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:30:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:30:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:30:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:30:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:30:22][DEBUG]: MYSQL = 1
[2015-05-18 22:30:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:30:22][DEBUG]: PORT = 3306
[2015-05-18 22:30:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:30:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:30:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:30:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:30:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:30:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:30:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:30:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:30:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:30:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:30:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:30:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:30:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:30:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:30:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:30:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:30:22][DEBUG]: MDB_ID = 
[2015-05-18 22:30:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:30:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:30:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:30:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:30:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:30:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:30:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:30:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:30:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:30:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:30:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:30:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:30:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:30:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:30:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:30:22][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:30:22][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:30:22][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:30:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:30:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:30:23][DEBUG]: The message is valid
[2015-05-18 22:30:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:30:23][DEBUG]: Not Suported yet
[2015-05-18 22:30:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:30:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 03 F0 00 00 5A 00 00 00 00 00 53 BA E6 79 00 00 00| 
[2015-05-18 22:30:24][DEBUG]: The message is valid
[2015-05-18 22:30:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 3 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:30:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),3,90,0,0,9,7);					
[2015-05-18 22:30:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:30:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:30:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:30:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 04 89 F2 00 00 00 01 21 00 00 53 BA EA AC 69 00 00| 
[2015-05-18 22:30:31][DEBUG]: The message is valid
[2015-05-18 22:30:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 4 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280609 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:30:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280609,9,6);					
[2015-05-18 22:30:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:30:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:30:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:30:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:30:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:30:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:30:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 05 F0 00 00 5A 00 00 00 00 00 53 BA EA 79 00 00 00| 
[2015-05-18 22:30:38][DEBUG]: The message is valid
[2015-05-18 22:30:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 5 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:30:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),5,90,0,0,9,7);					
[2015-05-18 22:30:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:30:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:30:39][DEBUG]: Message lu : size : 10
[2015-05-18 22:30:39][DEBUG]: Message lu : (20 first bytes): 0A 52 02 06 91 01 00 78 4F 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:30:39][DEBUG]: The message is valid
[2015-05-18 22:30:39][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 6 
 id1: 91  
 id2: 01 
 Temperature: 12.00 
 Humidity: 79 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:30:39][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',12.00,79 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=79;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),6,12.00,79,'wet',9,5);					
[2015-05-18 22:30:39][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 22:30:39][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 22:30:39][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 22:30:39][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "79" }}]
[2015-05-18 22:30:40][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:30:48][DEBUG]: [EnOcean] Message received 

[2015-05-18 22:30:48][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 22:30:48][DEBUG]: [EnOcean] Data =  a5 00 00 7c 08 00 88 fb 73 00
[2015-05-18 22:30:48][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 4c 00
[2015-05-18 22:30:48][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 22:30:48][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 22:30:48][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 22:30:48][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 22:30:48][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 22:30:48][DEBUG]: [EnDevice] func = 02
[2015-05-18 22:30:48][DEBUG]: [EnDevice] type = 05
[2015-05-18 22:30:48][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 22:30:48][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 22:30:48][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 22:30:48][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 22:30:48][DEBUG]: [EnDevice] enable = 1
[2015-05-18 22:30:48][DEBUG]: [EnOcean] device: 30
[2015-05-18 22:30:48][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 22:30:48][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 22:30:48][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 22:30:48][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.55 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 18593528, NOW(), 20.55);
[2015-05-18 22:30:49][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.55 

[2015-05-18 22:30:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:30:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 07 F0 00 00 5A 00 00 00 00 00 53 BA EA 79 00 00 00| 
[2015-05-18 22:30:52][DEBUG]: The message is valid
[2015-05-18 22:30:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 7 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:30:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),7,90,0,0,9,7);					
[2015-05-18 22:30:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:30:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:31:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:31:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 08 F0 00 00 5A 00 00 00 00 00 53 BA EA 79 00 00 00| 
[2015-05-18 22:31:06][DEBUG]: The message is valid
[2015-05-18 22:31:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 8 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:31:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),8,90,0,0,9,7);					
[2015-05-18 22:31:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:31:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:31:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:31:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 09 F0 00 00 5A 00 00 00 00 00 53 BA EA 79 00 00 00| 
[2015-05-18 22:31:20][DEBUG]: The message is valid
[2015-05-18 22:31:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 9 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:31:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),9,90,0,0,9,7);					
[2015-05-18 22:31:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:31:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:31:22][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:31:22][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:31:22][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:31:22][DEBUG]: MYSQL = 1
[2015-05-18 22:31:22][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:31:22][DEBUG]: PORT = 3306
[2015-05-18 22:31:22][DEBUG]: LOGIN = mydombox
[2015-05-18 22:31:22][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:31:22][DEBUG]: DATABASE = mydombox
[2015-05-18 22:31:22][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:31:22][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:31:22][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:31:22][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:31:22][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:31:22][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:31:22][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:31:22][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:31:22][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:31:22][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:31:22][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:31:22][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:31:22][DEBUG]: MDB_KEY = 
[2015-05-18 22:31:22][DEBUG]: MDB_ID = 
[2015-05-18 22:31:22][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:31:22][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:31:22][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:31:22][DEBUG]: --------------------------------------------------------

[2015-05-18 22:31:22][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:31:22][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:31:22][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:31:22][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:31:22][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:31:22][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:31:22][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:31:22][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:31:22][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:31:22][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:31:22][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:31:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:31:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:31:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:31:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:31:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:31:23][DEBUG]: The message is valid
[2015-05-18 22:31:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:31:23][DEBUG]: Not Suported yet
[2015-05-18 22:31:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:31:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 0A 89 F2 00 00 00 01 21 00 00 53 BA EE E4 69 00 00| 
[2015-05-18 22:31:31][DEBUG]: The message is valid
[2015-05-18 22:31:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 10 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280613 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:31:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280613,9,6);					
[2015-05-18 22:31:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:31:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:31:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:31:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:31:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:31:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:31:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 0B F0 00 00 5A 00 00 00 00 00 53 BA EE 79 00 00 00| 
[2015-05-18 22:31:34][DEBUG]: The message is valid
[2015-05-18 22:31:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 11 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:31:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),11,90,0,0,9,7);					
[2015-05-18 22:31:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:31:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:31:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:31:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 0C F0 00 00 5A 00 00 00 00 00 53 BA EE 79 00 00 00| 
[2015-05-18 22:31:48][DEBUG]: The message is valid
[2015-05-18 22:31:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 12 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:31:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),12,90,0,0,9,7);					
[2015-05-18 22:31:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:31:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:32:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 0D F0 00 00 5A 00 00 00 00 00 53 BA EE 79 00 00 00| 
[2015-05-18 22:32:02][DEBUG]: The message is valid
[2015-05-18 22:32:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 13 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:32:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),13,90,0,0,9,7);					
[2015-05-18 22:32:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:32:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:32:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 0E F0 00 00 5A 00 00 00 00 00 53 BA EE 79 00 00 00| 
[2015-05-18 22:32:16][DEBUG]: The message is valid
[2015-05-18 22:32:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 14 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:32:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),14,90,0,0,9,7);					
[2015-05-18 22:32:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:32:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:32:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:32:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:32:23][DEBUG]: MYSQL = 1
[2015-05-18 22:32:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:32:23][DEBUG]: PORT = 3306
[2015-05-18 22:32:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:32:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:32:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:32:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:32:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:32:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:32:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:32:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:32:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:32:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:32:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:32:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:32:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:32:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:32:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:32:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:32:23][DEBUG]: MDB_ID = 
[2015-05-18 22:32:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:32:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:32:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:32:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:32:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:32:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:32:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:32:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:32:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:32:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:32:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:27:08 

[2015-05-18 22:32:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:32:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:32:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:32:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:32:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:32:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:32:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:32:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:32:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:32:23][DEBUG]: The message is valid
[2015-05-18 22:32:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:32:23][DEBUG]: Not Suported yet
[2015-05-18 22:32:28][DEBUG]: Message lu : size : 9
[2015-05-18 22:32:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 0F 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:32:28][DEBUG]: The message is valid
[2015-05-18 22:32:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 15 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:32:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),15,21,21,'Heating','Demand',6);					
[2015-05-18 22:32:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:32:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:32:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 10 F0 00 00 5A 00 00 00 00 00 53 BA EE 79 00 00 00| 
[2015-05-18 22:32:30][DEBUG]: The message is valid
[2015-05-18 22:32:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 16 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:32:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),16,90,0,0,9,7);					
[2015-05-18 22:32:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:32:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:32:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 11 89 F2 00 00 00 01 21 00 00 53 BA F3 28 69 00 00| 
[2015-05-18 22:32:31][DEBUG]: The message is valid
[2015-05-18 22:32:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 17 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280618 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:32:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280618,9,6);					
[2015-05-18 22:32:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:32:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:32:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:32:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:32:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:32:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:32:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 12 F0 00 00 5A 00 00 00 00 00 53 BA F3 79 00 00 00| 
[2015-05-18 22:32:44][DEBUG]: The message is valid
[2015-05-18 22:32:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 18 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:32:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),18,90,0,0,9,7);					
[2015-05-18 22:32:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:32:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:32:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:32:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 13 F0 00 00 5A 00 00 00 00 00 53 BA F3 79 00 00 00| 
[2015-05-18 22:32:58][DEBUG]: The message is valid
[2015-05-18 22:32:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 19 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:32:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),19,90,0,0,9,7);					
[2015-05-18 22:32:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:32:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:33:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:33:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 14 F0 00 00 5A 00 00 00 00 00 53 BA F3 79 00 00 00| 
[2015-05-18 22:33:12][DEBUG]: The message is valid
[2015-05-18 22:33:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 20 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:33:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),20,90,0,0,9,7);					
[2015-05-18 22:33:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:33:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:33:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:33:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:33:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:33:23][DEBUG]: MYSQL = 1
[2015-05-18 22:33:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:33:23][DEBUG]: PORT = 3306
[2015-05-18 22:33:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:33:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:33:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:33:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:33:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:33:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:33:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:33:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:33:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:33:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:33:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:33:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:33:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:33:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:33:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:33:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:33:23][DEBUG]: MDB_ID = 
[2015-05-18 22:33:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:33:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:33:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:33:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:33:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:33:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:33:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:33:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:33:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:33:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:33:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:32:28 

[2015-05-18 22:33:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:33:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:33:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:33:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:33:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:33:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:33:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:33:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:33:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:33:23][DEBUG]: The message is valid
[2015-05-18 22:33:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:33:23][DEBUG]: Not Suported yet
[2015-05-18 22:33:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:33:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 15 F0 00 00 5A 00 00 00 00 00 53 BA F3 79 00 00 00| 
[2015-05-18 22:33:26][DEBUG]: The message is valid
[2015-05-18 22:33:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 21 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:33:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),21,90,0,0,9,7);					
[2015-05-18 22:33:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:33:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:33:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:33:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 16 89 F2 00 00 00 01 21 00 00 53 BA F7 60 69 00 00| 
[2015-05-18 22:33:31][DEBUG]: The message is valid
[2015-05-18 22:33:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 22 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280623 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:33:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280623,9,6);					
[2015-05-18 22:33:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:33:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:33:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:33:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:33:37][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:33:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:33:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 17 F0 00 00 5A 00 00 00 00 00 53 BA F7 79 00 00 00| 
[2015-05-18 22:33:40][DEBUG]: The message is valid
[2015-05-18 22:33:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 23 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:33:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),23,90,0,0,9,7);					
[2015-05-18 22:33:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:33:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:33:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:33:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 18 F0 00 00 5A 00 00 00 00 00 53 BA F7 79 00 00 00| 
[2015-05-18 22:33:54][DEBUG]: The message is valid
[2015-05-18 22:33:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 24 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:33:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),24,90,0,0,9,7);					
[2015-05-18 22:33:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:33:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:34:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:34:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 19 F0 00 00 5A 00 00 00 00 00 53 BA F7 79 00 00 00| 
[2015-05-18 22:34:08][DEBUG]: The message is valid
[2015-05-18 22:34:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 25 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:34:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),25,90,0,0,9,7);					
[2015-05-18 22:34:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:34:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:34:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:34:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 1A F0 00 00 5A 00 00 00 00 00 53 BA F7 79 00 00 00| 
[2015-05-18 22:34:22][DEBUG]: The message is valid
[2015-05-18 22:34:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 26 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:34:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),26,90,0,0,9,7);					
[2015-05-18 22:34:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:34:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:34:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:34:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:34:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:34:23][DEBUG]: MYSQL = 1
[2015-05-18 22:34:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:34:23][DEBUG]: PORT = 3306
[2015-05-18 22:34:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:34:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:34:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:34:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:34:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:34:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:34:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:34:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:34:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:34:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:34:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:34:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:34:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:34:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:34:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:34:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:34:23][DEBUG]: MDB_ID = 
[2015-05-18 22:34:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:34:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:34:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:34:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:34:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:34:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:34:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:34:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:34:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:34:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:34:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:32:28 

[2015-05-18 22:34:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:34:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:34:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:34:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:34:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:34:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:34:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:34:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:34:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:34:23][DEBUG]: The message is valid
[2015-05-18 22:34:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:34:23][DEBUG]: Not Suported yet
[2015-05-18 22:34:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:34:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 1B 89 F2 00 00 00 01 21 00 00 53 BA FB 9E 69 00 00| 
[2015-05-18 22:34:31][DEBUG]: The message is valid
[2015-05-18 22:34:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 27 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280628 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:34:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280628,9,6);					
[2015-05-18 22:34:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:34:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:34:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:34:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:34:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:34:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:34:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 1C F0 00 00 5A 00 00 00 00 00 53 BA FB 79 00 00 00| 
[2015-05-18 22:34:36][DEBUG]: The message is valid
[2015-05-18 22:34:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 28 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:34:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),28,90,0,0,9,7);					
[2015-05-18 22:34:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:34:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:34:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:34:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 1D F0 00 00 5A 00 00 00 00 00 53 BA FB 79 00 00 00| 
[2015-05-18 22:34:50][DEBUG]: The message is valid
[2015-05-18 22:34:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 29 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:34:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),29,90,0,0,9,7);					
[2015-05-18 22:34:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:34:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:35:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:35:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 1E F0 00 00 5A 00 00 00 00 00 53 BA FB 79 00 00 00| 
[2015-05-18 22:35:04][DEBUG]: The message is valid
[2015-05-18 22:35:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 30 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:35:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),30,90,0,0,9,7);					
[2015-05-18 22:35:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:35:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:35:04][DEBUG]: Message lu : size : 10
[2015-05-18 22:35:04][DEBUG]: Message lu : (20 first bytes): 0A 52 02 1F 91 01 00 78 4F 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:35:04][DEBUG]: The message is valid
[2015-05-18 22:35:04][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 31 
 id1: 91  
 id2: 01 
 Temperature: 12.00 
 Humidity: 79 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:35:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',12.00,79 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=12.00,home_data2=79;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),31,12.00,79,'wet',9,5);					
[2015-05-18 22:35:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 22:35:04][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 22:35:04][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 22:35:04][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "12.00", "Humidity" : "79" }}]
[2015-05-18 22:35:05][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:35:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:35:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 20 F0 00 00 5A 00 00 00 00 00 53 BA FB 69 00 00 00| 
[2015-05-18 22:35:18][DEBUG]: The message is valid
[2015-05-18 22:35:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 32 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:35:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),32,90,0,0,9,6);					
[2015-05-18 22:35:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:35:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:35:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:35:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:35:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:35:23][DEBUG]: MYSQL = 1
[2015-05-18 22:35:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:35:23][DEBUG]: PORT = 3306
[2015-05-18 22:35:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:35:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:35:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:35:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:35:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:35:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:35:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:35:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:35:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:35:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:35:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:35:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:35:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:35:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:35:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:35:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:35:23][DEBUG]: MDB_ID = 
[2015-05-18 22:35:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:35:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:35:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:35:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:35:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:35:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:35:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:35:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:35:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:35:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:35:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:32:28 

[2015-05-18 22:35:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:35:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:35:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:35:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:35:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:35:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:35:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:35:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:35:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:35:23][DEBUG]: The message is valid
[2015-05-18 22:35:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:35:23][DEBUG]: Not Suported yet
[2015-05-18 22:35:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:35:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 21 89 F2 00 00 00 01 21 00 00 53 BA FF DC 69 00 00| 
[2015-05-18 22:35:31][DEBUG]: The message is valid
[2015-05-18 22:35:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 33 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280633 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:35:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280633,9,6);					
[2015-05-18 22:35:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:35:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:35:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:35:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:35:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:35:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:35:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 22 F0 00 00 5A 00 00 00 00 00 53 BA FF 69 00 00 00| 
[2015-05-18 22:35:32][DEBUG]: The message is valid
[2015-05-18 22:35:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 34 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:35:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),34,90,0,0,9,6);					
[2015-05-18 22:35:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:35:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:35:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:35:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 23 F0 00 00 5A 00 00 00 00 00 53 BA FF 69 00 00 00| 
[2015-05-18 22:35:46][DEBUG]: The message is valid
[2015-05-18 22:35:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 35 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:35:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),35,90,0,0,9,6);					
[2015-05-18 22:35:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:35:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:36:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:36:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 24 F0 00 00 5A 00 00 00 00 00 53 BA FF 69 00 00 00| 
[2015-05-18 22:36:00][DEBUG]: The message is valid
[2015-05-18 22:36:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 36 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),36,90,0,0,9,6);					
[2015-05-18 22:36:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:36:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:36:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:36:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 25 F0 00 00 5A 00 00 00 00 00 53 BA FF 69 00 00 00| 
[2015-05-18 22:36:14][DEBUG]: The message is valid
[2015-05-18 22:36:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 37 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),37,90,0,0,9,6);					
[2015-05-18 22:36:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:36:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:36:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:36:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:36:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:36:23][DEBUG]: MYSQL = 1
[2015-05-18 22:36:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:36:23][DEBUG]: PORT = 3306
[2015-05-18 22:36:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:36:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:36:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:36:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:36:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:36:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:36:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:36:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:36:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:36:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:36:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:36:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:36:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:36:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:36:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:36:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:36:23][DEBUG]: MDB_ID = 
[2015-05-18 22:36:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:36:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:36:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:36:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:36:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:36:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:36:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:36:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:36:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:36:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:36:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:32:28 

[2015-05-18 22:36:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:36:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:36:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:36:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:36:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:36:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:36:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:36:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:36:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:36:23][DEBUG]: The message is valid
[2015-05-18 22:36:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:36:23][DEBUG]: Not Suported yet
[2015-05-18 22:36:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:36:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 26 F0 00 00 5A 00 00 00 00 00 53 BA FF 69 00 00 00| 
[2015-05-18 22:36:28][DEBUG]: The message is valid
[2015-05-18 22:36:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 38 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),38,90,0,0,9,6);					
[2015-05-18 22:36:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:36:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:36:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:36:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 27 89 F2 00 00 00 01 31 00 00 53 BB 04 26 69 00 00| 
[2015-05-18 22:36:31][DEBUG]: The message is valid
[2015-05-18 22:36:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 39 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280638 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280638,9,6);					
[2015-05-18 22:36:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:36:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:36:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:36:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:36:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:36:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:36:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 28 F0 00 00 5A 00 00 00 00 00 53 BB 04 69 00 00 00| 
[2015-05-18 22:36:42][DEBUG]: The message is valid
[2015-05-18 22:36:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 40 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),40,90,0,0,9,6);					
[2015-05-18 22:36:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:36:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:36:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:36:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 29 F0 00 00 5A 00 00 00 00 00 53 BB 04 69 00 00 00| 
[2015-05-18 22:36:56][DEBUG]: The message is valid
[2015-05-18 22:36:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 41 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:36:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),41,90,0,0,9,6);					
[2015-05-18 22:36:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:36:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:37:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:37:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 2A F0 00 00 5A 00 00 00 00 00 53 BB 04 69 00 00 00| 
[2015-05-18 22:37:10][DEBUG]: The message is valid
[2015-05-18 22:37:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 42 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:37:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),42,90,0,0,9,6);					
[2015-05-18 22:37:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:37:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:37:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:37:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:37:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:37:23][DEBUG]: MYSQL = 1
[2015-05-18 22:37:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:37:23][DEBUG]: PORT = 3306
[2015-05-18 22:37:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:37:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:37:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:37:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:37:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:37:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:37:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:37:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:37:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:37:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:37:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:37:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:37:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:37:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:37:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:37:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:37:23][DEBUG]: MDB_ID = 
[2015-05-18 22:37:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:37:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:37:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:37:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:37:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:37:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:37:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:37:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:37:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:37:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:37:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:32:28 

[2015-05-18 22:37:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:37:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:37:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:37:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:37:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:37:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:37:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:37:23][DEBUG]: Message lu : size : 4
[2015-05-18 22:37:23][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:37:23][DEBUG]: The message is valid
[2015-05-18 22:37:23][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:37:23][DEBUG]: Not Suported yet
[2015-05-18 22:37:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:37:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 2B F0 00 00 5A 00 00 00 00 00 53 BB 04 69 00 00 00| 
[2015-05-18 22:37:24][DEBUG]: The message is valid
[2015-05-18 22:37:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 43 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:37:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),43,90,0,0,9,6);					
[2015-05-18 22:37:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:37:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:37:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:37:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 2C 89 F2 00 00 00 01 21 00 00 53 BB 08 6A 69 00 00| 
[2015-05-18 22:37:31][DEBUG]: The message is valid
[2015-05-18 22:37:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 44 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280643 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:37:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280643,9,6);					
[2015-05-18 22:37:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:37:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:37:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:37:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:37:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:37:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:37:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 2D F0 00 00 5A 00 00 00 00 00 53 BB 08 79 00 00 00| 
[2015-05-18 22:37:38][DEBUG]: The message is valid
[2015-05-18 22:37:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 45 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:37:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),45,90,0,0,9,7);					
[2015-05-18 22:37:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:37:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:37:48][DEBUG]: Message lu : size : 9
[2015-05-18 22:37:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 2E 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:37:48][DEBUG]: The message is valid
[2015-05-18 22:37:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 46 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:37:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),46,21,21,'Heating','Demand',6);					
[2015-05-18 22:37:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:37:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:37:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:37:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 2F F0 00 00 5A 00 00 00 00 00 53 BB 08 69 00 00 00| 
[2015-05-18 22:37:52][DEBUG]: The message is valid
[2015-05-18 22:37:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 47 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:37:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),47,90,0,0,9,6);					
[2015-05-18 22:37:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:37:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:38:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:38:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 30 F0 00 00 5A 00 00 00 00 00 53 BB 08 79 00 00 00| 
[2015-05-18 22:38:06][DEBUG]: The message is valid
[2015-05-18 22:38:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 48 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:38:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),48,90,0,0,9,7);					
[2015-05-18 22:38:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:38:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:38:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:38:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 31 F0 00 00 5A 00 00 00 00 00 53 BB 08 69 00 00 00| 
[2015-05-18 22:38:20][DEBUG]: The message is valid
[2015-05-18 22:38:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 49 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:38:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),49,90,0,0,9,6);					
[2015-05-18 22:38:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:38:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:38:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:38:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:38:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:38:23][DEBUG]: MYSQL = 1
[2015-05-18 22:38:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:38:23][DEBUG]: PORT = 3306
[2015-05-18 22:38:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:38:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:38:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:38:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:38:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:38:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:38:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:38:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:38:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:38:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:38:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:38:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:38:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:38:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:38:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:38:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:38:23][DEBUG]: MDB_ID = 
[2015-05-18 22:38:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:38:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:38:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:38:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:38:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:38:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:38:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:38:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:38:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:38:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:38:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:37:48 

[2015-05-18 22:38:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:38:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:38:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:38:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:38:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:38:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:38:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:38:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:38:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:38:24][DEBUG]: The message is valid
[2015-05-18 22:38:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:38:24][DEBUG]: Not Suported yet
[2015-05-18 22:38:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:38:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 32 89 F2 00 00 00 01 31 00 00 53 BB 0C A8 69 00 00| 
[2015-05-18 22:38:31][DEBUG]: The message is valid
[2015-05-18 22:38:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 50 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 305 
 Total: 6280647 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:38:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,305,6280647,9,6);					
[2015-05-18 22:38:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:38:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:38:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:38:31][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:38:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:38:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:38:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 33 F0 00 00 5A 00 00 00 00 00 53 BB 0C 69 00 00 00| 
[2015-05-18 22:38:34][DEBUG]: The message is valid
[2015-05-18 22:38:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 51 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:38:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),51,90,0,0,9,6);					
[2015-05-18 22:38:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:38:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:38:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:38:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 34 F0 00 00 5A 00 00 00 00 00 53 BB 0C 69 00 00 00| 
[2015-05-18 22:38:48][DEBUG]: The message is valid
[2015-05-18 22:38:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 52 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:38:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),52,90,0,0,9,6);					
[2015-05-18 22:38:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:38:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:39:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:39:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 35 F0 00 00 5A 00 00 00 00 00 53 BB 0C 69 00 00 00| 
[2015-05-18 22:39:02][DEBUG]: The message is valid
[2015-05-18 22:39:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 53 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:39:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),53,90,0,0,9,6);					
[2015-05-18 22:39:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:39:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:39:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:39:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 36 F0 00 00 5A 00 00 00 00 00 53 BB 0C 79 00 00 00| 
[2015-05-18 22:39:16][DEBUG]: The message is valid
[2015-05-18 22:39:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 54 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:39:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),54,90,0,0,9,7);					
[2015-05-18 22:39:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:39:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:39:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:39:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:39:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:39:23][DEBUG]: MYSQL = 1
[2015-05-18 22:39:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:39:23][DEBUG]: PORT = 3306
[2015-05-18 22:39:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:39:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:39:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:39:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:39:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:39:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:39:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:39:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:39:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:39:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:39:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:39:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:39:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:39:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:39:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:39:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:39:23][DEBUG]: MDB_ID = 
[2015-05-18 22:39:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:39:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:39:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:39:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:39:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:39:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:39:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:39:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:39:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:39:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:39:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:37:48 

[2015-05-18 22:39:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:39:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:39:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:39:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:39:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:39:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:39:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:39:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:39:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:39:24][DEBUG]: The message is valid
[2015-05-18 22:39:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:39:24][DEBUG]: Not Suported yet
[2015-05-18 22:39:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:39:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 37 F0 00 00 5A 00 00 00 00 00 53 BB 0C 69 00 00 00| 
[2015-05-18 22:39:30][DEBUG]: The message is valid
[2015-05-18 22:39:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 55 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:39:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),55,90,0,0,9,6);					
[2015-05-18 22:39:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:39:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:39:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:39:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 38 89 F2 00 00 00 01 21 00 00 53 BB 10 E6 69 00 00| 
[2015-05-18 22:39:31][DEBUG]: The message is valid
[2015-05-18 22:39:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 56 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280652 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:39:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280652,9,6);					
[2015-05-18 22:39:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:39:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:39:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:39:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:39:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:39:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:39:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 39 F0 00 00 5A 00 00 00 00 00 53 BB 10 69 00 00 00| 
[2015-05-18 22:39:44][DEBUG]: The message is valid
[2015-05-18 22:39:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 57 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:39:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),57,90,0,0,9,6);					
[2015-05-18 22:39:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:39:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:39:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:39:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 3A F0 00 00 5A 00 00 00 00 00 53 BB 10 69 00 00 00| 
[2015-05-18 22:39:58][DEBUG]: The message is valid
[2015-05-18 22:39:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 58 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:39:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),58,90,0,0,9,6);					
[2015-05-18 22:39:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:39:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:40:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:40:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 3B F0 00 00 5A 00 00 00 00 00 53 BB 10 69 00 00 00| 
[2015-05-18 22:40:12][DEBUG]: The message is valid
[2015-05-18 22:40:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 59 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:40:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),59,90,0,0,9,6);					
[2015-05-18 22:40:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:40:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:40:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:40:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:40:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:40:23][DEBUG]: MYSQL = 1
[2015-05-18 22:40:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:40:23][DEBUG]: PORT = 3306
[2015-05-18 22:40:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:40:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:40:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:40:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:40:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:40:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:40:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:40:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:40:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:40:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:40:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:40:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:40:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:40:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:40:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:40:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:40:23][DEBUG]: MDB_ID = 
[2015-05-18 22:40:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:40:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:40:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:40:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:40:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:40:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:40:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:40:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:40:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:40:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:40:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:37:48 

[2015-05-18 22:40:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:40:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:40:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:40:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:40:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:40:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:40:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:40:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:40:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:40:24][DEBUG]: The message is valid
[2015-05-18 22:40:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:40:24][DEBUG]: Not Suported yet
[2015-05-18 22:40:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:40:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 3C F0 00 00 5A 00 00 00 00 00 53 BB 10 69 00 00 00| 
[2015-05-18 22:40:26][DEBUG]: The message is valid
[2015-05-18 22:40:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 60 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:40:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),60,90,0,0,9,6);					
[2015-05-18 22:40:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:40:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:40:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:40:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 3D 89 F2 00 00 00 01 21 00 00 53 BB 15 24 69 00 00| 
[2015-05-18 22:40:31][DEBUG]: The message is valid
[2015-05-18 22:40:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 61 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280657 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:40:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280657,9,6);					
[2015-05-18 22:40:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:40:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:40:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:40:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:40:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:40:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:40:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 3E F0 00 00 5A 00 00 00 00 00 53 BB 15 79 00 00 00| 
[2015-05-18 22:40:40][DEBUG]: The message is valid
[2015-05-18 22:40:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 62 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:40:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),62,90,0,0,9,7);					
[2015-05-18 22:40:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:40:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:40:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:40:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 3F F0 00 00 5A 00 00 00 00 00 53 BB 15 79 00 00 00| 
[2015-05-18 22:40:54][DEBUG]: The message is valid
[2015-05-18 22:40:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 63 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:40:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),63,90,0,0,9,7);					
[2015-05-18 22:40:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:40:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:41:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:41:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 40 F0 00 00 5A 00 00 00 00 00 53 BB 15 79 00 00 00| 
[2015-05-18 22:41:08][DEBUG]: The message is valid
[2015-05-18 22:41:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 64 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:41:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),64,90,0,0,9,7);					
[2015-05-18 22:41:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:41:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:41:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:41:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 41 F0 00 00 5A 00 00 00 00 00 53 BB 15 69 00 00 00| 
[2015-05-18 22:41:22][DEBUG]: The message is valid
[2015-05-18 22:41:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 65 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:41:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),65,90,0,0,9,6);					
[2015-05-18 22:41:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:41:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:41:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:41:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:41:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:41:23][DEBUG]: MYSQL = 1
[2015-05-18 22:41:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:41:23][DEBUG]: PORT = 3306
[2015-05-18 22:41:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:41:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:41:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:41:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:41:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:41:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:41:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:41:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:41:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:41:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:41:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:41:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:41:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:41:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:41:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:41:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:41:23][DEBUG]: MDB_ID = 
[2015-05-18 22:41:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:41:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:41:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:41:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:41:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:41:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:41:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:41:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:41:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:41:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:41:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:37:48 

[2015-05-18 22:41:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:41:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:41:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:41:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:41:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:41:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:41:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:41:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:41:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:41:24][DEBUG]: The message is valid
[2015-05-18 22:41:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:41:24][DEBUG]: Not Suported yet
[2015-05-18 22:41:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:41:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 42 89 F2 00 00 00 01 21 00 00 53 BB 19 6E 69 00 00| 
[2015-05-18 22:41:31][DEBUG]: The message is valid
[2015-05-18 22:41:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 66 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280662 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:41:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280662,9,6);					
[2015-05-18 22:41:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:41:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:41:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:41:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:41:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:41:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:41:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 43 F0 00 00 5A 00 00 00 00 00 53 BB 19 79 00 00 00| 
[2015-05-18 22:41:36][DEBUG]: The message is valid
[2015-05-18 22:41:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 67 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:41:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),67,90,0,0,9,7);					
[2015-05-18 22:41:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:41:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:41:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:41:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 44 F0 00 00 5A 00 00 00 00 00 53 BB 19 69 00 00 00| 
[2015-05-18 22:41:50][DEBUG]: The message is valid
[2015-05-18 22:41:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 68 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:41:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),68,90,0,0,9,6);					
[2015-05-18 22:41:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:41:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:42:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:42:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 45 F0 00 00 5A 00 00 00 00 00 53 BB 19 79 00 00 00| 
[2015-05-18 22:42:04][DEBUG]: The message is valid
[2015-05-18 22:42:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 69 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:42:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),69,90,0,0,9,7);					
[2015-05-18 22:42:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:42:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:42:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:42:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 46 F0 00 00 5A 00 00 00 00 00 53 BB 19 79 00 00 00| 
[2015-05-18 22:42:18][DEBUG]: The message is valid
[2015-05-18 22:42:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 70 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:42:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),70,90,0,0,9,7);					
[2015-05-18 22:42:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:42:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:42:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:42:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:42:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:42:23][DEBUG]: MYSQL = 1
[2015-05-18 22:42:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:42:23][DEBUG]: PORT = 3306
[2015-05-18 22:42:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:42:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:42:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:42:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:42:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:42:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:42:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:42:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:42:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:42:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:42:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:42:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:42:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:42:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:42:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:42:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:42:23][DEBUG]: MDB_ID = 
[2015-05-18 22:42:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:42:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:42:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:42:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:42:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:42:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:42:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:42:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:42:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:42:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:42:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:37:48 

[2015-05-18 22:42:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:42:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:42:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:42:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:42:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:42:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:42:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:42:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:42:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:42:24][DEBUG]: The message is valid
[2015-05-18 22:42:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:42:24][DEBUG]: Not Suported yet
[2015-05-18 22:42:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:42:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 47 89 F2 00 00 00 01 21 00 00 53 BB 1D B2 69 00 00| 
[2015-05-18 22:42:31][DEBUG]: The message is valid
[2015-05-18 22:42:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 71 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280667 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:42:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280667,9,6);					
[2015-05-18 22:42:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:42:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:42:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:42:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:42:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:42:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:42:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 48 F0 00 00 5A 00 00 00 00 00 53 BB 1D 79 00 00 00| 
[2015-05-18 22:42:32][DEBUG]: The message is valid
[2015-05-18 22:42:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 72 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:42:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),72,90,0,0,9,7);					
[2015-05-18 22:42:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:42:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:42:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:42:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 49 F0 00 00 5A 00 00 00 00 00 53 BB 1D 69 00 00 00| 
[2015-05-18 22:42:46][DEBUG]: The message is valid
[2015-05-18 22:42:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 73 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:42:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),73,90,0,0,9,6);					
[2015-05-18 22:42:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:42:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:43:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 4A F0 00 00 5A 00 00 00 00 00 53 BB 1D 79 00 00 00| 
[2015-05-18 22:43:00][DEBUG]: The message is valid
[2015-05-18 22:43:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 74 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:43:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),74,90,0,0,9,7);					
[2015-05-18 22:43:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:43:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:08][DEBUG]: Message lu : size : 9
[2015-05-18 22:43:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 4B 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:43:08][DEBUG]: The message is valid
[2015-05-18 22:43:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 75 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:43:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),75,21,21,'Heating','Demand',6);					
[2015-05-18 22:43:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:43:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:43:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 4C F0 00 00 5A 00 00 00 00 00 53 BB 1D 69 00 00 00| 
[2015-05-18 22:43:14][DEBUG]: The message is valid
[2015-05-18 22:43:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 76 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:43:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),76,90,0,0,9,6);					
[2015-05-18 22:43:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:43:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:43:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:43:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:43:23][DEBUG]: MYSQL = 1
[2015-05-18 22:43:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:43:23][DEBUG]: PORT = 3306
[2015-05-18 22:43:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:43:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:43:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:43:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:43:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:43:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:43:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:43:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:43:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:43:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:43:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:43:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:43:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:43:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:43:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:43:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:43:23][DEBUG]: MDB_ID = 
[2015-05-18 22:43:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:43:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:43:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:43:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:43:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:43:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:43:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:43:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:43:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:43:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:43:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:43:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:43:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:43:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:43:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:43:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:43:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:43:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:43:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:43:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:43:24][DEBUG]: The message is valid
[2015-05-18 22:43:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:43:24][DEBUG]: Not Suported yet
[2015-05-18 22:43:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:43:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 4D F0 00 00 5A 00 00 00 00 00 53 BB 1D 79 00 00 00| 
[2015-05-18 22:43:28][DEBUG]: The message is valid
[2015-05-18 22:43:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 77 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:43:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),77,90,0,0,9,7);					
[2015-05-18 22:43:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:43:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:43:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 4E 89 F2 00 00 00 01 21 00 00 53 BB 21 F0 69 00 00| 
[2015-05-18 22:43:31][DEBUG]: The message is valid
[2015-05-18 22:43:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 78 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280672 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:43:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280672,9,6);					
[2015-05-18 22:43:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:43:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:43:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:43:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:43:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:43:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:43:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 4F F0 00 00 5A 00 00 00 00 00 53 BB 21 69 00 00 00| 
[2015-05-18 22:43:42][DEBUG]: The message is valid
[2015-05-18 22:43:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 79 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:43:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),79,90,0,0,9,6);					
[2015-05-18 22:43:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:43:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:43:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:43:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 50 F0 00 00 5A 00 00 00 00 00 53 BB 21 69 00 00 00| 
[2015-05-18 22:43:56][DEBUG]: The message is valid
[2015-05-18 22:43:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 80 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:43:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),80,90,0,0,9,6);					
[2015-05-18 22:43:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:43:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:44:01][DEBUG]: Message lu : size : 11
[2015-05-18 22:44:01][DEBUG]: Message lu : (20 first bytes): 0B 11 00 51 00 CE AC A2 02 01 0F 60 00 00 00 00 00 00 00 00| 
[2015-05-18 22:44:01][DEBUG]: The message is valid
[2015-05-18 22:44:01][DEBUG]: 

 Packetype: LIGHTING 2 
 Subtype: AC 
 Seqnbr: 81 
 id1: 00  
 id2: CE 
 id3: AC  
 id4: A2 
 Unit: 2 
 Command : On 
 Level: 15 
 rssi: 6 

[2015-05-18 22:44:01][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,id3,id4,unitcode,com) SELECT MAX(dc_id)+1,NOW(),'11','00',1,'00','CE','AC','A2',2,'tx' FROM devices ON DUPLICATE KEY UPDATE last_update=NOW();					INSERT INTO state (dc_id,datetime,device_mode,dim_level,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1),NOW(),'On',15,6)					ON DUPLICATE KEY UPDATE device_mode='On',dim_level=15,signal_level=6;					
[2015-05-18 22:44:01][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1
[2015-05-18 22:44:01][DEBUG]: MDB Cloud: ISS status : 0  Stream: 
[2015-05-18 22:44:07][DEBUG]: Message lu : size : 17
[2015-05-18 22:44:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 52 89 F2 02 00 00 01 E2 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:44:07][DEBUG]: The message is valid
[2015-05-18 22:44:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 82 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 482 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:44:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 482 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=482;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,482,0,9,7);					
[2015-05-18 22:44:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:44:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:44:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:44:07][DEBUG]: ISS POST DATA : [{ "value": "482" }]
[2015-05-18 22:44:08][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:44:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:44:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 53 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:44:10][DEBUG]: The message is valid
[2015-05-18 22:44:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 83 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:44:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),83,90,0,0,9,7);					
[2015-05-18 22:44:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:44:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:44:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:44:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 54 89 F2 01 00 00 01 E2 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:44:19][DEBUG]: The message is valid
[2015-05-18 22:44:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 84 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 482 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:44:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 482 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=482;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,482,0,9,7);					
[2015-05-18 22:44:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:44:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:44:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:44:19][DEBUG]: ISS POST DATA : [{ "value": "482" }]
[2015-05-18 22:44:20][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:44:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:44:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:44:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:44:23][DEBUG]: MYSQL = 1
[2015-05-18 22:44:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:44:23][DEBUG]: PORT = 3306
[2015-05-18 22:44:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:44:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:44:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:44:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:44:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:44:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:44:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:44:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:44:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:44:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:44:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:44:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:44:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:44:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:44:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:44:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:44:23][DEBUG]: MDB_ID = 
[2015-05-18 22:44:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:44:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:44:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:44:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:44:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:44:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:44:23][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:44:23][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:44:23][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:44:23][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:44:23][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:44:23][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:44:23][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:44:23][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:44:23][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:44:23][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:44:23][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:44:23][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:44:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:44:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:44:24][DEBUG]: The message is valid
[2015-05-18 22:44:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:44:24][DEBUG]: Not Suported yet
[2015-05-18 22:44:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:44:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 55 89 F2 00 00 00 01 D2 00 00 53 BB 27 8A 69 00 00| 
[2015-05-18 22:44:31][DEBUG]: The message is valid
[2015-05-18 22:44:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 85 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 466 
 Total: 6280678 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:44:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 466 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=466;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,466,6280678,9,6);					
[2015-05-18 22:44:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:44:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:44:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:44:31][DEBUG]: ISS POST DATA : [{ "value": "466" }]
[2015-05-18 22:44:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:44:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:44:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 56 F0 00 00 5A 00 00 00 00 00 53 BB 27 79 00 00 00| 
[2015-05-18 22:44:38][DEBUG]: The message is valid
[2015-05-18 22:44:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 86 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:44:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),86,90,0,0,9,7);					
[2015-05-18 22:44:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:44:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:44:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:44:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 57 F0 00 00 5A 00 00 00 00 00 53 BB 27 69 00 00 00| 
[2015-05-18 22:44:52][DEBUG]: The message is valid
[2015-05-18 22:44:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 87 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:44:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),87,90,0,0,9,6);					
[2015-05-18 22:44:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:44:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:44:59][DEBUG]: [EnOcean] Message received 

[2015-05-18 22:44:59][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 22:44:59][DEBUG]: [EnOcean] Data =  d5 08 00 8b 3c 6b 00
[2015-05-18 22:44:59][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 4a 00
[2015-05-18 22:44:59][DEBUG]: [EnOcean] byte 1: d5
[2015-05-18 22:44:59][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 22:44:59][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='8B'AND id3='3C'AND id4='6B';
[2015-05-18 22:44:59][DEBUG]: [EnDevice] dc_id = 21 ,21
[2015-05-18 22:44:59][DEBUG]: [EnDevice] rorg = D5
[2015-05-18 22:44:59][DEBUG]: [EnDevice] func = 00
[2015-05-18 22:44:59][DEBUG]: [EnDevice] type = 01
[2015-05-18 22:44:59][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 22:44:59][DEBUG]: [EnDevice] id2 = 8B
[2015-05-18 22:44:59][DEBUG]: [EnDevice] id3 = 3C
[2015-05-18 22:44:59][DEBUG]: [EnDevice] id4 = 6B
[2015-05-18 22:44:59][DEBUG]: [EnDevice] enable = 1
[2015-05-18 22:44:59][DEBUG]: 

 [EnOcean] 
 Packetype: 1BS Telegram  
 id1: 00  
 id2: 8B 
 id3: 3C  
 id4: 6B 
 Learn Button: not pressed 
 Contact: open 

[2015-05-18 22:45:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:45:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 58 F0 00 00 5A 00 00 00 00 00 53 BB 27 79 00 00 00| 
[2015-05-18 22:45:06][DEBUG]: The message is valid
[2015-05-18 22:45:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 88 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:45:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),88,90,0,0,9,7);					
[2015-05-18 22:45:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:45:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:45:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:45:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 59 F0 00 00 5A 00 00 00 00 00 53 BB 27 79 00 00 00| 
[2015-05-18 22:45:20][DEBUG]: The message is valid
[2015-05-18 22:45:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 89 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:45:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),89,90,0,0,9,7);					
[2015-05-18 22:45:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:45:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:45:23][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:45:23][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:45:23][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:45:23][DEBUG]: MYSQL = 1
[2015-05-18 22:45:23][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:45:23][DEBUG]: PORT = 3306
[2015-05-18 22:45:23][DEBUG]: LOGIN = mydombox
[2015-05-18 22:45:23][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:45:23][DEBUG]: DATABASE = mydombox
[2015-05-18 22:45:23][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:45:23][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:45:23][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:45:23][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:45:23][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:45:23][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:45:23][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:45:23][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:45:23][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:45:23][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:45:23][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:45:23][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:45:23][DEBUG]: MDB_KEY = 
[2015-05-18 22:45:23][DEBUG]: MDB_ID = 
[2015-05-18 22:45:23][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:45:23][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:45:23][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:45:23][DEBUG]: --------------------------------------------------------

[2015-05-18 22:45:23][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:45:23][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:45:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:45:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:45:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:45:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:45:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:45:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:45:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:45:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:45:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:45:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:45:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:45:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:45:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:45:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:45:24][DEBUG]: The message is valid
[2015-05-18 22:45:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:45:24][DEBUG]: Not Suported yet
[2015-05-18 22:45:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:45:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 5A 89 F2 00 00 00 01 E2 00 00 53 BB 2E 98 69 00 00| 
[2015-05-18 22:45:31][DEBUG]: The message is valid
[2015-05-18 22:45:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 90 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 482 
 Total: 6280686 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:45:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 482 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=482;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,482,6280686,9,6);					
[2015-05-18 22:45:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:45:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:45:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:45:31][DEBUG]: ISS POST DATA : [{ "value": "482" }]
[2015-05-18 22:45:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:45:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:45:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 5B F0 00 00 5A 00 00 00 00 00 53 BB 2E 79 00 00 00| 
[2015-05-18 22:45:34][DEBUG]: The message is valid
[2015-05-18 22:45:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 91 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:45:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),91,90,0,0,9,7);					
[2015-05-18 22:45:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:45:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:45:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:45:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 5C F0 00 00 5A 00 00 00 00 00 53 BB 2E 79 00 00 00| 
[2015-05-18 22:45:48][DEBUG]: The message is valid
[2015-05-18 22:45:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 92 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:45:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),92,90,0,0,9,7);					
[2015-05-18 22:45:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:45:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:46:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:46:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 5D F0 00 00 5A 00 00 00 00 00 53 BB 2E 79 00 00 00| 
[2015-05-18 22:46:02][DEBUG]: The message is valid
[2015-05-18 22:46:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 93 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),93,90,0,0,9,7);					
[2015-05-18 22:46:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:46:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:46:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:46:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 5E F0 00 00 5A 00 00 00 00 00 53 BB 2E 79 00 00 00| 
[2015-05-18 22:46:16][DEBUG]: The message is valid
[2015-05-18 22:46:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 94 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),94,90,0,0,9,7);					
[2015-05-18 22:46:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:46:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:46:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:46:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:46:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:46:24][DEBUG]: MYSQL = 1
[2015-05-18 22:46:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:46:24][DEBUG]: PORT = 3306
[2015-05-18 22:46:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:46:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:46:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:46:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:46:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:46:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:46:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:46:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:46:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:46:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:46:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:46:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:46:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:46:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:46:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:46:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:46:24][DEBUG]: MDB_ID = 
[2015-05-18 22:46:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:46:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:46:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:46:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:46:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:46:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:46:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:46:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:46:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:46:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:46:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:46:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:46:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:46:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:46:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:46:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:46:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:46:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:46:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:46:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:46:24][DEBUG]: The message is valid
[2015-05-18 22:46:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:46:24][DEBUG]: Not Suported yet
[2015-05-18 22:46:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:46:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 5F F0 00 00 5A 00 00 00 00 00 53 BB 2E 79 00 00 00| 
[2015-05-18 22:46:30][DEBUG]: The message is valid
[2015-05-18 22:46:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 95 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),95,90,0,0,9,7);					
[2015-05-18 22:46:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:46:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:46:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:46:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 60 89 F2 00 00 00 01 E2 00 00 53 BB 35 9A 79 00 00| 
[2015-05-18 22:46:31][DEBUG]: The message is valid
[2015-05-18 22:46:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 96 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 482 
 Total: 6280694 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 482 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=482;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,482,6280694,9,7);					
[2015-05-18 22:46:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:46:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:46:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:46:31][DEBUG]: ISS POST DATA : [{ "value": "482" }]
[2015-05-18 22:46:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:46:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:46:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 61 F0 00 00 5A 00 00 00 00 00 53 BB 35 79 00 00 00| 
[2015-05-18 22:46:44][DEBUG]: The message is valid
[2015-05-18 22:46:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 97 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),97,90,0,0,9,7);					
[2015-05-18 22:46:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:46:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:46:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:46:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 62 F0 00 00 5A 00 00 00 00 00 53 BB 35 79 00 00 00| 
[2015-05-18 22:46:58][DEBUG]: The message is valid
[2015-05-18 22:46:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 98 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:46:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),98,90,0,0,9,7);					
[2015-05-18 22:46:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:46:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:47:04][DEBUG]: Message lu : size : 11
[2015-05-18 22:47:04][DEBUG]: Message lu : (20 first bytes): 0B 11 00 63 00 CE AC A2 02 00 00 60 00 00 00 00 00 00 00 00| 
[2015-05-18 22:47:04][DEBUG]: The message is valid
[2015-05-18 22:47:04][DEBUG]: 

 Packetype: LIGHTING 2 
 Subtype: AC 
 Seqnbr: 99 
 id1: 00  
 id2: CE 
 id3: AC  
 id4: A2 
 Unit: 2 
 Command : Off 
 Level: 0 
 rssi: 6 

[2015-05-18 22:47:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,id3,id4,unitcode,com) SELECT MAX(dc_id)+1,NOW(),'11','00',1,'00','CE','AC','A2',2,'tx' FROM devices ON DUPLICATE KEY UPDATE last_update=NOW();					INSERT INTO state (dc_id,datetime,device_mode,dim_level,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1),NOW(),'Off',0,6)					ON DUPLICATE KEY UPDATE device_mode='Off',dim_level=0,signal_level=6;					
[2015-05-18 22:47:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1
[2015-05-18 22:47:04][DEBUG]: MDB Cloud: ISS status : 0  Stream: 
[2015-05-18 22:47:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:47:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 64 F0 00 00 5A 00 00 00 00 00 53 BB 35 79 00 00 00| 
[2015-05-18 22:47:12][DEBUG]: The message is valid
[2015-05-18 22:47:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 100 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),100,90,0,0,9,7);					
[2015-05-18 22:47:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:47:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:47:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:47:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 65 89 F2 01 00 00 01 31 00 00 00 00 00 00 79 00 00| 
[2015-05-18 22:47:19][DEBUG]: The message is valid
[2015-05-18 22:47:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 101 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,305,0,9,7);					
[2015-05-18 22:47:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:47:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:47:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:47:19][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:47:20][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:47:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:47:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:47:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:47:24][DEBUG]: MYSQL = 1
[2015-05-18 22:47:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:47:24][DEBUG]: PORT = 3306
[2015-05-18 22:47:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:47:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:47:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:47:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:47:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:47:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:47:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:47:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:47:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:47:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:47:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:47:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:47:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:47:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:47:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:47:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:47:24][DEBUG]: MDB_ID = 
[2015-05-18 22:47:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:47:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:47:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:47:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:47:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:47:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:47:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:47:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:47:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:47:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:47:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:47:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:47:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:47:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:47:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:47:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:47:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:47:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:47:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:47:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:47:24][DEBUG]: The message is valid
[2015-05-18 22:47:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:47:24][DEBUG]: Not Suported yet
[2015-05-18 22:47:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:47:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 66 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:47:26][DEBUG]: The message is valid
[2015-05-18 22:47:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 102 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),102,90,0,0,9,7);					
[2015-05-18 22:47:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:47:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:47:26][DEBUG]: Message lu : size : 10
[2015-05-18 22:47:26][DEBUG]: Message lu : (20 first bytes): 0A 52 02 67 91 01 00 75 52 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:47:26][DEBUG]: The message is valid
[2015-05-18 22:47:26][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 103 
 id1: 91  
 id2: 01 
 Temperature: 11.70 
 Humidity: 82 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:47:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.70,82 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.70,home_data2=82;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),103,11.70,82,'wet',9,5);					
[2015-05-18 22:47:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 22:47:26][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 22:47:26][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 22:47:26][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.70", "Humidity" : "82" }}]
[2015-05-18 22:47:27][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:47:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:47:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 68 89 F2 00 00 00 01 52 00 00 53 BB 3B B2 79 00 00| 
[2015-05-18 22:47:31][DEBUG]: The message is valid
[2015-05-18 22:47:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 104 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 338 
 Total: 6280701 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 338 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=338;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,338,6280701,9,7);					
[2015-05-18 22:47:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:47:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:47:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:47:31][DEBUG]: ISS POST DATA : [{ "value": "338" }]
[2015-05-18 22:47:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:47:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:47:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 69 F0 00 00 5A 00 00 00 00 00 53 BB 3B 79 00 00 00| 
[2015-05-18 22:47:40][DEBUG]: The message is valid
[2015-05-18 22:47:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 105 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),105,90,0,0,9,7);					
[2015-05-18 22:47:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:47:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:47:43][DEBUG]: Message lu : size : 17
[2015-05-18 22:47:43][DEBUG]: Message lu : (20 first bytes): 11 5A 02 6A 89 F2 04 00 00 01 31 00 00 00 00 00 00 69 00 00| 
[2015-05-18 22:47:43][DEBUG]: The message is valid
[2015-05-18 22:47:43][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 106 
 id1: 89  
 id2: F2 
 Count: 4 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:47:43][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),4,305,0,9,6);					
[2015-05-18 22:47:43][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:47:43][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:47:43][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:47:43][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:47:43][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:47:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:47:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 6B F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:47:54][DEBUG]: The message is valid
[2015-05-18 22:47:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 107 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:47:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),107,90,0,0,9,7);					
[2015-05-18 22:47:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:47:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:47:55][DEBUG]: Message lu : size : 17
[2015-05-18 22:47:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 6C 89 F2 03 00 00 01 31 00 00 00 00 00 00 69 00 00| 
[2015-05-18 22:47:55][DEBUG]: The message is valid
[2015-05-18 22:47:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 108 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 305 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:47:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 305 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=305;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,305,0,9,6);					
[2015-05-18 22:47:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:47:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:47:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:47:55][DEBUG]: ISS POST DATA : [{ "value": "305" }]
[2015-05-18 22:47:55][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:48:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:48:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 6D F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:48:08][DEBUG]: The message is valid
[2015-05-18 22:48:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 109 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:48:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),109,90,0,0,9,7);					
[2015-05-18 22:48:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:48:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:48:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:48:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 6E F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:48:22][DEBUG]: The message is valid
[2015-05-18 22:48:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 110 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:48:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),110,90,0,0,9,7);					
[2015-05-18 22:48:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:48:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:48:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:48:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:48:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:48:24][DEBUG]: MYSQL = 1
[2015-05-18 22:48:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:48:24][DEBUG]: PORT = 3306
[2015-05-18 22:48:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:48:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:48:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:48:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:48:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:48:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:48:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:48:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:48:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:48:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:48:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:48:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:48:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:48:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:48:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:48:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:48:24][DEBUG]: MDB_ID = 
[2015-05-18 22:48:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:48:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:48:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:48:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:48:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:48:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:48:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:48:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:48:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:48:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:48:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:43:08 

[2015-05-18 22:48:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:48:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:48:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:48:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:48:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:48:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:48:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:48:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:48:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:48:24][DEBUG]: The message is valid
[2015-05-18 22:48:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:48:24][DEBUG]: Not Suported yet
[2015-05-18 22:48:28][DEBUG]: Message lu : size : 9
[2015-05-18 22:48:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 6F 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:48:28][DEBUG]: The message is valid
[2015-05-18 22:48:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 111 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:48:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),111,21,21,'Heating','Demand',6);					
[2015-05-18 22:48:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:48:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:48:31][DEBUG]: Message lu : size : 11
[2015-05-18 22:48:31][DEBUG]: Message lu : (20 first bytes): 0B 55 02 70 FC 00 00 00 00 42 A5 59 00 00 00 00 00 00 00 00| 
[2015-05-18 22:48:31][DEBUG]: The message is valid
[2015-05-18 22:48:31][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 112 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.60 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 22:48:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1706.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1706.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),112,0.00,1706.00,9,5);					
[2015-05-18 22:48:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:48:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 22:48:31][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 22:48:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 22:48:31][DEBUG]: ISS POST DATA : [{ "value": "170.60" }]
[2015-05-18 22:48:31][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:48:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:48:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 72 F0 00 00 5A 00 00 00 00 00 53 BB 40 79 00 00 00| 
[2015-05-18 22:48:36][DEBUG]: The message is valid
[2015-05-18 22:48:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 114 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:48:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),114,90,0,0,9,7);					
[2015-05-18 22:48:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:48:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:48:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:48:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 73 F0 00 00 5A 00 00 00 00 00 53 BB 40 79 00 00 00| 
[2015-05-18 22:48:50][DEBUG]: The message is valid
[2015-05-18 22:48:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 115 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:48:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),115,90,0,0,9,7);					
[2015-05-18 22:48:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:48:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:49:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:49:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 74 F0 00 00 5A 00 00 00 00 00 53 BB 40 79 00 00 00| 
[2015-05-18 22:49:04][DEBUG]: The message is valid
[2015-05-18 22:49:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 116 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:49:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),116,90,0,0,9,7);					
[2015-05-18 22:49:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:49:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:49:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:49:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 75 F0 00 00 5A 00 00 00 00 00 53 BB 40 79 00 00 00| 
[2015-05-18 22:49:18][DEBUG]: The message is valid
[2015-05-18 22:49:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 117 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:49:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),117,90,0,0,9,7);					
[2015-05-18 22:49:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:49:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:49:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:49:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:49:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:49:24][DEBUG]: MYSQL = 1
[2015-05-18 22:49:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:49:24][DEBUG]: PORT = 3306
[2015-05-18 22:49:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:49:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:49:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:49:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:49:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:49:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:49:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:49:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:49:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:49:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:49:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:49:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:49:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:49:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:49:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:49:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:49:24][DEBUG]: MDB_ID = 
[2015-05-18 22:49:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:49:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:49:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:49:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:49:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:49:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:49:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:49:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:49:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:49:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:49:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:48:28 

[2015-05-18 22:49:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:49:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:49:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:49:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:49:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:49:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:49:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:49:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:49:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:49:24][DEBUG]: The message is valid
[2015-05-18 22:49:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:49:24][DEBUG]: Not Suported yet
[2015-05-18 22:49:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:49:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 76 89 F2 00 00 00 01 21 00 00 53 BB 44 58 69 00 00| 
[2015-05-18 22:49:31][DEBUG]: The message is valid
[2015-05-18 22:49:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 118 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280711 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:49:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280711,9,6);					
[2015-05-18 22:49:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:49:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:49:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:49:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:49:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:49:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:49:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 77 F0 00 00 5A 00 00 00 00 00 53 BB 44 79 00 00 00| 
[2015-05-18 22:49:32][DEBUG]: The message is valid
[2015-05-18 22:49:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 119 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:49:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),119,90,0,0,9,7);					
[2015-05-18 22:49:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:49:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:49:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:49:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 78 F0 00 00 5A 00 00 00 00 00 53 BB 44 79 00 00 00| 
[2015-05-18 22:49:46][DEBUG]: The message is valid
[2015-05-18 22:49:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 120 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:49:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),120,90,0,0,9,7);					
[2015-05-18 22:49:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:49:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:50:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:50:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 79 F0 00 00 5A 00 00 00 00 00 53 BB 44 79 00 00 00| 
[2015-05-18 22:50:00][DEBUG]: The message is valid
[2015-05-18 22:50:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 121 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:50:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),121,90,0,0,9,7);					
[2015-05-18 22:50:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:50:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:50:07][DEBUG]: [EnOcean] Message received 

[2015-05-18 22:50:07][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 22:50:07][DEBUG]: [EnOcean] Data =  a5 00 00 7c 08 00 88 fb 73 00
[2015-05-18 22:50:07][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 4f 00
[2015-05-18 22:50:07][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 22:50:07][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 22:50:07][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 22:50:07][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 22:50:07][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 22:50:07][DEBUG]: [EnDevice] func = 02
[2015-05-18 22:50:07][DEBUG]: [EnDevice] type = 05
[2015-05-18 22:50:07][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 22:50:07][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 22:50:07][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 22:50:07][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 22:50:07][DEBUG]: [EnDevice] enable = 1
[2015-05-18 22:50:07][DEBUG]: [EnOcean] device: 30
[2015-05-18 22:50:07][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 22:50:07][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 22:50:07][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 22:50:07][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.55 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 18559776, NOW(), 20.55);
[2015-05-18 22:50:07][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.55 

[2015-05-18 22:50:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:50:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 7A F0 00 00 5A 00 00 00 00 00 53 BB 44 79 00 00 00| 
[2015-05-18 22:50:14][DEBUG]: The message is valid
[2015-05-18 22:50:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 122 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:50:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),122,90,0,0,9,7);					
[2015-05-18 22:50:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:50:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:50:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:50:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:50:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:50:24][DEBUG]: MYSQL = 1
[2015-05-18 22:50:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:50:24][DEBUG]: PORT = 3306
[2015-05-18 22:50:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:50:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:50:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:50:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:50:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:50:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:50:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:50:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:50:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:50:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:50:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:50:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:50:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:50:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:50:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:50:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:50:24][DEBUG]: MDB_ID = 
[2015-05-18 22:50:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:50:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:50:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:50:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:50:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:50:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:50:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:50:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:50:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:50:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:50:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:48:28 

[2015-05-18 22:50:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:50:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:50:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:50:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:50:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:50:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:50:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:50:24][DEBUG]: Message lu : size : 4
[2015-05-18 22:50:24][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:50:24][DEBUG]: The message is valid
[2015-05-18 22:50:24][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:50:24][DEBUG]: Not Suported yet
[2015-05-18 22:50:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:50:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 7B F0 00 00 5A 00 00 00 00 00 53 BB 44 79 00 00 00| 
[2015-05-18 22:50:28][DEBUG]: The message is valid
[2015-05-18 22:50:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 123 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:50:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),123,90,0,0,9,7);					
[2015-05-18 22:50:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:50:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:50:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:50:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 7C 89 F2 00 00 00 01 21 00 00 53 BB 48 90 69 00 00| 
[2015-05-18 22:50:31][DEBUG]: The message is valid
[2015-05-18 22:50:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 124 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280716 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:50:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280716,9,6);					
[2015-05-18 22:50:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:50:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:50:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:50:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:50:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:50:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:50:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 7D F0 00 00 5A 00 00 00 00 00 53 BB 48 79 00 00 00| 
[2015-05-18 22:50:42][DEBUG]: The message is valid
[2015-05-18 22:50:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 125 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:50:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),125,90,0,0,9,7);					
[2015-05-18 22:50:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:50:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:50:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:50:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 7E F0 00 00 5A 00 00 00 00 00 53 BB 48 79 00 00 00| 
[2015-05-18 22:50:56][DEBUG]: The message is valid
[2015-05-18 22:50:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 126 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:50:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),126,90,0,0,9,7);					
[2015-05-18 22:50:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:50:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:51:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:51:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 7F F0 00 00 5A 00 00 00 00 00 53 BB 48 79 00 00 00| 
[2015-05-18 22:51:10][DEBUG]: The message is valid
[2015-05-18 22:51:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 127 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:51:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),127,90,0,0,9,7);					
[2015-05-18 22:51:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:51:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:51:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:51:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 80 F0 00 00 5A 00 00 00 00 00 53 BB 48 79 00 00 00| 
[2015-05-18 22:51:24][DEBUG]: The message is valid
[2015-05-18 22:51:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 128 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:51:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),128,90,0,0,9,7);					
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:51:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:51:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:51:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:51:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:51:24][DEBUG]: MYSQL = 1
[2015-05-18 22:51:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:51:24][DEBUG]: PORT = 3306
[2015-05-18 22:51:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:51:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:51:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:51:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:51:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:51:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:51:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:51:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:51:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:51:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:51:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:51:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:51:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:51:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:51:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:51:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:51:24][DEBUG]: MDB_ID = 
[2015-05-18 22:51:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:51:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:51:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:51:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:51:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:51:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:51:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:51:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:51:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:51:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:51:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:48:28 

[2015-05-18 22:51:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:51:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:51:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:51:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:51:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:51:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:51:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:51:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:51:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:51:25][DEBUG]: The message is valid
[2015-05-18 22:51:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:51:25][DEBUG]: Not Suported yet
[2015-05-18 22:51:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:51:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 81 89 F2 00 00 00 01 21 00 00 53 BB 4C CE 69 00 00| 
[2015-05-18 22:51:31][DEBUG]: The message is valid
[2015-05-18 22:51:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 129 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280721 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:51:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280721,9,6);					
[2015-05-18 22:51:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:51:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:51:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:51:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:51:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:51:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:51:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 82 F0 00 00 5A 00 00 00 00 00 53 BB 4C 79 00 00 00| 
[2015-05-18 22:51:38][DEBUG]: The message is valid
[2015-05-18 22:51:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 130 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:51:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),130,90,0,0,9,7);					
[2015-05-18 22:51:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:51:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:51:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:51:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 83 F0 00 00 5A 00 00 00 00 00 53 BB 4C 79 00 00 00| 
[2015-05-18 22:51:52][DEBUG]: The message is valid
[2015-05-18 22:51:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 131 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:51:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),131,90,0,0,9,7);					
[2015-05-18 22:51:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:51:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:52:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:52:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 84 F0 00 00 5A 00 00 00 00 00 53 BB 4C 79 00 00 00| 
[2015-05-18 22:52:06][DEBUG]: The message is valid
[2015-05-18 22:52:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 132 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:52:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),132,90,0,0,9,7);					
[2015-05-18 22:52:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:52:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:52:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:52:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 85 F0 00 00 5A 00 00 00 00 00 53 BB 4C 79 00 00 00| 
[2015-05-18 22:52:20][DEBUG]: The message is valid
[2015-05-18 22:52:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 133 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:52:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),133,90,0,0,9,7);					
[2015-05-18 22:52:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:52:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:52:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:52:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:52:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:52:24][DEBUG]: MYSQL = 1
[2015-05-18 22:52:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:52:24][DEBUG]: PORT = 3306
[2015-05-18 22:52:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:52:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:52:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:52:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:52:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:52:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:52:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:52:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:52:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:52:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:52:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:52:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:52:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:52:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:52:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:52:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:52:24][DEBUG]: MDB_ID = 
[2015-05-18 22:52:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:52:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:52:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:52:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:52:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:52:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:52:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:52:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:52:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:52:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:52:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:48:28 

[2015-05-18 22:52:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:52:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:52:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:52:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:52:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:52:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:52:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:52:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:52:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:52:25][DEBUG]: The message is valid
[2015-05-18 22:52:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:52:25][DEBUG]: Not Suported yet
[2015-05-18 22:52:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:52:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 86 89 F2 00 00 00 01 21 00 00 53 BB 51 06 69 00 00| 
[2015-05-18 22:52:31][DEBUG]: The message is valid
[2015-05-18 22:52:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 134 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280726 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:52:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280726,9,6);					
[2015-05-18 22:52:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:52:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:52:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:52:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:52:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:52:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:52:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 87 F0 00 00 5A 00 00 00 00 00 53 BB 51 79 00 00 00| 
[2015-05-18 22:52:34][DEBUG]: The message is valid
[2015-05-18 22:52:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 135 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:52:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),135,90,0,0,9,7);					
[2015-05-18 22:52:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:52:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:52:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:52:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 88 F0 00 00 5A 00 00 00 00 00 53 BB 51 79 00 00 00| 
[2015-05-18 22:52:48][DEBUG]: The message is valid
[2015-05-18 22:52:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 136 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:52:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),136,90,0,0,9,7);					
[2015-05-18 22:52:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:52:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:02][DEBUG]: Message lu : size : 16
[2015-05-18 22:53:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 89 F0 00 00 5A 00 00 00 00 00 53 BB 51 79 00 00 00| 
[2015-05-18 22:53:02][DEBUG]: The message is valid
[2015-05-18 22:53:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 137 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:53:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),137,90,0,0,9,7);					
[2015-05-18 22:53:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:53:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:16][DEBUG]: Message lu : size : 16
[2015-05-18 22:53:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 8A F0 00 00 5A 00 00 00 00 00 53 BB 51 79 00 00 00| 
[2015-05-18 22:53:16][DEBUG]: The message is valid
[2015-05-18 22:53:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 138 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:53:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),138,90,0,0,9,7);					
[2015-05-18 22:53:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:53:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:53:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:53:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:53:24][DEBUG]: MYSQL = 1
[2015-05-18 22:53:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:53:24][DEBUG]: PORT = 3306
[2015-05-18 22:53:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:53:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:53:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:53:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:53:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:53:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:53:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:53:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:53:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:53:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:53:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:53:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:53:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:53:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:53:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:53:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:53:24][DEBUG]: MDB_ID = 
[2015-05-18 22:53:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:53:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:53:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:53:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:53:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:53:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:53:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:53:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:53:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:53:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:53:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:48:28 

[2015-05-18 22:53:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:53:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:53:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:53:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:53:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:53:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:53:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:53:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:53:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:53:25][DEBUG]: The message is valid
[2015-05-18 22:53:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:53:25][DEBUG]: Not Suported yet
[2015-05-18 22:53:30][DEBUG]: Message lu : size : 16
[2015-05-18 22:53:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 8B F0 00 00 5A 00 00 00 00 00 53 BB 51 79 00 00 00| 
[2015-05-18 22:53:30][DEBUG]: The message is valid
[2015-05-18 22:53:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 139 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:53:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),139,90,0,0,9,7);					
[2015-05-18 22:53:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:53:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:53:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 8C 89 F2 00 00 00 01 21 00 00 53 BB 55 3E 69 00 00| 
[2015-05-18 22:53:31][DEBUG]: The message is valid
[2015-05-18 22:53:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 140 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280731 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:53:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280731,9,6);					
[2015-05-18 22:53:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:53:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:53:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:53:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:53:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:53:44][DEBUG]: Message lu : size : 16
[2015-05-18 22:53:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 8D F0 00 00 5A 00 00 00 00 00 53 BB 55 79 00 00 00| 
[2015-05-18 22:53:44][DEBUG]: The message is valid
[2015-05-18 22:53:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 141 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:53:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),141,90,0,0,9,7);					
[2015-05-18 22:53:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:53:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:48][DEBUG]: Message lu : size : 9
[2015-05-18 22:53:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 8E 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:53:48][DEBUG]: The message is valid
[2015-05-18 22:53:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 142 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:53:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),142,21,21,'Heating','Demand',6);					
[2015-05-18 22:53:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:53:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:53:58][DEBUG]: Message lu : size : 16
[2015-05-18 22:53:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 8F F0 00 00 5A 00 00 00 00 00 53 BB 55 79 00 00 00| 
[2015-05-18 22:53:58][DEBUG]: The message is valid
[2015-05-18 22:53:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 143 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:53:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),143,90,0,0,9,7);					
[2015-05-18 22:53:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:53:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:54:12][DEBUG]: Message lu : size : 16
[2015-05-18 22:54:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 90 F0 00 00 5A 00 00 00 00 00 53 BB 55 79 00 00 00| 
[2015-05-18 22:54:12][DEBUG]: The message is valid
[2015-05-18 22:54:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 144 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:54:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),144,90,0,0,9,7);					
[2015-05-18 22:54:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:54:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:54:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:54:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:54:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:54:24][DEBUG]: MYSQL = 1
[2015-05-18 22:54:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:54:24][DEBUG]: PORT = 3306
[2015-05-18 22:54:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:54:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:54:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:54:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:54:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:54:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:54:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:54:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:54:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:54:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:54:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:54:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:54:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:54:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:54:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:54:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:54:24][DEBUG]: MDB_ID = 
[2015-05-18 22:54:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:54:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:54:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:54:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:54:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:54:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:54:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:54:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:54:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:54:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:54:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:53:48 

[2015-05-18 22:54:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:54:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:54:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:54:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:54:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:54:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:54:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:54:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:54:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:54:25][DEBUG]: The message is valid
[2015-05-18 22:54:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:54:25][DEBUG]: Not Suported yet
[2015-05-18 22:54:26][DEBUG]: Message lu : size : 16
[2015-05-18 22:54:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 91 F0 00 00 5A 00 00 00 00 00 53 BB 55 79 00 00 00| 
[2015-05-18 22:54:26][DEBUG]: The message is valid
[2015-05-18 22:54:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 145 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:54:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),145,90,0,0,9,7);					
[2015-05-18 22:54:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:54:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:54:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:54:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 92 89 F2 00 00 00 01 21 00 00 53 BB 59 76 69 00 00| 
[2015-05-18 22:54:31][DEBUG]: The message is valid
[2015-05-18 22:54:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 146 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280735 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:54:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280735,9,6);					
[2015-05-18 22:54:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:54:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:54:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:54:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:54:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:54:40][DEBUG]: Message lu : size : 16
[2015-05-18 22:54:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 93 F0 00 00 5A 00 00 00 00 00 53 BB 59 79 00 00 00| 
[2015-05-18 22:54:40][DEBUG]: The message is valid
[2015-05-18 22:54:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 147 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:54:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),147,90,0,0,9,7);					
[2015-05-18 22:54:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:54:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:54:54][DEBUG]: Message lu : size : 16
[2015-05-18 22:54:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 94 F0 00 00 5A 00 00 00 00 00 53 BB 59 79 00 00 00| 
[2015-05-18 22:54:54][DEBUG]: The message is valid
[2015-05-18 22:54:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 148 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:54:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),148,90,0,0,9,7);					
[2015-05-18 22:54:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:54:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:55:08][DEBUG]: Message lu : size : 16
[2015-05-18 22:55:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 95 F0 00 00 5A 00 00 00 00 00 53 BB 59 79 00 00 00| 
[2015-05-18 22:55:08][DEBUG]: The message is valid
[2015-05-18 22:55:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 149 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:55:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),149,90,0,0,9,7);					
[2015-05-18 22:55:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:55:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:55:22][DEBUG]: Message lu : size : 16
[2015-05-18 22:55:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 96 F0 00 00 5A 00 00 00 00 00 53 BB 59 79 00 00 00| 
[2015-05-18 22:55:22][DEBUG]: The message is valid
[2015-05-18 22:55:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 150 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:55:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),150,90,0,0,9,7);					
[2015-05-18 22:55:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:55:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:55:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:55:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:55:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:55:24][DEBUG]: MYSQL = 1
[2015-05-18 22:55:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:55:24][DEBUG]: PORT = 3306
[2015-05-18 22:55:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:55:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:55:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:55:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:55:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:55:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:55:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:55:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:55:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:55:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:55:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:55:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:55:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:55:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:55:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:55:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:55:24][DEBUG]: MDB_ID = 
[2015-05-18 22:55:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:55:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:55:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:55:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:55:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:55:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:55:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:55:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:55:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:55:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:55:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:53:48 

[2015-05-18 22:55:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:55:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:55:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:55:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:55:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:55:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:55:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:55:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:55:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:55:25][DEBUG]: The message is valid
[2015-05-18 22:55:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:55:25][DEBUG]: Not Suported yet
[2015-05-18 22:55:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:55:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 97 89 F2 00 00 00 01 21 00 00 53 BB 5D AE 69 00 00| 
[2015-05-18 22:55:31][DEBUG]: The message is valid
[2015-05-18 22:55:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 151 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280740 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:55:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280740,9,6);					
[2015-05-18 22:55:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:55:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:55:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:55:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:55:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:55:36][DEBUG]: Message lu : size : 16
[2015-05-18 22:55:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 98 F0 00 00 5A 00 00 00 00 00 53 BB 5D 79 00 00 00| 
[2015-05-18 22:55:36][DEBUG]: The message is valid
[2015-05-18 22:55:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 152 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:55:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),152,90,0,0,9,7);					
[2015-05-18 22:55:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:55:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:55:50][DEBUG]: Message lu : size : 16
[2015-05-18 22:55:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 99 F0 00 00 5A 00 00 00 00 00 53 BB 5D 79 00 00 00| 
[2015-05-18 22:55:50][DEBUG]: The message is valid
[2015-05-18 22:55:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 153 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:55:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),153,90,0,0,9,7);					
[2015-05-18 22:55:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:55:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:56:04][DEBUG]: Message lu : size : 16
[2015-05-18 22:56:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 9A F0 00 00 5A 00 00 00 00 00 53 BB 5D 79 00 00 00| 
[2015-05-18 22:56:04][DEBUG]: The message is valid
[2015-05-18 22:56:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 154 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:56:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),154,90,0,0,9,7);					
[2015-05-18 22:56:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:56:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:56:18][DEBUG]: Message lu : size : 16
[2015-05-18 22:56:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 9B F0 00 00 5A 00 00 00 00 00 53 BB 5D 79 00 00 00| 
[2015-05-18 22:56:18][DEBUG]: The message is valid
[2015-05-18 22:56:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 155 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:56:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),155,90,0,0,9,7);					
[2015-05-18 22:56:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:56:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:56:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:56:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:56:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:56:24][DEBUG]: MYSQL = 1
[2015-05-18 22:56:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:56:24][DEBUG]: PORT = 3306
[2015-05-18 22:56:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:56:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:56:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:56:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:56:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:56:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:56:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:56:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:56:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:56:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:56:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:56:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:56:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:56:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:56:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:56:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:56:24][DEBUG]: MDB_ID = 
[2015-05-18 22:56:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:56:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:56:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:56:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:56:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:56:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:56:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:56:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:56:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:56:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:56:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:53:48 

[2015-05-18 22:56:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:56:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:56:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:56:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:56:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:56:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:56:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:56:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:56:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:56:25][DEBUG]: The message is valid
[2015-05-18 22:56:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:56:25][DEBUG]: Not Suported yet
[2015-05-18 22:56:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:56:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 9C 89 F2 00 00 00 01 21 00 00 53 BB 61 E6 69 00 00| 
[2015-05-18 22:56:31][DEBUG]: The message is valid
[2015-05-18 22:56:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 156 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 289 
 Total: 6280745 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:56:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 289 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=289;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,289,6280745,9,6);					
[2015-05-18 22:56:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:56:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:56:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:56:31][DEBUG]: ISS POST DATA : [{ "value": "289" }]
[2015-05-18 22:56:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:56:32][DEBUG]: Message lu : size : 16
[2015-05-18 22:56:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 9D F0 00 00 5A 00 00 00 00 00 53 BB 61 79 00 00 00| 
[2015-05-18 22:56:32][DEBUG]: The message is valid
[2015-05-18 22:56:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 157 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:56:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),157,90,0,0,9,7);					
[2015-05-18 22:56:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:56:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:56:46][DEBUG]: Message lu : size : 16
[2015-05-18 22:56:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 9E F0 00 00 5A 00 00 00 00 00 53 BB 61 79 00 00 00| 
[2015-05-18 22:56:46][DEBUG]: The message is valid
[2015-05-18 22:56:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 158 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:56:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),158,90,0,0,9,7);					
[2015-05-18 22:56:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:56:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:57:00][DEBUG]: Message lu : size : 16
[2015-05-18 22:57:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 9F F0 00 00 5A 00 00 00 00 00 53 BB 61 79 00 00 00| 
[2015-05-18 22:57:00][DEBUG]: The message is valid
[2015-05-18 22:57:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 159 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:57:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),159,90,0,0,9,7);					
[2015-05-18 22:57:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:57:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:57:07][DEBUG]: Message lu : size : 17
[2015-05-18 22:57:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A0 89 F2 02 00 00 01 62 00 00 00 00 00 00 69 00 00| 
[2015-05-18 22:57:07][DEBUG]: The message is valid
[2015-05-18 22:57:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 160 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 354 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:57:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,354,0,9,6);					
[2015-05-18 22:57:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:57:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:57:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:57:07][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 22:57:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:57:14][DEBUG]: Message lu : size : 16
[2015-05-18 22:57:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 A1 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:57:14][DEBUG]: The message is valid
[2015-05-18 22:57:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 161 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:57:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),161,90,0,0,9,7);					
[2015-05-18 22:57:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:57:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:57:19][DEBUG]: Message lu : size : 17
[2015-05-18 22:57:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A2 89 F2 01 00 00 01 62 00 00 00 00 00 00 69 00 00| 
[2015-05-18 22:57:19][DEBUG]: The message is valid
[2015-05-18 22:57:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 162 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 354 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:57:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,354,0,9,6);					
[2015-05-18 22:57:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:57:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:57:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:57:19][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 22:57:20][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:57:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:57:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:57:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:57:24][DEBUG]: MYSQL = 1
[2015-05-18 22:57:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:57:24][DEBUG]: PORT = 3306
[2015-05-18 22:57:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:57:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:57:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:57:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:57:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:57:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:57:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:57:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:57:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:57:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:57:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:57:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:57:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:57:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:57:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:57:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:57:24][DEBUG]: MDB_ID = 
[2015-05-18 22:57:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:57:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:57:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:57:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:57:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:57:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:57:24][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:57:24][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:57:24][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:57:24][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:57:24][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:53:48 

[2015-05-18 22:57:24][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:57:24][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:57:24][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:57:24][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:57:24][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:57:24][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:57:24][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:57:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:57:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:57:25][DEBUG]: The message is valid
[2015-05-18 22:57:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:57:25][DEBUG]: Not Suported yet
[2015-05-18 22:57:28][DEBUG]: Message lu : size : 16
[2015-05-18 22:57:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 A3 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 22:57:28][DEBUG]: The message is valid
[2015-05-18 22:57:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 163 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:57:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),163,90,0,0,9,7);					
[2015-05-18 22:57:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:57:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:57:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:57:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A4 89 F2 00 00 00 01 62 00 00 53 BB 66 B4 69 00 00| 
[2015-05-18 22:57:31][DEBUG]: The message is valid
[2015-05-18 22:57:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 164 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280750 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:57:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280750,9,6);					
[2015-05-18 22:57:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:57:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:57:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:57:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 22:57:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:57:42][DEBUG]: Message lu : size : 16
[2015-05-18 22:57:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 A5 F0 00 00 5A 00 00 00 00 00 53 BB 66 79 00 00 00| 
[2015-05-18 22:57:42][DEBUG]: The message is valid
[2015-05-18 22:57:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 165 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:57:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),165,90,0,0,9,7);					
[2015-05-18 22:57:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:57:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:57:56][DEBUG]: Message lu : size : 16
[2015-05-18 22:57:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 A6 F0 00 00 5A 00 00 00 00 00 53 BB 66 79 00 00 00| 
[2015-05-18 22:57:56][DEBUG]: The message is valid
[2015-05-18 22:57:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 166 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:57:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),166,90,0,0,9,7);					
[2015-05-18 22:57:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:57:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:58:10][DEBUG]: Message lu : size : 16
[2015-05-18 22:58:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 A7 F0 00 00 5A 00 00 00 00 00 53 BB 66 79 00 00 00| 
[2015-05-18 22:58:10][DEBUG]: The message is valid
[2015-05-18 22:58:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 167 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:58:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),167,90,0,0,9,7);					
[2015-05-18 22:58:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:58:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:58:24][DEBUG]: Message lu : size : 16
[2015-05-18 22:58:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 A8 F0 00 00 5A 00 00 00 00 00 53 BB 66 79 00 00 00| 
[2015-05-18 22:58:24][DEBUG]: The message is valid
[2015-05-18 22:58:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 168 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:58:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),168,90,0,0,9,7);					
[2015-05-18 22:58:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:58:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:58:24][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:58:24][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:58:24][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:58:24][DEBUG]: MYSQL = 1
[2015-05-18 22:58:24][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:58:24][DEBUG]: PORT = 3306
[2015-05-18 22:58:24][DEBUG]: LOGIN = mydombox
[2015-05-18 22:58:24][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:58:24][DEBUG]: DATABASE = mydombox
[2015-05-18 22:58:24][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:58:24][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:58:24][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:58:24][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:58:24][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:58:24][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:58:24][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:58:24][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:58:24][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:58:24][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:58:24][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:58:24][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:58:24][DEBUG]: MDB_KEY = 
[2015-05-18 22:58:24][DEBUG]: MDB_ID = 
[2015-05-18 22:58:24][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:58:24][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:58:24][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:58:24][DEBUG]: --------------------------------------------------------

[2015-05-18 22:58:24][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:58:24][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:58:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:58:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:58:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:58:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:58:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:53:48 

[2015-05-18 22:58:25][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:58:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:58:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:58:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:58:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:58:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:58:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:58:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:58:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:58:25][DEBUG]: The message is valid
[2015-05-18 22:58:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:58:25][DEBUG]: Not Suported yet
[2015-05-18 22:58:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:58:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A9 89 F2 00 00 00 01 62 00 00 53 BB 6B E2 69 00 00| 
[2015-05-18 22:58:31][DEBUG]: The message is valid
[2015-05-18 22:58:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 169 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280756 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:58:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280756,9,6);					
[2015-05-18 22:58:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:58:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:58:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:58:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 22:58:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:58:38][DEBUG]: Message lu : size : 16
[2015-05-18 22:58:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 AA F0 00 00 5A 00 00 00 00 00 53 BB 6B 79 00 00 00| 
[2015-05-18 22:58:38][DEBUG]: The message is valid
[2015-05-18 22:58:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 170 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:58:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),170,90,0,0,9,7);					
[2015-05-18 22:58:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:58:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:58:52][DEBUG]: Message lu : size : 16
[2015-05-18 22:58:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 AB F0 00 00 5A 00 00 00 00 00 53 BB 6B 79 00 00 00| 
[2015-05-18 22:58:52][DEBUG]: The message is valid
[2015-05-18 22:58:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 171 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:58:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),171,90,0,0,9,7);					
[2015-05-18 22:58:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:58:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:59:06][DEBUG]: Message lu : size : 16
[2015-05-18 22:59:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 AC F0 00 00 5A 00 00 00 00 00 53 BB 6B 79 00 00 00| 
[2015-05-18 22:59:06][DEBUG]: The message is valid
[2015-05-18 22:59:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 172 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:59:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),172,90,0,0,9,7);					
[2015-05-18 22:59:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:59:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:59:08][DEBUG]: Message lu : size : 9
[2015-05-18 22:59:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 AD 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:59:08][DEBUG]: The message is valid
[2015-05-18 22:59:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 173 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 22:59:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),173,21,21,'Heating','Demand',6);					
[2015-05-18 22:59:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 22:59:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:59:20][DEBUG]: Message lu : size : 16
[2015-05-18 22:59:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 AE F0 00 00 5A 00 00 00 00 00 53 BB 6B 79 00 00 00| 
[2015-05-18 22:59:20][DEBUG]: The message is valid
[2015-05-18 22:59:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 174 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:59:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),174,90,0,0,9,7);					
[2015-05-18 22:59:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:59:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:59:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 22:59:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 22:59:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 22:59:25][DEBUG]: MYSQL = 1
[2015-05-18 22:59:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 22:59:25][DEBUG]: PORT = 3306
[2015-05-18 22:59:25][DEBUG]: LOGIN = mydombox
[2015-05-18 22:59:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 22:59:25][DEBUG]: DATABASE = mydombox
[2015-05-18 22:59:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 22:59:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 22:59:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 22:59:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 22:59:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 22:59:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 22:59:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 22:59:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 22:59:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 22:59:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 22:59:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 22:59:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 22:59:25][DEBUG]: MDB_KEY = 
[2015-05-18 22:59:25][DEBUG]: MDB_ID = 
[2015-05-18 22:59:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 22:59:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 22:59:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 22:59:25][DEBUG]: --------------------------------------------------------

[2015-05-18 22:59:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 22:59:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:59:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 22:59:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 22:59:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 22:59:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 22:59:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 22:59:25][DEBUG]: Thermostat_Calc: Consigne= 20.00 last= 21.00
[2015-05-18 22:59:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 22:59:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 20.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 22:59:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 22:59:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 22:59:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 14 02 09 00 00 20 1C 00
[2015-05-18 22:59:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 22:59:25][DEBUG]: Message lu : size : 4
[2015-05-18 22:59:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 22:59:25][DEBUG]: The message is valid
[2015-05-18 22:59:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 22:59:25][DEBUG]: Not Suported yet
[2015-05-18 22:59:31][DEBUG]: Message lu : size : 17
[2015-05-18 22:59:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 AF 89 F2 00 00 00 01 72 00 00 53 BB 71 28 69 00 00| 
[2015-05-18 22:59:31][DEBUG]: The message is valid
[2015-05-18 22:59:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 175 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 370 
 Total: 6280762 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 22:59:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 370 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=370;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,370,6280762,9,6);					
[2015-05-18 22:59:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 22:59:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 22:59:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 22:59:31][DEBUG]: ISS POST DATA : [{ "value": "370" }]
[2015-05-18 22:59:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 22:59:34][DEBUG]: Message lu : size : 16
[2015-05-18 22:59:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 B0 F0 00 00 5A 00 00 00 00 00 53 BB 71 79 00 00 00| 
[2015-05-18 22:59:34][DEBUG]: The message is valid
[2015-05-18 22:59:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 176 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:59:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),176,90,0,0,9,7);					
[2015-05-18 22:59:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:59:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 22:59:48][DEBUG]: Message lu : size : 16
[2015-05-18 22:59:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 B1 F0 00 00 5A 00 00 00 00 00 53 BB 71 79 00 00 00| 
[2015-05-18 22:59:48][DEBUG]: The message is valid
[2015-05-18 22:59:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 177 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 22:59:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),177,90,0,0,9,7);					
[2015-05-18 22:59:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 22:59:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:00:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:00:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 B2 F0 00 00 5A 00 00 00 00 00 53 BB 71 79 00 00 00| 
[2015-05-18 23:00:02][DEBUG]: The message is valid
[2015-05-18 23:00:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 178 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:00:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),178,90,0,0,9,7);					
[2015-05-18 23:00:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:00:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:00:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:00:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 B3 F0 00 00 5A 00 00 00 00 00 53 BB 71 79 00 00 00| 
[2015-05-18 23:00:16][DEBUG]: The message is valid
[2015-05-18 23:00:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 179 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:00:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),179,90,0,0,9,7);					
[2015-05-18 23:00:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:00:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:00:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:00:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:00:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:00:25][DEBUG]: MYSQL = 1
[2015-05-18 23:00:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:00:25][DEBUG]: PORT = 3306
[2015-05-18 23:00:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:00:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:00:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:00:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:00:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:00:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:00:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:00:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:00:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:00:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:00:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:00:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:00:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:00:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:00:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:00:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:00:25][DEBUG]: MDB_ID = 
[2015-05-18 23:00:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:00:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:00:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:00:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:00:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:00:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:00:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:00:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:00:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:00:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:00:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 23:00:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:00:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:00:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:00:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:00:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:00:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:00:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:00:25][DEBUG]: Message lu : size : 4
[2015-05-18 23:00:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:00:25][DEBUG]: The message is valid
[2015-05-18 23:00:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:00:25][DEBUG]: Not Suported yet
[2015-05-18 23:00:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:00:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 B4 F0 00 00 5A 00 00 00 00 00 53 BB 71 79 00 00 00| 
[2015-05-18 23:00:30][DEBUG]: The message is valid
[2015-05-18 23:00:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 180 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:00:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),180,90,0,0,9,7);					
[2015-05-18 23:00:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:00:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:00:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:00:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 B5 89 F2 00 00 00 01 72 00 00 53 BB 76 68 69 00 00| 
[2015-05-18 23:00:31][DEBUG]: The message is valid
[2015-05-18 23:00:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 181 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 370 
 Total: 6280768 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:00:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 370 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=370;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,370,6280768,9,6);					
[2015-05-18 23:00:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:00:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:00:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:00:31][DEBUG]: ISS POST DATA : [{ "value": "370" }]
[2015-05-18 23:00:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:00:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:00:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 B6 F0 00 00 5A 00 00 00 00 00 53 BB 76 79 00 00 00| 
[2015-05-18 23:00:44][DEBUG]: The message is valid
[2015-05-18 23:00:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 182 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:00:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),182,90,0,0,9,7);					
[2015-05-18 23:00:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:00:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:00:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:00:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 B7 F0 00 00 5A 00 00 00 00 00 53 BB 76 79 00 00 00| 
[2015-05-18 23:00:58][DEBUG]: The message is valid
[2015-05-18 23:00:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 183 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:00:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),183,90,0,0,9,7);					
[2015-05-18 23:00:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:00:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:01:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:01:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 B8 F0 00 00 5A 00 00 00 00 00 53 BB 76 79 00 00 00| 
[2015-05-18 23:01:12][DEBUG]: The message is valid
[2015-05-18 23:01:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 184 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:01:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),184,90,0,0,9,7);					
[2015-05-18 23:01:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:01:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:01:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:01:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:01:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:01:25][DEBUG]: MYSQL = 1
[2015-05-18 23:01:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:01:25][DEBUG]: PORT = 3306
[2015-05-18 23:01:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:01:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:01:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:01:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:01:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:01:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:01:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:01:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:01:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:01:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:01:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:01:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:01:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:01:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:01:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:01:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:01:25][DEBUG]: MDB_ID = 
[2015-05-18 23:01:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:01:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:01:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:01:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:01:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:01:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:01:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:01:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:01:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:01:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:01:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 23:01:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:01:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:01:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:01:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:01:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:01:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:01:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:01:25][DEBUG]: Message lu : size : 4
[2015-05-18 23:01:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:01:25][DEBUG]: The message is valid
[2015-05-18 23:01:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:01:25][DEBUG]: Not Suported yet
[2015-05-18 23:01:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:01:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 B9 F0 00 00 5A 00 00 00 00 00 53 BB 76 79 00 00 00| 
[2015-05-18 23:01:26][DEBUG]: The message is valid
[2015-05-18 23:01:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 185 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:01:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),185,90,0,0,9,7);					
[2015-05-18 23:01:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:01:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:01:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:01:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 BA 89 F2 00 00 00 01 62 00 00 53 BB 7B 96 69 00 00| 
[2015-05-18 23:01:31][DEBUG]: The message is valid
[2015-05-18 23:01:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 186 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280774 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:01:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280774,9,6);					
[2015-05-18 23:01:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:01:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:01:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:01:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:01:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:01:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:01:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 BB F0 00 00 5A 00 00 00 00 00 53 BB 7B 79 00 00 00| 
[2015-05-18 23:01:40][DEBUG]: The message is valid
[2015-05-18 23:01:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 187 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:01:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),187,90,0,0,9,7);					
[2015-05-18 23:01:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:01:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:01:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:01:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 BC F0 00 00 5A 00 00 00 00 00 53 BB 7B 79 00 00 00| 
[2015-05-18 23:01:54][DEBUG]: The message is valid
[2015-05-18 23:01:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 188 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:01:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),188,90,0,0,9,7);					
[2015-05-18 23:01:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:01:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:02:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:02:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 BD F0 00 00 5A 00 00 00 00 00 53 BB 7B 79 00 00 00| 
[2015-05-18 23:02:08][DEBUG]: The message is valid
[2015-05-18 23:02:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 189 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:02:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),189,90,0,0,9,7);					
[2015-05-18 23:02:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:02:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:02:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:02:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 BE F0 00 00 5A 00 00 00 00 00 53 BB 7B 79 00 00 00| 
[2015-05-18 23:02:22][DEBUG]: The message is valid
[2015-05-18 23:02:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 190 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:02:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),190,90,0,0,9,7);					
[2015-05-18 23:02:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:02:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:02:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:02:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:02:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:02:25][DEBUG]: MYSQL = 1
[2015-05-18 23:02:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:02:25][DEBUG]: PORT = 3306
[2015-05-18 23:02:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:02:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:02:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:02:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:02:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:02:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:02:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:02:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:02:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:02:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:02:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:02:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:02:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:02:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:02:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:02:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:02:25][DEBUG]: MDB_ID = 
[2015-05-18 23:02:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:02:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:02:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:02:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:02:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:02:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:02:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:02:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:02:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:02:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:02:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 23:02:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:02:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:02:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:02:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:02:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:02:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:02:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:02:25][DEBUG]: Message lu : size : 4
[2015-05-18 23:02:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:02:25][DEBUG]: The message is valid
[2015-05-18 23:02:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:02:25][DEBUG]: Not Suported yet
[2015-05-18 23:02:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:02:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 BF 89 F2 00 00 00 01 62 00 00 53 BB 80 BE 69 00 00| 
[2015-05-18 23:02:31][DEBUG]: The message is valid
[2015-05-18 23:02:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 191 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280780 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:02:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280780,9,6);					
[2015-05-18 23:02:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:02:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:02:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:02:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:02:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:02:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:02:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 C0 F0 00 00 5A 00 00 00 00 00 53 BB 80 79 00 00 00| 
[2015-05-18 23:02:36][DEBUG]: The message is valid
[2015-05-18 23:02:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 192 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:02:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),192,90,0,0,9,7);					
[2015-05-18 23:02:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:02:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:02:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:02:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 C1 F0 00 00 5A 00 00 00 00 00 53 BB 80 79 00 00 00| 
[2015-05-18 23:02:50][DEBUG]: The message is valid
[2015-05-18 23:02:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 193 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:02:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),193,90,0,0,9,7);					
[2015-05-18 23:02:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:02:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:03:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:03:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 C2 F0 00 00 5A 00 00 00 00 00 53 BB 80 79 00 00 00| 
[2015-05-18 23:03:04][DEBUG]: The message is valid
[2015-05-18 23:03:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 194 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:03:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),194,90,0,0,9,7);					
[2015-05-18 23:03:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:03:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:03:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:03:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 C3 F0 00 00 5A 00 00 00 00 00 53 BB 80 79 00 00 00| 
[2015-05-18 23:03:18][DEBUG]: The message is valid
[2015-05-18 23:03:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 195 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:03:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),195,90,0,0,9,7);					
[2015-05-18 23:03:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:03:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:03:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:03:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:03:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:03:25][DEBUG]: MYSQL = 1
[2015-05-18 23:03:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:03:25][DEBUG]: PORT = 3306
[2015-05-18 23:03:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:03:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:03:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:03:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:03:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:03:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:03:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:03:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:03:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:03:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:03:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:03:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:03:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:03:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:03:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:03:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:03:25][DEBUG]: MDB_ID = 
[2015-05-18 23:03:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:03:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:03:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:03:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:03:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:03:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:03:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:03:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:03:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:03:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:03:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 23:03:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:03:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:03:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:03:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:03:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:03:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:03:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:03:25][DEBUG]: Message lu : size : 4
[2015-05-18 23:03:25][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:03:25][DEBUG]: The message is valid
[2015-05-18 23:03:25][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:03:25][DEBUG]: Not Suported yet
[2015-05-18 23:03:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:03:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 C4 89 F2 00 00 00 01 62 00 00 53 BB 85 E6 69 00 00| 
[2015-05-18 23:03:31][DEBUG]: The message is valid
[2015-05-18 23:03:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 196 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280786 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:03:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280786,9,6);					
[2015-05-18 23:03:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:03:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:03:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:03:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:03:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:03:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:03:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 C5 F0 00 00 5A 00 00 00 00 00 53 BB 85 79 00 00 00| 
[2015-05-18 23:03:32][DEBUG]: The message is valid
[2015-05-18 23:03:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 197 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:03:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),197,90,0,0,9,7);					
[2015-05-18 23:03:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:03:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:03:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:03:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 C6 F0 00 00 5A 00 00 00 00 00 53 BB 85 79 00 00 00| 
[2015-05-18 23:03:46][DEBUG]: The message is valid
[2015-05-18 23:03:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 198 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:03:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),198,90,0,0,9,7);					
[2015-05-18 23:03:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:03:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:04:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 C7 F0 00 00 5A 00 00 00 00 00 53 BB 85 79 00 00 00| 
[2015-05-18 23:04:00][DEBUG]: The message is valid
[2015-05-18 23:04:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 199 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:04:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),199,90,0,0,9,7);					
[2015-05-18 23:04:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:04:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:04:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 C8 F0 00 00 5A 00 00 00 00 00 53 BB 85 79 00 00 00| 
[2015-05-18 23:04:14][DEBUG]: The message is valid
[2015-05-18 23:04:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 200 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:04:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),200,90,0,0,9,7);					
[2015-05-18 23:04:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:04:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:04:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:04:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:04:25][DEBUG]: MYSQL = 1
[2015-05-18 23:04:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:04:25][DEBUG]: PORT = 3306
[2015-05-18 23:04:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:04:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:04:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:04:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:04:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:04:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:04:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:04:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:04:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:04:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:04:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:04:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:04:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:04:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:04:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:04:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:04:25][DEBUG]: MDB_ID = 
[2015-05-18 23:04:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:04:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:04:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:04:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:04:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:04:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:04:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:04:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:04:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:04:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:04:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 22:59:08 

[2015-05-18 23:04:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:04:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:04:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:04:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:04:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:04:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:04:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:04:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:04:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:04:26][DEBUG]: The message is valid
[2015-05-18 23:04:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:04:26][DEBUG]: Not Suported yet
[2015-05-18 23:04:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:04:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 C9 F0 00 00 5A 00 00 00 00 00 53 BB 85 79 00 00 00| 
[2015-05-18 23:04:28][DEBUG]: The message is valid
[2015-05-18 23:04:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 201 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:04:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),201,90,0,0,9,7);					
[2015-05-18 23:04:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:04:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:28][DEBUG]: Message lu : size : 9
[2015-05-18 23:04:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 CA 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:04:28][DEBUG]: The message is valid
[2015-05-18 23:04:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 202 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:04:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),202,21,21,'Heating','Demand',6);					
[2015-05-18 23:04:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:04:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:04:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 CB 89 F2 00 00 00 01 62 00 00 53 BB 8B 0E 69 00 00| 
[2015-05-18 23:04:31][DEBUG]: The message is valid
[2015-05-18 23:04:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 203 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280792 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:04:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280792,9,6);					
[2015-05-18 23:04:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:04:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:04:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:04:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:04:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:04:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:04:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 CC F0 00 00 5A 00 00 00 00 00 53 BB 8B 79 00 00 00| 
[2015-05-18 23:04:42][DEBUG]: The message is valid
[2015-05-18 23:04:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 204 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:04:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),204,90,0,0,9,7);					
[2015-05-18 23:04:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:04:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:04:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:04:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 CD F0 00 00 5A 00 00 00 00 00 53 BB 8B 79 00 00 00| 
[2015-05-18 23:04:56][DEBUG]: The message is valid
[2015-05-18 23:04:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 205 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:04:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),205,90,0,0,9,7);					
[2015-05-18 23:04:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:04:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:05:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:05:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 CE F0 00 00 5A 00 00 00 00 00 53 BB 8B 79 00 00 00| 
[2015-05-18 23:05:10][DEBUG]: The message is valid
[2015-05-18 23:05:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 206 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:05:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),206,90,0,0,9,7);					
[2015-05-18 23:05:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:05:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:05:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:05:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 CF F0 00 00 5A 00 00 00 00 00 53 BB 8B 79 00 00 00| 
[2015-05-18 23:05:24][DEBUG]: The message is valid
[2015-05-18 23:05:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 207 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:05:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),207,90,0,0,9,7);					
[2015-05-18 23:05:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:05:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:05:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:05:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:05:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:05:25][DEBUG]: MYSQL = 1
[2015-05-18 23:05:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:05:25][DEBUG]: PORT = 3306
[2015-05-18 23:05:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:05:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:05:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:05:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:05:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:05:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:05:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:05:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:05:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:05:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:05:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:05:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:05:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:05:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:05:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:05:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:05:25][DEBUG]: MDB_ID = 
[2015-05-18 23:05:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:05:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:05:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:05:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:05:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:05:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:05:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:05:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:05:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:05:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:05:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:04:28 

[2015-05-18 23:05:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:05:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:05:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:05:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:05:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:05:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:05:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:05:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:05:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:05:26][DEBUG]: The message is valid
[2015-05-18 23:05:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:05:26][DEBUG]: Not Suported yet
[2015-05-18 23:05:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:05:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D0 89 F2 00 00 00 01 62 00 00 53 BB 90 36 69 00 00| 
[2015-05-18 23:05:31][DEBUG]: The message is valid
[2015-05-18 23:05:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 208 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280798 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:05:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280798,9,6);					
[2015-05-18 23:05:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:05:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:05:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:05:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:05:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:05:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:05:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 D1 F0 00 00 5A 00 00 00 00 00 53 BB 90 79 00 00 00| 
[2015-05-18 23:05:38][DEBUG]: The message is valid
[2015-05-18 23:05:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 209 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:05:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),209,90,0,0,9,7);					
[2015-05-18 23:05:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:05:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:05:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:05:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 D2 F0 00 00 5A 00 00 00 00 00 53 BB 90 79 00 00 00| 
[2015-05-18 23:05:52][DEBUG]: The message is valid
[2015-05-18 23:05:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 210 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:05:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),210,90,0,0,9,7);					
[2015-05-18 23:05:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:05:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:06:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:06:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 D3 F0 00 00 5A 00 00 00 00 00 53 BB 90 79 00 00 00| 
[2015-05-18 23:06:06][DEBUG]: The message is valid
[2015-05-18 23:06:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 211 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:06:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),211,90,0,0,9,7);					
[2015-05-18 23:06:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:06:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:06:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:06:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 D4 F0 00 00 5A 00 00 00 00 00 53 BB 90 79 00 00 00| 
[2015-05-18 23:06:20][DEBUG]: The message is valid
[2015-05-18 23:06:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 212 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:06:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),212,90,0,0,9,7);					
[2015-05-18 23:06:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:06:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:06:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:06:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:06:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:06:25][DEBUG]: MYSQL = 1
[2015-05-18 23:06:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:06:25][DEBUG]: PORT = 3306
[2015-05-18 23:06:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:06:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:06:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:06:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:06:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:06:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:06:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:06:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:06:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:06:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:06:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:06:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:06:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:06:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:06:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:06:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:06:25][DEBUG]: MDB_ID = 
[2015-05-18 23:06:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:06:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:06:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:06:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:06:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:06:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:06:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:06:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:06:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:06:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:06:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:04:28 

[2015-05-18 23:06:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:06:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:06:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:06:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:06:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:06:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:06:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:06:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:06:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:06:26][DEBUG]: The message is valid
[2015-05-18 23:06:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:06:26][DEBUG]: Not Suported yet
[2015-05-18 23:06:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:06:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D5 89 F2 00 00 00 01 62 00 00 53 BB 95 5E 69 00 00| 
[2015-05-18 23:06:31][DEBUG]: The message is valid
[2015-05-18 23:06:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 213 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280804 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:06:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280804,9,6);					
[2015-05-18 23:06:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:06:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:06:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:06:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:06:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:06:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:06:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 D6 F0 00 00 5A 00 00 00 00 00 53 BB 95 79 00 00 00| 
[2015-05-18 23:06:34][DEBUG]: The message is valid
[2015-05-18 23:06:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 214 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:06:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),214,90,0,0,9,7);					
[2015-05-18 23:06:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:06:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:06:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:06:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 D7 F0 00 00 5A 00 00 00 00 00 53 BB 95 79 00 00 00| 
[2015-05-18 23:06:48][DEBUG]: The message is valid
[2015-05-18 23:06:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 215 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:06:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),215,90,0,0,9,7);					
[2015-05-18 23:06:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:06:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:07:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:07:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 D8 F0 00 00 5A 00 00 00 00 00 53 BB 95 79 00 00 00| 
[2015-05-18 23:07:02][DEBUG]: The message is valid
[2015-05-18 23:07:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 216 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:07:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),216,90,0,0,9,7);					
[2015-05-18 23:07:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:07:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:07:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:07:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 D9 F0 00 00 5A 00 00 00 00 00 53 BB 95 79 00 00 00| 
[2015-05-18 23:07:16][DEBUG]: The message is valid
[2015-05-18 23:07:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 217 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:07:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),217,90,0,0,9,7);					
[2015-05-18 23:07:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:07:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:07:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:07:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:07:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:07:25][DEBUG]: MYSQL = 1
[2015-05-18 23:07:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:07:25][DEBUG]: PORT = 3306
[2015-05-18 23:07:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:07:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:07:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:07:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:07:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:07:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:07:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:07:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:07:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:07:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:07:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:07:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:07:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:07:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:07:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:07:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:07:25][DEBUG]: MDB_ID = 
[2015-05-18 23:07:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:07:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:07:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:07:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:07:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:07:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:07:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:07:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:07:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:07:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:07:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:04:28 

[2015-05-18 23:07:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:07:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:07:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:07:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:07:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:07:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:07:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:07:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:07:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:07:26][DEBUG]: The message is valid
[2015-05-18 23:07:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:07:26][DEBUG]: Not Suported yet
[2015-05-18 23:07:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:07:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 DA F0 00 00 5A 00 00 00 00 00 53 BB 95 79 00 00 00| 
[2015-05-18 23:07:30][DEBUG]: The message is valid
[2015-05-18 23:07:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 218 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:07:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),218,90,0,0,9,7);					
[2015-05-18 23:07:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:07:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:07:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:07:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 DB 89 F2 00 00 00 01 62 00 00 53 BB 9A 86 69 00 00| 
[2015-05-18 23:07:31][DEBUG]: The message is valid
[2015-05-18 23:07:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 219 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280810 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:07:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280810,9,6);					
[2015-05-18 23:07:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:07:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:07:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:07:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:07:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:07:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:07:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 DC F0 00 00 5A 00 00 00 00 00 53 BB 9A 79 00 00 00| 
[2015-05-18 23:07:44][DEBUG]: The message is valid
[2015-05-18 23:07:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 220 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:07:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),220,90,0,0,9,7);					
[2015-05-18 23:07:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:07:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:07:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:07:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 DD F0 00 00 5A 00 00 00 00 00 53 BB 9A 79 00 00 00| 
[2015-05-18 23:07:58][DEBUG]: The message is valid
[2015-05-18 23:07:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 221 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:07:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),221,90,0,0,9,7);					
[2015-05-18 23:07:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:07:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:08:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:08:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 DE F0 00 00 5A 00 00 00 00 00 53 BB 9A 79 00 00 00| 
[2015-05-18 23:08:12][DEBUG]: The message is valid
[2015-05-18 23:08:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 222 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:08:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),222,90,0,0,9,7);					
[2015-05-18 23:08:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:08:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:08:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:08:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:08:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:08:25][DEBUG]: MYSQL = 1
[2015-05-18 23:08:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:08:25][DEBUG]: PORT = 3306
[2015-05-18 23:08:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:08:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:08:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:08:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:08:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:08:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:08:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:08:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:08:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:08:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:08:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:08:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:08:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:08:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:08:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:08:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:08:25][DEBUG]: MDB_ID = 
[2015-05-18 23:08:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:08:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:08:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:08:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:08:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:08:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:08:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:08:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:08:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:08:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:08:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:04:28 

[2015-05-18 23:08:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:08:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:08:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:08:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:08:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:08:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:08:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:08:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:08:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:08:26][DEBUG]: The message is valid
[2015-05-18 23:08:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:08:26][DEBUG]: Not Suported yet
[2015-05-18 23:08:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:08:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 DF 89 F2 00 00 00 01 62 00 00 53 BB 9F AE 69 00 00| 
[2015-05-18 23:08:31][DEBUG]: The message is valid
[2015-05-18 23:08:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 223 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280816 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:08:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280816,9,6);					
[2015-05-18 23:08:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:08:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:08:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:08:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:08:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:08:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:08:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 E0 F0 00 00 5A 00 00 00 00 00 53 BB 9F 79 00 00 00| 
[2015-05-18 23:08:40][DEBUG]: The message is valid
[2015-05-18 23:08:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 224 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:08:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),224,90,0,0,9,7);					
[2015-05-18 23:08:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:08:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:08:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:08:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 E1 F0 00 00 5A 00 00 00 00 00 53 BB 9F 79 00 00 00| 
[2015-05-18 23:08:54][DEBUG]: The message is valid
[2015-05-18 23:08:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 225 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:08:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),225,90,0,0,9,7);					
[2015-05-18 23:08:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:08:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:09:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:09:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 E2 F0 00 00 5A 00 00 00 00 00 53 BB 9F 79 00 00 00| 
[2015-05-18 23:09:08][DEBUG]: The message is valid
[2015-05-18 23:09:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 226 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:09:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),226,90,0,0,9,7);					
[2015-05-18 23:09:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:09:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:09:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:09:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 E3 F0 00 00 5A 00 00 00 00 00 53 BB 9F 79 00 00 00| 
[2015-05-18 23:09:22][DEBUG]: The message is valid
[2015-05-18 23:09:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 227 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:09:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),227,90,0,0,9,7);					
[2015-05-18 23:09:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:09:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:09:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:09:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:09:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:09:25][DEBUG]: MYSQL = 1
[2015-05-18 23:09:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:09:25][DEBUG]: PORT = 3306
[2015-05-18 23:09:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:09:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:09:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:09:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:09:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:09:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:09:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:09:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:09:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:09:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:09:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:09:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:09:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:09:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:09:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:09:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:09:25][DEBUG]: MDB_ID = 
[2015-05-18 23:09:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:09:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:09:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:09:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:09:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:09:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:09:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:09:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:09:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:09:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:09:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:04:28 

[2015-05-18 23:09:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:09:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:09:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:09:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:09:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:09:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:09:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:09:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:09:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:09:26][DEBUG]: The message is valid
[2015-05-18 23:09:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:09:26][DEBUG]: Not Suported yet
[2015-05-18 23:09:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:09:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 E4 89 F2 00 00 00 01 62 00 00 53 BB A4 D0 69 00 00| 
[2015-05-18 23:09:31][DEBUG]: The message is valid
[2015-05-18 23:09:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 228 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280822 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:09:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280822,9,6);					
[2015-05-18 23:09:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:09:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:09:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:09:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:09:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:09:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:09:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 E5 F0 00 00 5A 00 00 00 00 00 53 BB A4 79 00 00 00| 
[2015-05-18 23:09:36][DEBUG]: The message is valid
[2015-05-18 23:09:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 229 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:09:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),229,90,0,0,9,7);					
[2015-05-18 23:09:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:09:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:09:48][DEBUG]: Message lu : size : 9
[2015-05-18 23:09:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 E6 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:09:48][DEBUG]: The message is valid
[2015-05-18 23:09:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 230 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:09:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),230,21,21,'Heating','Demand',6);					
[2015-05-18 23:09:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:09:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:09:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:09:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 E7 F0 00 00 5A 00 00 00 00 00 53 BB A4 79 00 00 00| 
[2015-05-18 23:09:50][DEBUG]: The message is valid
[2015-05-18 23:09:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 231 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:09:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),231,90,0,0,9,7);					
[2015-05-18 23:09:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:09:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:10:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:10:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 E8 F0 00 00 5A 00 00 00 00 00 53 BB A4 79 00 00 00| 
[2015-05-18 23:10:04][DEBUG]: The message is valid
[2015-05-18 23:10:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 232 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:10:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),232,90,0,0,9,7);					
[2015-05-18 23:10:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:10:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:10:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:10:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 E9 F0 00 00 5A 00 00 00 00 00 53 BB A4 79 00 00 00| 
[2015-05-18 23:10:18][DEBUG]: The message is valid
[2015-05-18 23:10:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 233 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:10:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),233,90,0,0,9,7);					
[2015-05-18 23:10:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:10:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:10:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:10:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:10:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:10:25][DEBUG]: MYSQL = 1
[2015-05-18 23:10:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:10:25][DEBUG]: PORT = 3306
[2015-05-18 23:10:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:10:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:10:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:10:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:10:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:10:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:10:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:10:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:10:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:10:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:10:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:10:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:10:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:10:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:10:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:10:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:10:25][DEBUG]: MDB_ID = 
[2015-05-18 23:10:25][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:10:25][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:10:25][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:10:25][DEBUG]: --------------------------------------------------------

[2015-05-18 23:10:25][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:10:25][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:10:25][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:10:25][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:10:25][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:10:25][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:10:25][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:09:48 

[2015-05-18 23:10:25][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:10:25][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:10:25][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:10:25][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:10:25][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:10:25][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:10:25][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:10:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:10:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:10:26][DEBUG]: The message is valid
[2015-05-18 23:10:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:10:26][DEBUG]: Not Suported yet
[2015-05-18 23:10:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:10:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 EA 89 F2 00 00 00 01 62 00 00 53 BB A9 F8 69 00 00| 
[2015-05-18 23:10:31][DEBUG]: The message is valid
[2015-05-18 23:10:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 234 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280827 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:10:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280827,9,6);					
[2015-05-18 23:10:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:10:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:10:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:10:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:10:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:10:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:10:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 EB F0 00 00 5A 00 00 00 00 00 53 BB A9 79 00 00 00| 
[2015-05-18 23:10:32][DEBUG]: The message is valid
[2015-05-18 23:10:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 235 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:10:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),235,90,0,0,9,7);					
[2015-05-18 23:10:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:10:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:10:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:10:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 EC F0 00 00 5A 00 00 00 00 00 53 BB A9 79 00 00 00| 
[2015-05-18 23:10:46][DEBUG]: The message is valid
[2015-05-18 23:10:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 236 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:10:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),236,90,0,0,9,7);					
[2015-05-18 23:10:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:10:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:11:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:11:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 ED F0 00 00 5A 00 00 00 00 00 53 BB A9 79 00 00 00| 
[2015-05-18 23:11:00][DEBUG]: The message is valid
[2015-05-18 23:11:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 237 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:11:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),237,90,0,0,9,7);					
[2015-05-18 23:11:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:11:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:11:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:11:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 EE F0 00 00 5A 00 00 00 00 00 53 BB A9 79 00 00 00| 
[2015-05-18 23:11:14][DEBUG]: The message is valid
[2015-05-18 23:11:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 238 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:11:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),238,90,0,0,9,7);					
[2015-05-18 23:11:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:11:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:11:25][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:11:25][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:11:25][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:11:25][DEBUG]: MYSQL = 1
[2015-05-18 23:11:25][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:11:25][DEBUG]: PORT = 3306
[2015-05-18 23:11:25][DEBUG]: LOGIN = mydombox
[2015-05-18 23:11:25][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:11:25][DEBUG]: DATABASE = mydombox
[2015-05-18 23:11:25][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:11:25][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:11:25][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:11:25][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:11:25][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:11:25][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:11:25][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:11:25][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:11:25][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:11:25][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:11:25][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:11:25][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:11:25][DEBUG]: MDB_KEY = 
[2015-05-18 23:11:26][DEBUG]: MDB_ID = 
[2015-05-18 23:11:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:11:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:11:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:11:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:11:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:11:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:11:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:11:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:11:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:11:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:11:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:09:48 

[2015-05-18 23:11:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:11:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:11:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:11:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:11:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:11:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:11:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:11:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:11:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:11:26][DEBUG]: The message is valid
[2015-05-18 23:11:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:11:26][DEBUG]: Not Suported yet
[2015-05-18 23:11:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:11:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 EF F0 00 00 5A 00 00 00 00 00 53 BB A9 79 00 00 00| 
[2015-05-18 23:11:28][DEBUG]: The message is valid
[2015-05-18 23:11:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 239 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:11:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),239,90,0,0,9,7);					
[2015-05-18 23:11:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:11:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:11:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:11:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F0 89 F2 00 00 00 01 62 00 00 53 BB AF 20 69 00 00| 
[2015-05-18 23:11:31][DEBUG]: The message is valid
[2015-05-18 23:11:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 240 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280833 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:11:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280833,9,6);					
[2015-05-18 23:11:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:11:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:11:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:11:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:11:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:11:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:11:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 F1 F0 00 00 5A 00 00 00 00 00 53 BB AF 79 00 00 00| 
[2015-05-18 23:11:42][DEBUG]: The message is valid
[2015-05-18 23:11:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 241 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:11:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),241,90,0,0,9,7);					
[2015-05-18 23:11:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:11:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:11:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:11:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 F2 F0 00 00 5A 00 00 00 00 00 53 BB AF 79 00 00 00| 
[2015-05-18 23:11:56][DEBUG]: The message is valid
[2015-05-18 23:11:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 242 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:11:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),242,90,0,0,9,7);					
[2015-05-18 23:11:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:11:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:12:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:12:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 F3 F0 00 00 5A 00 00 00 00 00 53 BB AF 79 00 00 00| 
[2015-05-18 23:12:10][DEBUG]: The message is valid
[2015-05-18 23:12:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 243 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:12:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),243,90,0,0,9,7);					
[2015-05-18 23:12:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:12:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:12:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:12:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 F4 F0 00 00 5A 00 00 00 00 00 53 BB AF 79 00 00 00| 
[2015-05-18 23:12:24][DEBUG]: The message is valid
[2015-05-18 23:12:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 244 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:12:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),244,90,0,0,9,7);					
[2015-05-18 23:12:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:12:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:12:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:12:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:12:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:12:26][DEBUG]: MYSQL = 1
[2015-05-18 23:12:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:12:26][DEBUG]: PORT = 3306
[2015-05-18 23:12:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:12:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:12:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:12:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:12:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:12:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:12:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:12:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:12:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:12:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:12:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:12:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:12:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:12:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:12:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:12:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:12:26][DEBUG]: MDB_ID = 
[2015-05-18 23:12:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:12:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:12:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:12:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:12:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:12:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:12:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:12:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:12:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:12:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:12:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:09:48 

[2015-05-18 23:12:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:12:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:12:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:12:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:12:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:12:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:12:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:12:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:12:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:12:26][DEBUG]: The message is valid
[2015-05-18 23:12:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:12:26][DEBUG]: Not Suported yet
[2015-05-18 23:12:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:12:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F5 89 F2 00 00 00 01 62 00 00 53 BB B4 48 69 00 00| 
[2015-05-18 23:12:31][DEBUG]: The message is valid
[2015-05-18 23:12:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 245 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 354 
 Total: 6280839 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:12:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 354 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=354;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,354,6280839,9,6);					
[2015-05-18 23:12:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:12:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:12:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:12:31][DEBUG]: ISS POST DATA : [{ "value": "354" }]
[2015-05-18 23:12:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:12:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:12:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 F6 F0 00 00 5A 00 00 00 00 00 53 BB B4 79 00 00 00| 
[2015-05-18 23:12:38][DEBUG]: The message is valid
[2015-05-18 23:12:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 246 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:12:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),246,90,0,0,9,7);					
[2015-05-18 23:12:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:12:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:12:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:12:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 F7 F0 00 00 5A 00 00 00 00 00 53 BB B4 69 00 00 00| 
[2015-05-18 23:12:52][DEBUG]: The message is valid
[2015-05-18 23:12:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 247 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:12:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),247,90,0,0,9,6);					
[2015-05-18 23:12:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:12:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:13:02][DEBUG]: [EnOcean] Message received 

[2015-05-18 23:13:02][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 23:13:02][DEBUG]: [EnOcean] Data =  d5 08 00 8b 3c 6b 00
[2015-05-18 23:13:02][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 49 00
[2015-05-18 23:13:02][DEBUG]: [EnOcean] byte 1: d5
[2015-05-18 23:13:02][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 23:13:02][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='8B'AND id3='3C'AND id4='6B';
[2015-05-18 23:13:02][DEBUG]: [EnDevice] dc_id = 21 ,21
[2015-05-18 23:13:02][DEBUG]: [EnDevice] rorg = D5
[2015-05-18 23:13:02][DEBUG]: [EnDevice] func = 00
[2015-05-18 23:13:02][DEBUG]: [EnDevice] type = 01
[2015-05-18 23:13:02][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 23:13:02][DEBUG]: [EnDevice] id2 = 8B
[2015-05-18 23:13:02][DEBUG]: [EnDevice] id3 = 3C
[2015-05-18 23:13:02][DEBUG]: [EnDevice] id4 = 6B
[2015-05-18 23:13:02][DEBUG]: [EnDevice] enable = 1
[2015-05-18 23:13:02][DEBUG]: 

 [EnOcean] 
 Packetype: 1BS Telegram  
 id1: 00  
 id2: 8B 
 id3: 3C  
 id4: 6B 
 Learn Button: not pressed 
 Contact: open 

[2015-05-18 23:13:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:13:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 F8 F0 00 00 5A 00 00 00 00 00 53 BB B4 79 00 00 00| 
[2015-05-18 23:13:06][DEBUG]: The message is valid
[2015-05-18 23:13:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 248 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:13:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),248,90,0,0,9,7);					
[2015-05-18 23:13:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:13:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:13:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:13:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 F9 F0 00 00 5A 00 00 00 00 00 53 BB B4 79 00 00 00| 
[2015-05-18 23:13:20][DEBUG]: The message is valid
[2015-05-18 23:13:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 249 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:13:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),249,90,0,0,9,7);					
[2015-05-18 23:13:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:13:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:13:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:13:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:13:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:13:26][DEBUG]: MYSQL = 1
[2015-05-18 23:13:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:13:26][DEBUG]: PORT = 3306
[2015-05-18 23:13:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:13:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:13:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:13:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:13:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:13:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:13:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:13:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:13:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:13:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:13:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:13:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:13:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:13:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:13:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:13:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:13:26][DEBUG]: MDB_ID = 
[2015-05-18 23:13:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:13:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:13:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:13:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:13:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:13:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:13:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:13:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:13:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:13:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:13:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:09:48 

[2015-05-18 23:13:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:13:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:13:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:13:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:13:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:13:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:13:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:13:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:13:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:13:26][DEBUG]: The message is valid
[2015-05-18 23:13:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:13:26][DEBUG]: Not Suported yet
[2015-05-18 23:13:29][DEBUG]: Message lu : size : 11
[2015-05-18 23:13:29][DEBUG]: Message lu : (20 first bytes): 0B 11 00 FA 00 CE AC A2 02 01 0F 60 00 00 00 00 00 00 00 00| 
[2015-05-18 23:13:29][DEBUG]: The message is valid
[2015-05-18 23:13:29][DEBUG]: 

 Packetype: LIGHTING 2 
 Subtype: AC 
 Seqnbr: 250 
 id1: 00  
 id2: CE 
 id3: AC  
 id4: A2 
 Unit: 2 
 Command : On 
 Level: 15 
 rssi: 6 

[2015-05-18 23:13:29][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,id3,id4,unitcode,com) SELECT MAX(dc_id)+1,NOW(),'11','00',1,'00','CE','AC','A2',2,'tx' FROM devices ON DUPLICATE KEY UPDATE last_update=NOW();					INSERT INTO state (dc_id,datetime,device_mode,dim_level,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1),NOW(),'On',15,6)					ON DUPLICATE KEY UPDATE device_mode='On',dim_level=15,signal_level=6;					
[2015-05-18 23:13:29][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1
[2015-05-18 23:13:29][DEBUG]: MDB Cloud: ISS status : 0  Stream: 
[2015-05-18 23:13:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:13:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 FB 89 F2 00 00 00 01 11 00 00 53 BB B9 6A 79 00 00| 
[2015-05-18 23:13:31][DEBUG]: The message is valid
[2015-05-18 23:13:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 251 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 273 
 Total: 6280845 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:13:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 273 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=273;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,273,6280845,9,7);					
[2015-05-18 23:13:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:13:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:13:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:13:31][DEBUG]: ISS POST DATA : [{ "value": "273" }]
[2015-05-18 23:13:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:13:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:13:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 FC F0 00 00 5A 00 00 00 00 00 53 BB B9 79 00 00 00| 
[2015-05-18 23:13:34][DEBUG]: The message is valid
[2015-05-18 23:13:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 252 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:13:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),252,90,0,0,9,7);					
[2015-05-18 23:13:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:13:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:13:42][DEBUG]: Message lu : size : 11
[2015-05-18 23:13:42][DEBUG]: Message lu : (20 first bytes): 0B 11 00 FD 00 CE AC A2 02 00 00 60 00 00 00 00 00 00 00 00| 
[2015-05-18 23:13:42][DEBUG]: The message is valid
[2015-05-18 23:13:42][DEBUG]: 

 Packetype: LIGHTING 2 
 Subtype: AC 
 Seqnbr: 253 
 id1: 00  
 id2: CE 
 id3: AC  
 id4: A2 
 Unit: 2 
 Command : Off 
 Level: 0 
 rssi: 6 

[2015-05-18 23:13:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,id3,id4,unitcode,com) SELECT MAX(dc_id)+1,NOW(),'11','00',1,'00','CE','AC','A2',2,'tx' FROM devices ON DUPLICATE KEY UPDATE last_update=NOW();					INSERT INTO state (dc_id,datetime,device_mode,dim_level,signal_level) VALUES ((select dc_id from devices where id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1),NOW(),'Off',0,6)					ON DUPLICATE KEY UPDATE device_mode='Off',dim_level=0,signal_level=6;					
[2015-05-18 23:13:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='00' AND id2='CE' AND id3='AC' AND id4='A2' AND unitcode=2 LIMIT 1
[2015-05-18 23:13:42][DEBUG]: MDB Cloud: ISS status : 0  Stream: 
[2015-05-18 23:13:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:13:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 FE F0 00 00 5A 00 00 00 00 00 53 BB B9 69 00 00 00| 
[2015-05-18 23:13:48][DEBUG]: The message is valid
[2015-05-18 23:13:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 254 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:13:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),254,90,0,0,9,6);					
[2015-05-18 23:13:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:13:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:13:55][DEBUG]: Message lu : size : 17
[2015-05-18 23:13:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 FF 89 F2 03 00 00 01 72 00 00 00 00 00 00 69 00 00| 
[2015-05-18 23:13:55][DEBUG]: The message is valid
[2015-05-18 23:13:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 255 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 370 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:13:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 370 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=370;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,370,0,9,6);					
[2015-05-18 23:13:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:13:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:13:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:13:55][DEBUG]: ISS POST DATA : [{ "value": "370" }]
[2015-05-18 23:13:56][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:14:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:14:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 00 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:14:02][DEBUG]: The message is valid
[2015-05-18 23:14:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 0 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:14:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),0,90,0,0,9,7);					
[2015-05-18 23:14:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:14:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:14:07][DEBUG]: Message lu : size : 17
[2015-05-18 23:14:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 01 89 F2 02 00 00 01 92 00 00 00 00 00 00 69 00 00| 
[2015-05-18 23:14:07][DEBUG]: The message is valid
[2015-05-18 23:14:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 1 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 402 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:14:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 402 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=402;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,402,0,9,6);					
[2015-05-18 23:14:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:14:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:14:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:14:07][DEBUG]: ISS POST DATA : [{ "value": "402" }]
[2015-05-18 23:14:08][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:14:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:14:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 02 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:14:16][DEBUG]: The message is valid
[2015-05-18 23:14:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 2 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:14:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),2,90,0,0,9,7);					
[2015-05-18 23:14:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:14:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:14:19][DEBUG]: Message lu : size : 17
[2015-05-18 23:14:19][DEBUG]: Message lu : (20 first bytes): 11 5A 02 03 89 F2 01 00 00 01 A2 00 00 00 00 00 00 69 00 00| 
[2015-05-18 23:14:19][DEBUG]: The message is valid
[2015-05-18 23:14:19][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 3 
 id1: 89  
 id2: F2 
 Count: 1 
 Instant: 418 
 Total: 0 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:14:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 418 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=418;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),1,418,0,9,6);					
[2015-05-18 23:14:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:14:19][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:14:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:14:19][DEBUG]: ISS POST DATA : [{ "value": "418" }]
[2015-05-18 23:14:19][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:14:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:14:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:14:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:14:26][DEBUG]: MYSQL = 1
[2015-05-18 23:14:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:14:26][DEBUG]: PORT = 3306
[2015-05-18 23:14:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:14:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:14:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:14:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:14:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:14:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:14:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:14:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:14:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:14:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:14:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:14:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:14:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:14:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:14:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:14:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:14:26][DEBUG]: MDB_ID = 
[2015-05-18 23:14:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:14:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:14:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:14:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:14:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:14:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:14:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:14:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:14:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:14:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:14:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:09:48 

[2015-05-18 23:14:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:14:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:14:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:14:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:14:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:14:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:14:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:14:26][DEBUG]: Message lu : size : 4
[2015-05-18 23:14:26][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:14:26][DEBUG]: The message is valid
[2015-05-18 23:14:26][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:14:26][DEBUG]: Not Suported yet
[2015-05-18 23:14:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:14:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 04 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:14:30][DEBUG]: The message is valid
[2015-05-18 23:14:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 4 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:14:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),4,90,0,0,9,7);					
[2015-05-18 23:14:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:14:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:14:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:14:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 05 89 F2 00 00 00 01 A2 00 00 53 BB BF 34 69 00 00| 
[2015-05-18 23:14:31][DEBUG]: The message is valid
[2015-05-18 23:14:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 5 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 418 
 Total: 6280852 
 Battery_level: 9 
 rssi: 6 

[2015-05-18 23:14:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 418 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=418;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,418,6280852,9,6);					
[2015-05-18 23:14:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:14:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:14:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:14:31][DEBUG]: ISS POST DATA : [{ "value": "418" }]
[2015-05-18 23:14:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:14:41][DEBUG]: [EnOcean] Message received 

[2015-05-18 23:14:41][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 23:14:41][DEBUG]: [EnOcean] Data =  a5 00 00 7c 08 00 88 fb 73 00
[2015-05-18 23:14:41][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 50 00
[2015-05-18 23:14:41][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 23:14:41][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 23:14:41][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 23:14:41][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 23:14:41][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 23:14:41][DEBUG]: [EnDevice] func = 02
[2015-05-18 23:14:41][DEBUG]: [EnDevice] type = 05
[2015-05-18 23:14:41][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 23:14:41][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 23:14:41][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 23:14:41][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 23:14:41][DEBUG]: [EnDevice] enable = 1
[2015-05-18 23:14:41][DEBUG]: [EnOcean] device: 30
[2015-05-18 23:14:41][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 23:14:41][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 23:14:41][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 23:14:41][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.55 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 18749344, NOW(), 20.55);
[2015-05-18 23:14:41][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.55 

[2015-05-18 23:14:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:14:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 06 F0 00 00 5A 00 00 00 00 00 53 BB BF 79 00 00 00| 
[2015-05-18 23:14:44][DEBUG]: The message is valid
[2015-05-18 23:14:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 6 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:14:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),6,90,0,0,9,7);					
[2015-05-18 23:14:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:14:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:14:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:14:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 07 F0 00 00 5A 00 00 00 00 00 53 BB BF 79 00 00 00| 
[2015-05-18 23:14:58][DEBUG]: The message is valid
[2015-05-18 23:14:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 7 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:14:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),7,90,0,0,9,7);					
[2015-05-18 23:14:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:14:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:15:08][DEBUG]: Message lu : size : 9
[2015-05-18 23:15:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 08 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:15:08][DEBUG]: The message is valid
[2015-05-18 23:15:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 8 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:15:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),8,21,21,'Heating','Demand',6);					
[2015-05-18 23:15:09][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:15:09][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:15:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:15:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 09 F0 00 00 5A 00 00 00 00 00 53 BB BF 79 00 00 00| 
[2015-05-18 23:15:12][DEBUG]: The message is valid
[2015-05-18 23:15:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 9 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:15:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),9,90,0,0,9,7);					
[2015-05-18 23:15:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:15:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:15:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:15:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 0A F0 00 00 5A 00 00 00 00 00 53 BB BF 79 00 00 00| 
[2015-05-18 23:15:26][DEBUG]: The message is valid
[2015-05-18 23:15:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 10 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:15:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),10,90,0,0,9,7);					
[2015-05-18 23:15:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:15:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:15:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:15:26][DEBUG]: MYSQL = 1
[2015-05-18 23:15:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:15:26][DEBUG]: PORT = 3306
[2015-05-18 23:15:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:15:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:15:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:15:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:15:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:15:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:15:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:15:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:15:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:15:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:15:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:15:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:15:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:15:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:15:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:15:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:15:26][DEBUG]: MDB_ID = 
[2015-05-18 23:15:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:15:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:15:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:15:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:15:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:15:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:15:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:15:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:15:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:15:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:15:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:15:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:15:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:15:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:15:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:15:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:15:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:15:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:15:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:15:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:15:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:15:27][DEBUG]: The message is valid
[2015-05-18 23:15:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:15:27][DEBUG]: Not Suported yet
[2015-05-18 23:15:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:15:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 0B 89 F2 00 00 00 01 92 00 00 53 BB C5 40 79 00 00| 
[2015-05-18 23:15:31][DEBUG]: The message is valid
[2015-05-18 23:15:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 11 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 402 
 Total: 6280859 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:15:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 402 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=402;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,402,6280859,9,7);					
[2015-05-18 23:15:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:15:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:15:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:15:31][DEBUG]: ISS POST DATA : [{ "value": "402" }]
[2015-05-18 23:15:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:15:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:15:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 0C F0 00 00 5A 00 00 00 00 00 53 BB C5 79 00 00 00| 
[2015-05-18 23:15:40][DEBUG]: The message is valid
[2015-05-18 23:15:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 12 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:15:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),12,90,0,0,9,7);					
[2015-05-18 23:15:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:15:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:15:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:15:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 0D F0 00 00 5A 00 00 00 00 00 53 BB C5 79 00 00 00| 
[2015-05-18 23:15:54][DEBUG]: The message is valid
[2015-05-18 23:15:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 13 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:15:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),13,90,0,0,9,7);					
[2015-05-18 23:15:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:15:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:16:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:16:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 0E F0 00 00 5A 00 00 00 00 00 53 BB C5 79 00 00 00| 
[2015-05-18 23:16:08][DEBUG]: The message is valid
[2015-05-18 23:16:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 14 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:16:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),14,90,0,0,9,7);					
[2015-05-18 23:16:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:16:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:16:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:16:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 0F F0 00 00 5A 00 00 00 00 00 53 BB C5 79 00 00 00| 
[2015-05-18 23:16:22][DEBUG]: The message is valid
[2015-05-18 23:16:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 15 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:16:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),15,90,0,0,9,7);					
[2015-05-18 23:16:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:16:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:16:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:16:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:16:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:16:26][DEBUG]: MYSQL = 1
[2015-05-18 23:16:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:16:26][DEBUG]: PORT = 3306
[2015-05-18 23:16:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:16:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:16:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:16:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:16:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:16:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:16:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:16:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:16:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:16:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:16:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:16:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:16:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:16:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:16:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:16:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:16:26][DEBUG]: MDB_ID = 
[2015-05-18 23:16:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:16:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:16:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:16:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:16:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:16:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:16:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:16:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:16:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:16:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:16:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:16:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:16:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:16:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:16:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:16:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:16:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:16:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:16:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:16:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:16:27][DEBUG]: The message is valid
[2015-05-18 23:16:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:16:27][DEBUG]: Not Suported yet
[2015-05-18 23:16:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:16:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 10 89 F2 00 00 00 01 A2 00 00 53 BB CB 22 79 00 00| 
[2015-05-18 23:16:31][DEBUG]: The message is valid
[2015-05-18 23:16:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 16 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 418 
 Total: 6280865 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:16:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 418 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=418;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,418,6280865,9,7);					
[2015-05-18 23:16:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:16:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:16:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:16:31][DEBUG]: ISS POST DATA : [{ "value": "418" }]
[2015-05-18 23:16:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:16:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:16:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 11 F0 00 00 5A 00 00 00 00 00 53 BB CB 79 00 00 00| 
[2015-05-18 23:16:36][DEBUG]: The message is valid
[2015-05-18 23:16:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 17 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:16:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),17,90,0,0,9,7);					
[2015-05-18 23:16:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:16:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:16:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:16:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 12 F0 00 00 5A 00 00 00 00 00 53 BB CB 79 00 00 00| 
[2015-05-18 23:16:50][DEBUG]: The message is valid
[2015-05-18 23:16:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 18 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:16:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),18,90,0,0,9,7);					
[2015-05-18 23:16:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:16:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:17:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:17:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 13 F0 00 00 5A 00 00 00 00 00 53 BB CB 79 00 00 00| 
[2015-05-18 23:17:04][DEBUG]: The message is valid
[2015-05-18 23:17:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 19 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),19,90,0,0,9,7);					
[2015-05-18 23:17:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:17:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:17:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:17:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 14 F0 00 00 5A 00 00 00 00 00 53 BB CB 79 00 00 00| 
[2015-05-18 23:17:18][DEBUG]: The message is valid
[2015-05-18 23:17:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 20 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),20,90,0,0,9,7);					
[2015-05-18 23:17:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:17:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:17:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:17:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:17:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:17:26][DEBUG]: MYSQL = 1
[2015-05-18 23:17:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:17:26][DEBUG]: PORT = 3306
[2015-05-18 23:17:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:17:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:17:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:17:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:17:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:17:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:17:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:17:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:17:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:17:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:17:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:17:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:17:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:17:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:17:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:17:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:17:26][DEBUG]: MDB_ID = 
[2015-05-18 23:17:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:17:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:17:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:17:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:17:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:17:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:17:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:17:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:17:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:17:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:17:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:17:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:17:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:17:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:17:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:17:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:17:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:17:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:17:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:17:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:17:27][DEBUG]: The message is valid
[2015-05-18 23:17:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:17:27][DEBUG]: Not Suported yet
[2015-05-18 23:17:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:17:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 15 89 F2 00 00 00 01 B2 00 00 53 BB D1 0A 79 00 00| 
[2015-05-18 23:17:31][DEBUG]: The message is valid
[2015-05-18 23:17:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 21 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 434 
 Total: 6280872 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 434 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=434;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,434,6280872,9,7);					
[2015-05-18 23:17:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:17:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:17:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:17:31][DEBUG]: ISS POST DATA : [{ "value": "434" }]
[2015-05-18 23:17:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:17:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:17:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 16 F0 00 00 5A 00 00 00 00 00 53 BB D1 79 00 00 00| 
[2015-05-18 23:17:32][DEBUG]: The message is valid
[2015-05-18 23:17:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 22 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),22,90,0,0,9,7);					
[2015-05-18 23:17:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:17:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:17:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:17:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 17 F0 00 00 5A 00 00 00 00 00 53 BB D1 79 00 00 00| 
[2015-05-18 23:17:46][DEBUG]: The message is valid
[2015-05-18 23:17:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 23 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),23,90,0,0,9,7);					
[2015-05-18 23:17:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:17:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:17:55][DEBUG]: Message lu : size : 17
[2015-05-18 23:17:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 18 89 F2 03 00 00 01 01 00 00 00 00 00 00 79 00 00| 
[2015-05-18 23:17:55][DEBUG]: The message is valid
[2015-05-18 23:17:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 24 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 257 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:17:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 257 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=257;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,257,0,9,7);					
[2015-05-18 23:17:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:17:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:17:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:17:55][DEBUG]: ISS POST DATA : [{ "value": "257" }]
[2015-05-18 23:17:56][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:18:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:18:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 19 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:18:00][DEBUG]: The message is valid
[2015-05-18 23:18:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 25 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),25,90,0,0,9,7);					
[2015-05-18 23:18:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:18:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:18:07][DEBUG]: Message lu : size : 17
[2015-05-18 23:18:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 1A 89 F2 02 00 00 01 01 00 00 00 00 00 00 79 00 00| 
[2015-05-18 23:18:07][DEBUG]: The message is valid
[2015-05-18 23:18:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 26 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 257 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 257 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=257;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,257,0,9,7);					
[2015-05-18 23:18:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:18:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:18:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:18:07][DEBUG]: ISS POST DATA : [{ "value": "257" }]
[2015-05-18 23:18:07][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:18:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:18:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 1B F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:18:14][DEBUG]: The message is valid
[2015-05-18 23:18:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 27 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),27,90,0,0,9,7);					
[2015-05-18 23:18:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:18:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:18:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:18:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:18:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:18:26][DEBUG]: MYSQL = 1
[2015-05-18 23:18:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:18:26][DEBUG]: PORT = 3306
[2015-05-18 23:18:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:18:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:18:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:18:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:18:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:18:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:18:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:18:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:18:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:18:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:18:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:18:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:18:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:18:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:18:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:18:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:18:26][DEBUG]: MDB_ID = 
[2015-05-18 23:18:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:18:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:18:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:18:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:18:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:18:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:18:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:18:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:18:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:18:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:18:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:18:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:18:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:18:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:18:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:18:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:18:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:18:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:18:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:18:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:18:27][DEBUG]: The message is valid
[2015-05-18 23:18:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:18:27][DEBUG]: Not Suported yet
[2015-05-18 23:18:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:18:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 1C F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:18:28][DEBUG]: The message is valid
[2015-05-18 23:18:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 28 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),28,90,0,0,9,7);					
[2015-05-18 23:18:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:18:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:18:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:18:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 1D 89 F2 00 00 00 00 F1 00 00 53 BB D5 30 79 00 00| 
[2015-05-18 23:18:31][DEBUG]: The message is valid
[2015-05-18 23:18:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 29 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280877 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280877,9,7);					
[2015-05-18 23:18:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:18:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:18:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:18:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:18:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:18:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:18:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 1E F0 00 00 5A 00 00 00 00 00 53 BB D5 79 00 00 00| 
[2015-05-18 23:18:42][DEBUG]: The message is valid
[2015-05-18 23:18:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 30 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),30,90,0,0,9,7);					
[2015-05-18 23:18:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:18:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:18:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:18:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 1F F0 00 00 5A 00 00 00 00 00 53 BB D5 79 00 00 00| 
[2015-05-18 23:18:56][DEBUG]: The message is valid
[2015-05-18 23:18:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 31 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:18:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),31,90,0,0,9,7);					
[2015-05-18 23:18:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:18:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:19:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:19:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 20 F0 00 00 5A 00 00 00 00 00 53 BB D5 79 00 00 00| 
[2015-05-18 23:19:10][DEBUG]: The message is valid
[2015-05-18 23:19:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 32 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:19:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),32,90,0,0,9,7);					
[2015-05-18 23:19:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:19:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:19:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:19:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 21 F0 00 00 5A 00 00 00 00 00 53 BB D5 79 00 00 00| 
[2015-05-18 23:19:24][DEBUG]: The message is valid
[2015-05-18 23:19:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 33 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:19:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),33,90,0,0,9,7);					
[2015-05-18 23:19:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:19:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:19:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:19:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:19:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:19:26][DEBUG]: MYSQL = 1
[2015-05-18 23:19:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:19:26][DEBUG]: PORT = 3306
[2015-05-18 23:19:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:19:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:19:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:19:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:19:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:19:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:19:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:19:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:19:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:19:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:19:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:19:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:19:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:19:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:19:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:19:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:19:26][DEBUG]: MDB_ID = 
[2015-05-18 23:19:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:19:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:19:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:19:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:19:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:19:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:19:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:19:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:19:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:19:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:19:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:19:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:19:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:19:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:19:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:19:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:19:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:19:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:19:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:19:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:19:27][DEBUG]: The message is valid
[2015-05-18 23:19:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:19:27][DEBUG]: Not Suported yet
[2015-05-18 23:19:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:19:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 22 89 F2 00 00 00 00 F1 00 00 53 BB D8 BA 79 00 00| 
[2015-05-18 23:19:31][DEBUG]: The message is valid
[2015-05-18 23:19:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 34 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280881 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:19:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280881,9,7);					
[2015-05-18 23:19:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:19:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:19:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:19:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:19:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:19:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:19:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 23 F0 00 00 5A 00 00 00 00 00 53 BB D8 79 00 00 00| 
[2015-05-18 23:19:38][DEBUG]: The message is valid
[2015-05-18 23:19:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 35 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:19:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),35,90,0,0,9,7);					
[2015-05-18 23:19:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:19:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:19:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:19:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 24 F0 00 00 5A 00 00 00 00 00 53 BB D8 79 00 00 00| 
[2015-05-18 23:19:52][DEBUG]: The message is valid
[2015-05-18 23:19:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 36 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:19:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),36,90,0,0,9,7);					
[2015-05-18 23:19:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:19:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:20:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:20:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 25 F0 00 00 5A 00 00 00 00 00 53 BB D8 79 00 00 00| 
[2015-05-18 23:20:06][DEBUG]: The message is valid
[2015-05-18 23:20:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 37 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:20:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),37,90,0,0,9,7);					
[2015-05-18 23:20:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:20:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:20:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:20:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 26 F0 00 00 5A 00 00 00 00 00 53 BB D8 79 00 00 00| 
[2015-05-18 23:20:20][DEBUG]: The message is valid
[2015-05-18 23:20:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 38 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:20:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),38,90,0,0,9,7);					
[2015-05-18 23:20:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:20:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:20:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:20:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:20:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:20:26][DEBUG]: MYSQL = 1
[2015-05-18 23:20:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:20:26][DEBUG]: PORT = 3306
[2015-05-18 23:20:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:20:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:20:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:20:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:20:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:20:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:20:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:20:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:20:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:20:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:20:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:20:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:20:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:20:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:20:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:20:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:20:26][DEBUG]: MDB_ID = 
[2015-05-18 23:20:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:20:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:20:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:20:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:20:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:20:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:20:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:20:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:20:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:20:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:20:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:15:08 

[2015-05-18 23:20:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:20:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:20:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:20:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:20:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:20:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:20:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:20:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:20:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:20:27][DEBUG]: The message is valid
[2015-05-18 23:20:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:20:27][DEBUG]: Not Suported yet
[2015-05-18 23:20:28][DEBUG]: Message lu : size : 9
[2015-05-18 23:20:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 27 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:20:28][DEBUG]: The message is valid
[2015-05-18 23:20:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 39 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:20:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),39,21,21,'Heating','Demand',6);					
[2015-05-18 23:20:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:20:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:20:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:20:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 28 89 F2 00 00 00 00 F1 00 00 53 BB DC 3E 79 00 00| 
[2015-05-18 23:20:31][DEBUG]: The message is valid
[2015-05-18 23:20:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 40 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280885 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:20:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280885,9,7);					
[2015-05-18 23:20:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:20:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:20:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:20:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:20:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:20:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:20:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 29 F0 00 00 5A 00 00 00 00 00 53 BB DC 79 00 00 00| 
[2015-05-18 23:20:34][DEBUG]: The message is valid
[2015-05-18 23:20:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 41 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:20:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),41,90,0,0,9,7);					
[2015-05-18 23:20:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:20:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:20:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:20:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 2A F0 00 00 5A 00 00 00 00 00 53 BB DC 79 00 00 00| 
[2015-05-18 23:20:48][DEBUG]: The message is valid
[2015-05-18 23:20:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 42 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:20:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),42,90,0,0,9,7);					
[2015-05-18 23:20:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:20:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:21:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:21:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 2B F0 00 00 5A 00 00 00 00 00 53 BB DC 79 00 00 00| 
[2015-05-18 23:21:02][DEBUG]: The message is valid
[2015-05-18 23:21:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 43 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),43,90,0,0,9,7);					
[2015-05-18 23:21:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:21:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:21:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:21:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 2C F0 00 00 5A 00 00 00 00 00 53 BB DC 79 00 00 00| 
[2015-05-18 23:21:16][DEBUG]: The message is valid
[2015-05-18 23:21:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 44 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),44,90,0,0,9,7);					
[2015-05-18 23:21:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:21:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:21:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:21:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:21:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:21:26][DEBUG]: MYSQL = 1
[2015-05-18 23:21:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:21:26][DEBUG]: PORT = 3306
[2015-05-18 23:21:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:21:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:21:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:21:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:21:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:21:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:21:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:21:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:21:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:21:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:21:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:21:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:21:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:21:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:21:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:21:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:21:26][DEBUG]: MDB_ID = 
[2015-05-18 23:21:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:21:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:21:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:21:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:21:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:21:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:21:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:21:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:21:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:21:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:21:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:20:28 

[2015-05-18 23:21:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:21:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:21:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:21:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:21:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:21:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:21:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:21:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:21:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:21:27][DEBUG]: The message is valid
[2015-05-18 23:21:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:21:27][DEBUG]: Not Suported yet
[2015-05-18 23:21:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:21:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 2D F0 00 00 5A 00 00 00 00 00 53 BB DC 79 00 00 00| 
[2015-05-18 23:21:30][DEBUG]: The message is valid
[2015-05-18 23:21:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 45 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),45,90,0,0,9,7);					
[2015-05-18 23:21:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:21:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:21:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:21:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 2E 89 F2 00 00 00 00 F1 00 00 53 BB DF C2 79 00 00| 
[2015-05-18 23:21:31][DEBUG]: The message is valid
[2015-05-18 23:21:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 46 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280889 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280889,9,7);					
[2015-05-18 23:21:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:21:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:21:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:21:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:21:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:21:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:21:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 2F F0 00 00 5A 00 00 00 00 00 53 BB DF 79 00 00 00| 
[2015-05-18 23:21:44][DEBUG]: The message is valid
[2015-05-18 23:21:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 47 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),47,90,0,0,9,7);					
[2015-05-18 23:21:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:21:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:21:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:21:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 30 F0 00 00 5A 00 00 00 00 00 53 BB DF 79 00 00 00| 
[2015-05-18 23:21:58][DEBUG]: The message is valid
[2015-05-18 23:21:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 48 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:21:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),48,90,0,0,9,7);					
[2015-05-18 23:21:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:21:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:22:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:22:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 31 F0 00 00 5A 00 00 00 00 00 53 BB DF 79 00 00 00| 
[2015-05-18 23:22:12][DEBUG]: The message is valid
[2015-05-18 23:22:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 49 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:22:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),49,90,0,0,9,7);					
[2015-05-18 23:22:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:22:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:22:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:22:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 32 F0 00 00 5A 00 00 00 00 00 53 BB DF 79 00 00 00| 
[2015-05-18 23:22:26][DEBUG]: The message is valid
[2015-05-18 23:22:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 50 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:22:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),50,90,0,0,9,7);					
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:22:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:22:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:22:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:22:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:22:26][DEBUG]: MYSQL = 1
[2015-05-18 23:22:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:22:26][DEBUG]: PORT = 3306
[2015-05-18 23:22:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:22:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:22:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:22:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:22:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:22:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:22:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:22:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:22:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:22:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:22:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:22:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:22:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:22:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:22:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:22:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:22:26][DEBUG]: MDB_ID = 
[2015-05-18 23:22:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:22:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:22:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:22:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:22:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:22:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:22:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:22:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:22:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:22:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:22:26][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:20:28 

[2015-05-18 23:22:26][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:22:26][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:22:26][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:22:26][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:22:26][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:22:26][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:22:26][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:22:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:22:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:22:27][DEBUG]: The message is valid
[2015-05-18 23:22:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:22:27][DEBUG]: Not Suported yet
[2015-05-18 23:22:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:22:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 33 89 F2 00 00 00 00 F1 00 00 53 BB E3 46 79 00 00| 
[2015-05-18 23:22:31][DEBUG]: The message is valid
[2015-05-18 23:22:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 51 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280893 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:22:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280893,9,7);					
[2015-05-18 23:22:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:22:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:22:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:22:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:22:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:22:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:22:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 34 F0 00 00 5A 00 00 00 00 00 53 BB E3 79 00 00 00| 
[2015-05-18 23:22:40][DEBUG]: The message is valid
[2015-05-18 23:22:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 52 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:22:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),52,90,0,0,9,7);					
[2015-05-18 23:22:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:22:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:22:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:22:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 35 F0 00 00 5A 00 00 00 00 00 53 BB E3 79 00 00 00| 
[2015-05-18 23:22:54][DEBUG]: The message is valid
[2015-05-18 23:22:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 53 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:22:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),53,90,0,0,9,7);					
[2015-05-18 23:22:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:22:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:23:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:23:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 36 F0 00 00 5A 00 00 00 00 00 53 BB E3 79 00 00 00| 
[2015-05-18 23:23:08][DEBUG]: The message is valid
[2015-05-18 23:23:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 54 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:23:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),54,90,0,0,9,7);					
[2015-05-18 23:23:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:23:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:23:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:23:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 37 F0 00 00 5A 00 00 00 00 00 53 BB E3 79 00 00 00| 
[2015-05-18 23:23:22][DEBUG]: The message is valid
[2015-05-18 23:23:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 55 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:23:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),55,90,0,0,9,7);					
[2015-05-18 23:23:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:23:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:23:26][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:23:26][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:23:26][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:23:26][DEBUG]: MYSQL = 1
[2015-05-18 23:23:26][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:23:26][DEBUG]: PORT = 3306
[2015-05-18 23:23:26][DEBUG]: LOGIN = mydombox
[2015-05-18 23:23:26][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:23:26][DEBUG]: DATABASE = mydombox
[2015-05-18 23:23:26][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:23:26][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:23:26][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:23:26][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:23:26][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:23:26][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:23:26][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:23:26][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:23:26][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:23:26][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:23:26][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:23:26][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:23:26][DEBUG]: MDB_KEY = 
[2015-05-18 23:23:26][DEBUG]: MDB_ID = 
[2015-05-18 23:23:26][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:23:26][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:23:26][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:23:26][DEBUG]: --------------------------------------------------------

[2015-05-18 23:23:26][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:23:26][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:23:26][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:23:26][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:23:26][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:23:26][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:23:26][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:23:26][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:23:26][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:23:26][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:23:26][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:23:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:20:28 

[2015-05-18 23:23:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:23:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:23:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:23:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:23:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:23:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:23:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:23:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:23:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:23:27][DEBUG]: The message is valid
[2015-05-18 23:23:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:23:27][DEBUG]: Not Suported yet
[2015-05-18 23:23:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:23:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 38 89 F2 00 00 00 00 E1 00 00 53 BB E6 C4 79 00 00| 
[2015-05-18 23:23:31][DEBUG]: The message is valid
[2015-05-18 23:23:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 56 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 225 
 Total: 6280897 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:23:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 225 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=225;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,225,6280897,9,7);					
[2015-05-18 23:23:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:23:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:23:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:23:31][DEBUG]: ISS POST DATA : [{ "value": "225" }]
[2015-05-18 23:23:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:23:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:23:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 39 F0 00 00 5A 00 00 00 00 00 53 BB E6 79 00 00 00| 
[2015-05-18 23:23:36][DEBUG]: The message is valid
[2015-05-18 23:23:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 57 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:23:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),57,90,0,0,9,7);					
[2015-05-18 23:23:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:23:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:23:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:23:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 3A F0 00 00 5A 00 00 00 00 00 53 BB E6 79 00 00 00| 
[2015-05-18 23:23:50][DEBUG]: The message is valid
[2015-05-18 23:23:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 58 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:23:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),58,90,0,0,9,7);					
[2015-05-18 23:23:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:23:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:24:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:24:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 3B F0 00 00 5A 00 00 00 00 00 53 BB E6 79 00 00 00| 
[2015-05-18 23:24:04][DEBUG]: The message is valid
[2015-05-18 23:24:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 59 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:24:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),59,90,0,0,9,7);					
[2015-05-18 23:24:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:24:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:24:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:24:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 3C F0 00 00 5A 00 00 00 00 00 53 BB E6 79 00 00 00| 
[2015-05-18 23:24:18][DEBUG]: The message is valid
[2015-05-18 23:24:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 60 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:24:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),60,90,0,0,9,7);					
[2015-05-18 23:24:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:24:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:24:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:24:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:24:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:24:27][DEBUG]: MYSQL = 1
[2015-05-18 23:24:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:24:27][DEBUG]: PORT = 3306
[2015-05-18 23:24:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:24:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:24:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:24:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:24:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:24:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:24:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:24:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:24:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:24:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:24:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:24:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:24:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:24:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:24:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:24:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:24:27][DEBUG]: MDB_ID = 
[2015-05-18 23:24:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:24:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:24:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:24:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:24:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:24:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:24:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:24:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:24:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:24:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:24:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:20:28 

[2015-05-18 23:24:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:24:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:24:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:24:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:24:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:24:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:24:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:24:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:24:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:24:27][DEBUG]: The message is valid
[2015-05-18 23:24:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:24:27][DEBUG]: Not Suported yet
[2015-05-18 23:24:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:24:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 3D 89 F2 00 00 00 00 F1 00 00 53 BB EA 48 79 00 00| 
[2015-05-18 23:24:31][DEBUG]: The message is valid
[2015-05-18 23:24:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 61 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280901 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:24:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280901,9,7);					
[2015-05-18 23:24:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:24:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:24:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:24:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:24:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:24:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:24:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 3E F0 00 00 5A 00 00 00 00 00 53 BB EA 79 00 00 00| 
[2015-05-18 23:24:32][DEBUG]: The message is valid
[2015-05-18 23:24:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 62 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:24:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),62,90,0,0,9,7);					
[2015-05-18 23:24:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:24:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:24:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:24:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 3F F0 00 00 5A 00 00 00 00 00 53 BB EA 79 00 00 00| 
[2015-05-18 23:24:46][DEBUG]: The message is valid
[2015-05-18 23:24:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 63 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:24:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),63,90,0,0,9,7);					
[2015-05-18 23:24:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:24:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:25:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 40 F0 00 00 5A 00 00 00 00 00 53 BB EA 79 00 00 00| 
[2015-05-18 23:25:00][DEBUG]: The message is valid
[2015-05-18 23:25:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 64 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),64,90,0,0,9,7);					
[2015-05-18 23:25:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:25:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:25:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 41 F0 00 00 5A 00 00 00 00 00 53 BB EA 79 00 00 00| 
[2015-05-18 23:25:14][DEBUG]: The message is valid
[2015-05-18 23:25:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 65 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),65,90,0,0,9,7);					
[2015-05-18 23:25:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:25:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:25:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:25:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:25:27][DEBUG]: MYSQL = 1
[2015-05-18 23:25:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:25:27][DEBUG]: PORT = 3306
[2015-05-18 23:25:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:25:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:25:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:25:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:25:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:25:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:25:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:25:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:25:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:25:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:25:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:25:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:25:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:25:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:25:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:25:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:25:27][DEBUG]: MDB_ID = 
[2015-05-18 23:25:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:25:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:25:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:25:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:25:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:25:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:25:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:25:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:25:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:25:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:25:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:20:28 

[2015-05-18 23:25:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:25:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:25:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:25:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:25:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:25:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:25:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:25:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:25:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:25:27][DEBUG]: The message is valid
[2015-05-18 23:25:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:25:27][DEBUG]: Not Suported yet
[2015-05-18 23:25:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:25:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 42 F0 00 00 5A 00 00 00 00 00 53 BB EA 79 00 00 00| 
[2015-05-18 23:25:28][DEBUG]: The message is valid
[2015-05-18 23:25:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 66 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),66,90,0,0,9,7);					
[2015-05-18 23:25:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:25:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:25:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 43 89 F2 00 00 00 00 F1 00 00 53 BB ED CC 79 00 00| 
[2015-05-18 23:25:31][DEBUG]: The message is valid
[2015-05-18 23:25:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 67 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280905 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280905,9,7);					
[2015-05-18 23:25:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:25:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:25:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:25:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:25:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:25:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:25:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 44 F0 00 00 5A 00 00 00 00 00 53 BB ED 79 00 00 00| 
[2015-05-18 23:25:42][DEBUG]: The message is valid
[2015-05-18 23:25:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 68 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),68,90,0,0,9,7);					
[2015-05-18 23:25:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:25:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:48][DEBUG]: Message lu : size : 9
[2015-05-18 23:25:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 45 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:25:48][DEBUG]: The message is valid
[2015-05-18 23:25:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 69 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:25:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),69,21,21,'Heating','Demand',6);					
[2015-05-18 23:25:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:25:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:25:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:25:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 46 F0 00 00 5A 00 00 00 00 00 53 BB ED 79 00 00 00| 
[2015-05-18 23:25:56][DEBUG]: The message is valid
[2015-05-18 23:25:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 70 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:25:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),70,90,0,0,9,7);					
[2015-05-18 23:25:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:25:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:26:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:26:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 47 F0 00 00 5A 00 00 00 00 00 53 BB ED 79 00 00 00| 
[2015-05-18 23:26:10][DEBUG]: The message is valid
[2015-05-18 23:26:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 71 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:26:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),71,90,0,0,9,7);					
[2015-05-18 23:26:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:26:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:26:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:26:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 48 F0 00 00 5A 00 00 00 00 00 53 BB ED 79 00 00 00| 
[2015-05-18 23:26:24][DEBUG]: The message is valid
[2015-05-18 23:26:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 72 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:26:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),72,90,0,0,9,7);					
[2015-05-18 23:26:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:26:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:26:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:26:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:26:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:26:27][DEBUG]: MYSQL = 1
[2015-05-18 23:26:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:26:27][DEBUG]: PORT = 3306
[2015-05-18 23:26:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:26:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:26:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:26:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:26:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:26:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:26:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:26:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:26:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:26:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:26:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:26:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:26:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:26:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:26:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:26:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:26:27][DEBUG]: MDB_ID = 
[2015-05-18 23:26:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:26:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:26:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:26:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:26:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:26:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:26:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:26:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:26:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:26:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:26:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:25:48 

[2015-05-18 23:26:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:26:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:26:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:26:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:26:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:26:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:26:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:26:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:26:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:26:27][DEBUG]: The message is valid
[2015-05-18 23:26:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:26:27][DEBUG]: Not Suported yet
[2015-05-18 23:26:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:26:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 49 89 F2 00 00 00 00 F1 00 00 53 BB F1 50 79 00 00| 
[2015-05-18 23:26:31][DEBUG]: The message is valid
[2015-05-18 23:26:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 73 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280909 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:26:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280909,9,7);					
[2015-05-18 23:26:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:26:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:26:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:26:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:26:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:26:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:26:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 4A F0 00 00 5A 00 00 00 00 00 53 BB F1 79 00 00 00| 
[2015-05-18 23:26:38][DEBUG]: The message is valid
[2015-05-18 23:26:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 74 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:26:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),74,90,0,0,9,7);					
[2015-05-18 23:26:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:26:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:26:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:26:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 4B F0 00 00 5A 00 00 00 00 00 53 BB F1 79 00 00 00| 
[2015-05-18 23:26:52][DEBUG]: The message is valid
[2015-05-18 23:26:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 75 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:26:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),75,90,0,0,9,7);					
[2015-05-18 23:26:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:26:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:27:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:27:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 4C F0 00 00 5A 00 00 00 00 00 53 BB F1 79 00 00 00| 
[2015-05-18 23:27:06][DEBUG]: The message is valid
[2015-05-18 23:27:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 76 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:27:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),76,90,0,0,9,7);					
[2015-05-18 23:27:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:27:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:27:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:27:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 4D F0 00 00 5A 00 00 00 00 00 53 BB F1 79 00 00 00| 
[2015-05-18 23:27:20][DEBUG]: The message is valid
[2015-05-18 23:27:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 77 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:27:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),77,90,0,0,9,7);					
[2015-05-18 23:27:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:27:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:27:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:27:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:27:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:27:27][DEBUG]: MYSQL = 1
[2015-05-18 23:27:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:27:27][DEBUG]: PORT = 3306
[2015-05-18 23:27:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:27:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:27:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:27:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:27:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:27:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:27:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:27:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:27:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:27:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:27:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:27:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:27:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:27:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:27:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:27:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:27:27][DEBUG]: MDB_ID = 
[2015-05-18 23:27:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:27:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:27:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:27:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:27:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:27:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:27:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:27:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:27:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:27:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:27:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:25:48 

[2015-05-18 23:27:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:27:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:27:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:27:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:27:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:27:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:27:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:27:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:27:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:27:27][DEBUG]: The message is valid
[2015-05-18 23:27:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:27:27][DEBUG]: Not Suported yet
[2015-05-18 23:27:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:27:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 4E 89 F2 00 00 00 00 F1 00 00 53 BB F4 D4 79 00 00| 
[2015-05-18 23:27:31][DEBUG]: The message is valid
[2015-05-18 23:27:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 78 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280913 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:27:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280913,9,7);					
[2015-05-18 23:27:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:27:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:27:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:27:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:27:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:27:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:27:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 4F F0 00 00 5A 00 00 00 00 00 53 BB F4 79 00 00 00| 
[2015-05-18 23:27:34][DEBUG]: The message is valid
[2015-05-18 23:27:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 79 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:27:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),79,90,0,0,9,7);					
[2015-05-18 23:27:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:27:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:27:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:27:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 50 F0 00 00 5A 00 00 00 00 00 53 BB F4 79 00 00 00| 
[2015-05-18 23:27:48][DEBUG]: The message is valid
[2015-05-18 23:27:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 80 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:27:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),80,90,0,0,9,7);					
[2015-05-18 23:27:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:27:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:28:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:28:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 51 F0 00 00 5A 00 00 00 00 00 53 BB F4 79 00 00 00| 
[2015-05-18 23:28:02][DEBUG]: The message is valid
[2015-05-18 23:28:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 81 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),81,90,0,0,9,7);					
[2015-05-18 23:28:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:28:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:28:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:28:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 52 F0 00 00 5A 00 00 00 00 00 53 BB F4 79 00 00 00| 
[2015-05-18 23:28:16][DEBUG]: The message is valid
[2015-05-18 23:28:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 82 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),82,90,0,0,9,7);					
[2015-05-18 23:28:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:28:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:28:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:28:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:28:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:28:27][DEBUG]: MYSQL = 1
[2015-05-18 23:28:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:28:27][DEBUG]: PORT = 3306
[2015-05-18 23:28:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:28:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:28:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:28:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:28:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:28:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:28:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:28:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:28:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:28:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:28:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:28:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:28:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:28:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:28:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:28:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:28:27][DEBUG]: MDB_ID = 
[2015-05-18 23:28:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:28:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:28:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:28:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:28:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:28:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:28:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:28:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:28:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:28:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:28:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:25:48 

[2015-05-18 23:28:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:28:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:28:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:28:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:28:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:28:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:28:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:28:27][DEBUG]: Message lu : size : 4
[2015-05-18 23:28:27][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:28:27][DEBUG]: The message is valid
[2015-05-18 23:28:27][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:28:27][DEBUG]: Not Suported yet
[2015-05-18 23:28:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:28:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 53 F0 00 00 5A 00 00 00 00 00 53 BB F4 79 00 00 00| 
[2015-05-18 23:28:30][DEBUG]: The message is valid
[2015-05-18 23:28:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 83 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),83,90,0,0,9,7);					
[2015-05-18 23:28:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:28:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:28:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:28:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 54 89 F2 00 00 00 00 F1 00 00 53 BB F8 58 79 00 00| 
[2015-05-18 23:28:31][DEBUG]: The message is valid
[2015-05-18 23:28:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 84 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280917 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280917,9,7);					
[2015-05-18 23:28:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:28:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:28:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:28:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:28:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:28:43][DEBUG]: [EnOcean] Message received 

[2015-05-18 23:28:43][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 23:28:43][DEBUG]: [EnOcean] Data =  a5 00 00 7d 08 00 88 fb 73 00
[2015-05-18 23:28:43][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 52 00
[2015-05-18 23:28:43][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 23:28:43][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 23:28:43][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 23:28:43][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 23:28:43][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 23:28:43][DEBUG]: [EnDevice] func = 02
[2015-05-18 23:28:43][DEBUG]: [EnDevice] type = 05
[2015-05-18 23:28:43][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 23:28:43][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 23:28:43][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 23:28:43][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 23:28:43][DEBUG]: [EnDevice] enable = 1
[2015-05-18 23:28:43][DEBUG]: [EnOcean] device: 30
[2015-05-18 23:28:43][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 23:28:43][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 23:28:43][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 23:28:43][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.39 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( -1246171824, NOW(), 20.39);
[2015-05-18 23:28:43][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.39 

[2015-05-18 23:28:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:28:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 55 F0 00 00 5A 00 00 00 00 00 53 BB F8 79 00 00 00| 
[2015-05-18 23:28:44][DEBUG]: The message is valid
[2015-05-18 23:28:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 85 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),85,90,0,0,9,7);					
[2015-05-18 23:28:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:28:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:28:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:28:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 56 F0 00 00 5A 00 00 00 00 00 53 BB F8 79 00 00 00| 
[2015-05-18 23:28:58][DEBUG]: The message is valid
[2015-05-18 23:28:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 86 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:28:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),86,90,0,0,9,7);					
[2015-05-18 23:28:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:28:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:29:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:29:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 57 F0 00 00 5A 00 00 00 00 00 53 BB F8 79 00 00 00| 
[2015-05-18 23:29:12][DEBUG]: The message is valid
[2015-05-18 23:29:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 87 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:29:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),87,90,0,0,9,7);					
[2015-05-18 23:29:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:29:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:29:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:29:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 58 F0 00 00 5A 00 00 00 00 00 53 BB F8 79 00 00 00| 
[2015-05-18 23:29:26][DEBUG]: The message is valid
[2015-05-18 23:29:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 88 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:29:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),88,90,0,0,9,7);					
[2015-05-18 23:29:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:29:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:29:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:29:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:29:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:29:27][DEBUG]: MYSQL = 1
[2015-05-18 23:29:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:29:27][DEBUG]: PORT = 3306
[2015-05-18 23:29:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:29:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:29:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:29:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:29:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:29:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:29:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:29:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:29:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:29:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:29:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:29:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:29:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:29:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:29:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:29:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:29:27][DEBUG]: MDB_ID = 
[2015-05-18 23:29:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:29:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:29:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:29:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:29:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:29:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:29:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:29:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:29:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:29:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:29:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:25:48 

[2015-05-18 23:29:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:29:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:29:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:29:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:29:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:29:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:29:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:29:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:29:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:29:28][DEBUG]: The message is valid
[2015-05-18 23:29:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:29:28][DEBUG]: Not Suported yet
[2015-05-18 23:29:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:29:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 59 89 F2 00 00 00 00 F1 00 00 53 BB FB DC 79 00 00| 
[2015-05-18 23:29:31][DEBUG]: The message is valid
[2015-05-18 23:29:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 89 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280921 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:29:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280921,9,7);					
[2015-05-18 23:29:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:29:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:29:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:29:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:29:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:29:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:29:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 5A F0 00 00 5A 00 00 00 00 00 53 BB FB 79 00 00 00| 
[2015-05-18 23:29:40][DEBUG]: The message is valid
[2015-05-18 23:29:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 90 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:29:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),90,90,0,0,9,7);					
[2015-05-18 23:29:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:29:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:29:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:29:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 5B F0 00 00 5A 00 00 00 00 00 53 BB FB 79 00 00 00| 
[2015-05-18 23:29:54][DEBUG]: The message is valid
[2015-05-18 23:29:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 91 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:29:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),91,90,0,0,9,7);					
[2015-05-18 23:29:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:29:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:30:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:30:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 5C F0 00 00 5A 00 00 00 00 00 53 BB FB 79 00 00 00| 
[2015-05-18 23:30:08][DEBUG]: The message is valid
[2015-05-18 23:30:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 92 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:30:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),92,90,0,0,9,7);					
[2015-05-18 23:30:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:30:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:30:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:30:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 5D F0 00 00 5A 00 00 00 00 00 53 BB FB 79 00 00 00| 
[2015-05-18 23:30:22][DEBUG]: The message is valid
[2015-05-18 23:30:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 93 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:30:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),93,90,0,0,9,7);					
[2015-05-18 23:30:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:30:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:30:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:30:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:30:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:30:27][DEBUG]: MYSQL = 1
[2015-05-18 23:30:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:30:27][DEBUG]: PORT = 3306
[2015-05-18 23:30:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:30:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:30:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:30:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:30:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:30:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:30:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:30:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:30:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:30:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:30:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:30:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:30:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:30:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:30:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:30:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:30:27][DEBUG]: MDB_ID = 
[2015-05-18 23:30:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:30:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:30:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:30:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:30:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:30:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:30:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:30:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:30:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:30:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:30:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:25:48 

[2015-05-18 23:30:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:30:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:30:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:30:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:30:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:30:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:30:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:30:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:30:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:30:28][DEBUG]: The message is valid
[2015-05-18 23:30:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:30:28][DEBUG]: Not Suported yet
[2015-05-18 23:30:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:30:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 5E 89 F2 00 00 00 00 F1 00 00 53 BB FF 60 79 00 00| 
[2015-05-18 23:30:31][DEBUG]: The message is valid
[2015-05-18 23:30:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 94 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280925 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:30:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280925,9,7);					
[2015-05-18 23:30:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:30:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:30:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:30:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:30:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:30:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:30:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 5F F0 00 00 5A 00 00 00 00 00 53 BB FF 79 00 00 00| 
[2015-05-18 23:30:36][DEBUG]: The message is valid
[2015-05-18 23:30:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 95 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:30:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),95,90,0,0,9,7);					
[2015-05-18 23:30:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:30:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:30:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:30:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 60 F0 00 00 5A 00 00 00 00 00 53 BB FF 79 00 00 00| 
[2015-05-18 23:30:50][DEBUG]: The message is valid
[2015-05-18 23:30:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 96 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:30:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),96,90,0,0,9,7);					
[2015-05-18 23:30:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:30:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:31:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:31:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 61 F0 00 00 5A 00 00 00 00 00 53 BB FF 79 00 00 00| 
[2015-05-18 23:31:04][DEBUG]: The message is valid
[2015-05-18 23:31:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 97 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:31:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),97,90,0,0,9,7);					
[2015-05-18 23:31:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:31:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:31:08][DEBUG]: Message lu : size : 9
[2015-05-18 23:31:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 62 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:31:08][DEBUG]: The message is valid
[2015-05-18 23:31:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 98 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:31:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),98,21,21,'Heating','Demand',6);					
[2015-05-18 23:31:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:31:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:31:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:31:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 63 F0 00 00 5A 00 00 00 00 00 53 BB FF 79 00 00 00| 
[2015-05-18 23:31:18][DEBUG]: The message is valid
[2015-05-18 23:31:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 99 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:31:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),99,90,0,0,9,7);					
[2015-05-18 23:31:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:31:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:31:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:31:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:31:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:31:27][DEBUG]: MYSQL = 1
[2015-05-18 23:31:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:31:27][DEBUG]: PORT = 3306
[2015-05-18 23:31:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:31:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:31:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:31:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:31:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:31:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:31:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:31:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:31:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:31:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:31:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:31:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:31:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:31:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:31:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:31:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:31:27][DEBUG]: MDB_ID = 
[2015-05-18 23:31:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:31:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:31:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:31:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:31:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:31:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:31:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:31:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:31:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:31:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:31:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:31:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:31:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:31:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:31:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:31:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:31:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:31:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:31:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:31:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:31:28][DEBUG]: The message is valid
[2015-05-18 23:31:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:31:28][DEBUG]: Not Suported yet
[2015-05-18 23:31:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:31:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 64 89 F2 00 00 00 00 F1 00 00 53 BC 02 E4 79 00 00| 
[2015-05-18 23:31:31][DEBUG]: The message is valid
[2015-05-18 23:31:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 100 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280929 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:31:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280929,9,7);					
[2015-05-18 23:31:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:31:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:31:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:31:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:31:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:31:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:31:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 65 F0 00 00 5A 00 00 00 00 00 53 BC 02 79 00 00 00| 
[2015-05-18 23:31:32][DEBUG]: The message is valid
[2015-05-18 23:31:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 101 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:31:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),101,90,0,0,9,7);					
[2015-05-18 23:31:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:31:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:31:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:31:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 66 F0 00 00 5A 00 00 00 00 00 53 BC 02 79 00 00 00| 
[2015-05-18 23:31:46][DEBUG]: The message is valid
[2015-05-18 23:31:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 102 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:31:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),102,90,0,0,9,7);					
[2015-05-18 23:31:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:31:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:32:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:32:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 67 F0 00 00 5A 00 00 00 00 00 53 BC 02 79 00 00 00| 
[2015-05-18 23:32:00][DEBUG]: The message is valid
[2015-05-18 23:32:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 103 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:32:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),103,90,0,0,9,7);					
[2015-05-18 23:32:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:32:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:32:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:32:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 68 F0 00 00 5A 00 00 00 00 00 53 BC 02 79 00 00 00| 
[2015-05-18 23:32:14][DEBUG]: The message is valid
[2015-05-18 23:32:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 104 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:32:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),104,90,0,0,9,7);					
[2015-05-18 23:32:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:32:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:32:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:32:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:32:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:32:27][DEBUG]: MYSQL = 1
[2015-05-18 23:32:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:32:27][DEBUG]: PORT = 3306
[2015-05-18 23:32:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:32:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:32:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:32:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:32:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:32:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:32:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:32:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:32:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:32:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:32:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:32:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:32:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:32:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:32:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:32:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:32:27][DEBUG]: MDB_ID = 
[2015-05-18 23:32:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:32:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:32:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:32:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:32:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:32:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:32:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:32:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:32:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:32:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:32:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:32:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:32:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:32:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:32:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:32:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:32:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:32:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:32:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:32:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:32:28][DEBUG]: The message is valid
[2015-05-18 23:32:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:32:28][DEBUG]: Not Suported yet
[2015-05-18 23:32:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:32:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 69 89 F2 00 00 00 00 F1 00 00 53 BC 06 68 79 00 00| 
[2015-05-18 23:32:31][DEBUG]: The message is valid
[2015-05-18 23:32:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 105 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280933 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:32:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280933,9,7);					
[2015-05-18 23:32:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:32:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:32:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:32:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:32:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:32:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:32:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 6A F0 00 00 5A 00 00 00 00 00 53 BC 06 79 00 00 00| 
[2015-05-18 23:32:42][DEBUG]: The message is valid
[2015-05-18 23:32:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 106 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:32:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),106,90,0,0,9,7);					
[2015-05-18 23:32:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:32:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:32:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:32:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 6B F0 00 00 5A 00 00 00 00 00 53 BC 06 79 00 00 00| 
[2015-05-18 23:32:56][DEBUG]: The message is valid
[2015-05-18 23:32:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 107 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:32:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),107,90,0,0,9,7);					
[2015-05-18 23:32:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:32:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:33:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:33:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 6C F0 00 00 5A 00 00 00 00 00 53 BC 06 79 00 00 00| 
[2015-05-18 23:33:10][DEBUG]: The message is valid
[2015-05-18 23:33:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 108 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:33:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),108,90,0,0,9,7);					
[2015-05-18 23:33:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:33:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:33:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:33:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 6D F0 00 00 5A 00 00 00 00 00 53 BC 06 79 00 00 00| 
[2015-05-18 23:33:24][DEBUG]: The message is valid
[2015-05-18 23:33:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 109 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:33:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),109,90,0,0,9,7);					
[2015-05-18 23:33:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:33:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:33:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:33:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:33:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:33:27][DEBUG]: MYSQL = 1
[2015-05-18 23:33:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:33:27][DEBUG]: PORT = 3306
[2015-05-18 23:33:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:33:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:33:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:33:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:33:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:33:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:33:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:33:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:33:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:33:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:33:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:33:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:33:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:33:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:33:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:33:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:33:27][DEBUG]: MDB_ID = 
[2015-05-18 23:33:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:33:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:33:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:33:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:33:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:33:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:33:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:33:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:33:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:33:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:33:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:33:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:33:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:33:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:33:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:33:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:33:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:33:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:33:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:33:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:33:28][DEBUG]: The message is valid
[2015-05-18 23:33:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:33:28][DEBUG]: Not Suported yet
[2015-05-18 23:33:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:33:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 6E 89 F2 00 00 00 00 F1 00 00 53 BC 09 EC 79 00 00| 
[2015-05-18 23:33:31][DEBUG]: The message is valid
[2015-05-18 23:33:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 110 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280937 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:33:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280937,9,7);					
[2015-05-18 23:33:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:33:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:33:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:33:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:33:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:33:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:33:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 6F F0 00 00 5A 00 00 00 00 00 53 BC 09 79 00 00 00| 
[2015-05-18 23:33:38][DEBUG]: The message is valid
[2015-05-18 23:33:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 111 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:33:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),111,90,0,0,9,7);					
[2015-05-18 23:33:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:33:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:33:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:33:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 70 F0 00 00 5A 00 00 00 00 00 53 BC 09 79 00 00 00| 
[2015-05-18 23:33:52][DEBUG]: The message is valid
[2015-05-18 23:33:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 112 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:33:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),112,90,0,0,9,7);					
[2015-05-18 23:33:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:33:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:34:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:34:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 71 F0 00 00 5A 00 00 00 00 00 53 BC 09 79 00 00 00| 
[2015-05-18 23:34:06][DEBUG]: The message is valid
[2015-05-18 23:34:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 113 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:34:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),113,90,0,0,9,7);					
[2015-05-18 23:34:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:34:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:34:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:34:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 72 F0 00 00 5A 00 00 00 00 00 53 BC 09 79 00 00 00| 
[2015-05-18 23:34:20][DEBUG]: The message is valid
[2015-05-18 23:34:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 114 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:34:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),114,90,0,0,9,7);					
[2015-05-18 23:34:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:34:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:34:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:34:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:34:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:34:27][DEBUG]: MYSQL = 1
[2015-05-18 23:34:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:34:27][DEBUG]: PORT = 3306
[2015-05-18 23:34:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:34:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:34:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:34:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:34:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:34:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:34:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:34:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:34:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:34:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:34:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:34:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:34:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:34:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:34:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:34:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:34:27][DEBUG]: MDB_ID = 
[2015-05-18 23:34:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:34:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:34:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:34:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:34:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:34:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:34:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:34:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:34:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:34:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:34:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:34:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:34:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:34:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:34:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:34:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:34:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:34:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:34:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:34:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:34:28][DEBUG]: The message is valid
[2015-05-18 23:34:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:34:28][DEBUG]: Not Suported yet
[2015-05-18 23:34:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:34:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 73 89 F2 00 00 00 00 F1 00 00 53 BC 0D 70 79 00 00| 
[2015-05-18 23:34:31][DEBUG]: The message is valid
[2015-05-18 23:34:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 115 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280941 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:34:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280941,9,7);					
[2015-05-18 23:34:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:34:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:34:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:34:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:34:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:34:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:34:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 74 F0 00 00 5A 00 00 00 00 00 53 BC 0D 79 00 00 00| 
[2015-05-18 23:34:34][DEBUG]: The message is valid
[2015-05-18 23:34:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 116 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:34:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),116,90,0,0,9,7);					
[2015-05-18 23:34:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:34:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:34:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:34:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 75 F0 00 00 5A 00 00 00 00 00 53 BC 0D 79 00 00 00| 
[2015-05-18 23:34:48][DEBUG]: The message is valid
[2015-05-18 23:34:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 117 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:34:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),117,90,0,0,9,7);					
[2015-05-18 23:34:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:34:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:35:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:35:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 76 F0 00 00 5A 00 00 00 00 00 53 BC 0D 79 00 00 00| 
[2015-05-18 23:35:02][DEBUG]: The message is valid
[2015-05-18 23:35:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 118 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),118,90,0,0,9,7);					
[2015-05-18 23:35:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:35:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:35:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:35:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 77 F0 00 00 5A 00 00 00 00 00 53 BC 0D 79 00 00 00| 
[2015-05-18 23:35:16][DEBUG]: The message is valid
[2015-05-18 23:35:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 119 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),119,90,0,0,9,7);					
[2015-05-18 23:35:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:35:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:35:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:35:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:35:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:35:27][DEBUG]: MYSQL = 1
[2015-05-18 23:35:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:35:27][DEBUG]: PORT = 3306
[2015-05-18 23:35:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:35:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:35:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:35:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:35:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:35:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:35:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:35:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:35:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:35:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:35:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:35:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:35:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:35:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:35:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:35:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:35:27][DEBUG]: MDB_ID = 
[2015-05-18 23:35:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:35:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:35:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:35:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:35:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:35:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:35:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:35:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:35:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:35:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:35:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:35:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:35:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:35:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:35:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:35:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:35:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:35:27][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:35:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:35:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:35:28][DEBUG]: The message is valid
[2015-05-18 23:35:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:35:28][DEBUG]: Not Suported yet
[2015-05-18 23:35:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:35:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 78 F0 00 00 5A 00 00 00 00 00 53 BC 0D 79 00 00 00| 
[2015-05-18 23:35:30][DEBUG]: The message is valid
[2015-05-18 23:35:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 120 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),120,90,0,0,9,7);					
[2015-05-18 23:35:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:35:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:35:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:35:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 79 89 F2 00 00 00 00 F1 00 00 53 BC 10 F4 79 00 00| 
[2015-05-18 23:35:31][DEBUG]: The message is valid
[2015-05-18 23:35:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 121 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280945 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280945,9,7);					
[2015-05-18 23:35:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:35:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:35:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:35:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:35:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:35:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:35:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 7A F0 00 00 5A 00 00 00 00 00 53 BC 10 79 00 00 00| 
[2015-05-18 23:35:44][DEBUG]: The message is valid
[2015-05-18 23:35:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 122 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),122,90,0,0,9,7);					
[2015-05-18 23:35:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:35:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:35:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:35:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 7B F0 00 00 5A 00 00 00 00 00 53 BC 10 79 00 00 00| 
[2015-05-18 23:35:58][DEBUG]: The message is valid
[2015-05-18 23:35:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 123 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:35:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),123,90,0,0,9,7);					
[2015-05-18 23:35:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:35:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:36:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:36:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 7C F0 00 00 5A 00 00 00 00 00 53 BC 10 79 00 00 00| 
[2015-05-18 23:36:12][DEBUG]: The message is valid
[2015-05-18 23:36:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 124 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:36:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),124,90,0,0,9,7);					
[2015-05-18 23:36:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:36:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:36:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:36:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 7D F0 00 00 5A 00 00 00 00 00 53 BC 10 79 00 00 00| 
[2015-05-18 23:36:26][DEBUG]: The message is valid
[2015-05-18 23:36:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 125 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:36:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),125,90,0,0,9,7);					
[2015-05-18 23:36:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:36:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:36:27][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:36:27][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:36:27][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:36:27][DEBUG]: MYSQL = 1
[2015-05-18 23:36:27][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:36:27][DEBUG]: PORT = 3306
[2015-05-18 23:36:27][DEBUG]: LOGIN = mydombox
[2015-05-18 23:36:27][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:36:27][DEBUG]: DATABASE = mydombox
[2015-05-18 23:36:27][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:36:27][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:36:27][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:36:27][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:36:27][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:36:27][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:36:27][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:36:27][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:36:27][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:36:27][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:36:27][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:36:27][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:36:27][DEBUG]: MDB_KEY = 
[2015-05-18 23:36:27][DEBUG]: MDB_ID = 
[2015-05-18 23:36:27][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:36:27][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:36:27][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:36:27][DEBUG]: --------------------------------------------------------

[2015-05-18 23:36:27][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:36:27][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:36:27][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:36:27][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:36:27][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:36:27][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:36:27][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:31:08 

[2015-05-18 23:36:27][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:36:27][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:36:27][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:36:27][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:36:27][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:36:27][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:36:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:36:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:36:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:36:28][DEBUG]: The message is valid
[2015-05-18 23:36:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:36:28][DEBUG]: Not Suported yet
[2015-05-18 23:36:28][DEBUG]: Message lu : size : 9
[2015-05-18 23:36:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 7E 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:36:28][DEBUG]: The message is valid
[2015-05-18 23:36:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 126 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:36:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),126,21,21,'Heating','Demand',6);					
[2015-05-18 23:36:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:36:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:36:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:36:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 7F 89 F2 00 00 00 00 F1 00 00 53 BC 14 78 79 00 00| 
[2015-05-18 23:36:31][DEBUG]: The message is valid
[2015-05-18 23:36:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 127 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280949 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:36:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280949,9,7);					
[2015-05-18 23:36:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:36:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:36:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:36:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:36:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:36:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:36:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 80 F0 00 00 5A 00 00 00 00 00 53 BC 14 79 00 00 00| 
[2015-05-18 23:36:40][DEBUG]: The message is valid
[2015-05-18 23:36:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 128 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:36:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),128,90,0,0,9,7);					
[2015-05-18 23:36:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:36:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:36:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:36:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 81 F0 00 00 5A 00 00 00 00 00 53 BC 14 79 00 00 00| 
[2015-05-18 23:36:54][DEBUG]: The message is valid
[2015-05-18 23:36:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 129 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:36:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),129,90,0,0,9,7);					
[2015-05-18 23:36:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:36:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:37:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:37:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 82 F0 00 00 5A 00 00 00 00 00 53 BC 14 79 00 00 00| 
[2015-05-18 23:37:08][DEBUG]: The message is valid
[2015-05-18 23:37:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 130 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:37:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),130,90,0,0,9,7);					
[2015-05-18 23:37:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:37:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:37:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:37:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 83 F0 00 00 5A 00 00 00 00 00 53 BC 14 79 00 00 00| 
[2015-05-18 23:37:22][DEBUG]: The message is valid
[2015-05-18 23:37:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 131 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:37:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),131,90,0,0,9,7);					
[2015-05-18 23:37:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:37:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:37:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:37:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:37:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:37:28][DEBUG]: MYSQL = 1
[2015-05-18 23:37:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:37:28][DEBUG]: PORT = 3306
[2015-05-18 23:37:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:37:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:37:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:37:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:37:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:37:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:37:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:37:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:37:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:37:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:37:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:37:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:37:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:37:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:37:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:37:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:37:28][DEBUG]: MDB_ID = 
[2015-05-18 23:37:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:37:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:37:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:37:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:37:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:37:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:37:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:37:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:37:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:37:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:37:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:36:28 

[2015-05-18 23:37:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:37:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:37:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:37:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:37:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:37:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:37:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:37:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:37:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:37:28][DEBUG]: The message is valid
[2015-05-18 23:37:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:37:28][DEBUG]: Not Suported yet
[2015-05-18 23:37:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:37:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 84 89 F2 00 00 00 00 F1 00 00 53 BC 17 FC 79 00 00| 
[2015-05-18 23:37:31][DEBUG]: The message is valid
[2015-05-18 23:37:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 132 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280953 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:37:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280953,9,7);					
[2015-05-18 23:37:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:37:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:37:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:37:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:37:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:37:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:37:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 85 F0 00 00 5A 00 00 00 00 00 53 BC 17 79 00 00 00| 
[2015-05-18 23:37:36][DEBUG]: The message is valid
[2015-05-18 23:37:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 133 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:37:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),133,90,0,0,9,7);					
[2015-05-18 23:37:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:37:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:37:47][DEBUG]: Message lu : size : 10
[2015-05-18 23:37:47][DEBUG]: Message lu : (20 first bytes): 0A 52 02 86 91 01 00 70 53 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:37:47][DEBUG]: The message is valid
[2015-05-18 23:37:47][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 134 
 id1: 91  
 id2: 01 
 Temperature: 11.20 
 Humidity: 83 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:37:47][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.20,83 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.20,home_data2=83;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),134,11.20,83,'wet',9,5);					
[2015-05-18 23:37:47][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:37:47][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:37:47][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:37:47][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.20", "Humidity" : "83" }}]
[2015-05-18 23:37:48][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:37:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:37:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 87 F0 00 00 5A 00 00 00 00 00 53 BC 17 79 00 00 00| 
[2015-05-18 23:37:50][DEBUG]: The message is valid
[2015-05-18 23:37:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 135 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:37:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),135,90,0,0,9,7);					
[2015-05-18 23:37:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:37:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:38:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:38:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 88 F0 00 00 5A 00 00 00 00 00 53 BC 17 79 00 00 00| 
[2015-05-18 23:38:04][DEBUG]: The message is valid
[2015-05-18 23:38:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 136 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:38:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),136,90,0,0,9,7);					
[2015-05-18 23:38:04][DEBUG]: [EnOcean] Message received 

[2015-05-18 23:38:04][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 23:38:04][DEBUG]: [EnOcean] Data =  d5 08 00 8b 3c 6b 00
[2015-05-18 23:38:04][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 4a 00
[2015-05-18 23:38:04][DEBUG]: [EnOcean] byte 1: d5
[2015-05-18 23:38:04][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 23:38:04][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='8B'AND id3='3C'AND id4='6B';
[2015-05-18 23:38:04][DEBUG]: [EnDevice] dc_id = 21 ,21
[2015-05-18 23:38:04][DEBUG]: [EnDevice] rorg = D5
[2015-05-18 23:38:04][DEBUG]: [EnDevice] func = 00
[2015-05-18 23:38:04][DEBUG]: [EnDevice] type = 01
[2015-05-18 23:38:04][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 23:38:04][DEBUG]: [EnDevice] id2 = 8B
[2015-05-18 23:38:04][DEBUG]: [EnDevice] id3 = 3C
[2015-05-18 23:38:04][DEBUG]: [EnDevice] id4 = 6B
[2015-05-18 23:38:04][DEBUG]: [EnDevice] enable = 1
[2015-05-18 23:38:04][DEBUG]: 

 [EnOcean] 
 Packetype: 1BS Telegram  
 id1: 00  
 id2: 8B 
 id3: 3C  
 id4: 6B 
 Learn Button: not pressed 
 Contact: open 

[2015-05-18 23:38:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:38:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:38:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:38:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 89 F0 00 00 5A 00 00 00 00 00 53 BC 17 79 00 00 00| 
[2015-05-18 23:38:18][DEBUG]: The message is valid
[2015-05-18 23:38:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 137 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:38:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),137,90,0,0,9,7);					
[2015-05-18 23:38:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:38:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:38:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:38:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:38:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:38:28][DEBUG]: MYSQL = 1
[2015-05-18 23:38:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:38:28][DEBUG]: PORT = 3306
[2015-05-18 23:38:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:38:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:38:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:38:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:38:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:38:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:38:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:38:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:38:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:38:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:38:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:38:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:38:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:38:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:38:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:38:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:38:28][DEBUG]: MDB_ID = 
[2015-05-18 23:38:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:38:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:38:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:38:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:38:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:38:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:38:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:38:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:38:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:38:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:38:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:36:28 

[2015-05-18 23:38:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:38:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:38:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:38:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:38:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:38:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:38:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:38:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:38:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:38:28][DEBUG]: The message is valid
[2015-05-18 23:38:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:38:28][DEBUG]: Not Suported yet
[2015-05-18 23:38:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:38:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 8A 89 F2 00 00 00 00 F1 00 00 53 BC 1B 80 79 00 00| 
[2015-05-18 23:38:31][DEBUG]: The message is valid
[2015-05-18 23:38:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 138 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280957 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:38:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280957,9,7);					
[2015-05-18 23:38:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:38:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:38:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:38:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:38:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:38:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:38:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 8B F0 00 00 5A 00 00 00 00 00 53 BC 1B 79 00 00 00| 
[2015-05-18 23:38:32][DEBUG]: The message is valid
[2015-05-18 23:38:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 139 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:38:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),139,90,0,0,9,7);					
[2015-05-18 23:38:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:38:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:38:40][DEBUG]: Message lu : size : 10
[2015-05-18 23:38:40][DEBUG]: Message lu : (20 first bytes): 0A 52 02 8C 91 01 00 70 53 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:38:40][DEBUG]: The message is valid
[2015-05-18 23:38:40][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 140 
 id1: 91  
 id2: 01 
 Temperature: 11.20 
 Humidity: 83 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:38:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.20,83 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.20,home_data2=83;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),140,11.20,83,'wet',9,5);					
[2015-05-18 23:38:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:38:40][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:38:40][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:38:40][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.20", "Humidity" : "83" }}]
[2015-05-18 23:38:41][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:38:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:38:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 8D F0 00 00 5A 00 00 00 00 00 53 BC 1B 79 00 00 00| 
[2015-05-18 23:38:46][DEBUG]: The message is valid
[2015-05-18 23:38:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 141 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:38:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),141,90,0,0,9,7);					
[2015-05-18 23:38:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:38:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:39:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:39:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 8E F0 00 00 5A 00 00 00 00 00 53 BC 1B 79 00 00 00| 
[2015-05-18 23:39:00][DEBUG]: The message is valid
[2015-05-18 23:39:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 142 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),142,90,0,0,9,7);					
[2015-05-18 23:39:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:39:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:39:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:39:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 8F F0 00 00 5A 00 00 00 00 00 53 BC 1B 79 00 00 00| 
[2015-05-18 23:39:14][DEBUG]: The message is valid
[2015-05-18 23:39:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 143 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),143,90,0,0,9,7);					
[2015-05-18 23:39:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:39:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:39:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:39:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:39:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:39:28][DEBUG]: MYSQL = 1
[2015-05-18 23:39:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:39:28][DEBUG]: PORT = 3306
[2015-05-18 23:39:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:39:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:39:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:39:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:39:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:39:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:39:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:39:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:39:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:39:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:39:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:39:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:39:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:39:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:39:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:39:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:39:28][DEBUG]: MDB_ID = 
[2015-05-18 23:39:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:39:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:39:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:39:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:39:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:39:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:39:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:39:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:39:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:39:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:39:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:36:28 

[2015-05-18 23:39:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:39:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:39:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:39:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:39:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:39:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:39:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:39:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 90 F0 00 00 5A 00 00 00 00 00 53 BC 1B 79 00 00 00| 
[2015-05-18 23:39:28][DEBUG]: The message is valid
[2015-05-18 23:39:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 144 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),144,90,0,0,9,7);					
[2015-05-18 23:39:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:39:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:39:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:39:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:39:29][DEBUG]: The message is valid
[2015-05-18 23:39:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:39:29][DEBUG]: Not Suported yet
[2015-05-18 23:39:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:39:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 91 89 F2 00 00 00 00 F1 00 00 53 BC 1F 04 79 00 00| 
[2015-05-18 23:39:31][DEBUG]: The message is valid
[2015-05-18 23:39:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 145 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280961 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280961,9,7);					
[2015-05-18 23:39:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:39:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:39:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:39:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:39:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:39:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:39:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 92 F0 00 00 5A 00 00 00 00 00 53 BC 1F 79 00 00 00| 
[2015-05-18 23:39:42][DEBUG]: The message is valid
[2015-05-18 23:39:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 146 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),146,90,0,0,9,7);					
[2015-05-18 23:39:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:39:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:39:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:39:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 93 F0 00 00 5A 00 00 00 00 00 53 BC 1F 79 00 00 00| 
[2015-05-18 23:39:56][DEBUG]: The message is valid
[2015-05-18 23:39:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 147 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:39:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),147,90,0,0,9,7);					
[2015-05-18 23:39:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:39:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:40:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:40:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 94 F0 00 00 5A 00 00 00 00 00 53 BC 1F 79 00 00 00| 
[2015-05-18 23:40:10][DEBUG]: The message is valid
[2015-05-18 23:40:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 148 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:40:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),148,90,0,0,9,7);					
[2015-05-18 23:40:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:40:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:40:13][DEBUG]: Message lu : size : 11
[2015-05-18 23:40:13][DEBUG]: Message lu : (20 first bytes): 0B 55 02 95 FC 00 00 00 00 42 A5 59 00 00 00 00 00 00 00 00| 
[2015-05-18 23:40:13][DEBUG]: The message is valid
[2015-05-18 23:40:13][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 149 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.60 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:40:13][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1706.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1706.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),149,0.00,1706.00,9,5);					
[2015-05-18 23:40:13][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 23:40:13][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 23:40:13][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 23:40:13][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 23:40:13][DEBUG]: ISS POST DATA : [{ "value": "170.60" }]
[2015-05-18 23:40:13][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:40:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:40:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 96 F0 00 00 5A 00 00 00 00 00 53 BC 1F 79 00 00 00| 
[2015-05-18 23:40:24][DEBUG]: The message is valid
[2015-05-18 23:40:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 150 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:40:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),150,90,0,0,9,7);					
[2015-05-18 23:40:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:40:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:40:26][DEBUG]: Message lu : size : 10
[2015-05-18 23:40:26][DEBUG]: Message lu : (20 first bytes): 0A 52 02 97 91 01 00 6F 53 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:40:26][DEBUG]: The message is valid
[2015-05-18 23:40:26][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 151 
 id1: 91  
 id2: 01 
 Temperature: 11.10 
 Humidity: 83 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:40:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.10,83 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.10,home_data2=83;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),151,11.10,83,'wet',9,5);					
[2015-05-18 23:40:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:40:26][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:40:26][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:40:26][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.10", "Humidity" : "83" }}]
[2015-05-18 23:40:27][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:40:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:40:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:40:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:40:28][DEBUG]: MYSQL = 1
[2015-05-18 23:40:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:40:28][DEBUG]: PORT = 3306
[2015-05-18 23:40:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:40:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:40:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:40:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:40:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:40:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:40:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:40:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:40:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:40:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:40:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:40:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:40:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:40:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:40:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:40:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:40:28][DEBUG]: MDB_ID = 
[2015-05-18 23:40:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:40:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:40:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:40:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:40:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:40:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:40:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:40:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:40:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:40:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:40:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:36:28 

[2015-05-18 23:40:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:40:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:40:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:40:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:40:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:40:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:40:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:40:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:40:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:40:28][DEBUG]: The message is valid
[2015-05-18 23:40:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:40:28][DEBUG]: Not Suported yet
[2015-05-18 23:40:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:40:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 98 89 F2 00 00 00 00 F1 00 00 53 BC 22 82 79 00 00| 
[2015-05-18 23:40:31][DEBUG]: The message is valid
[2015-05-18 23:40:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 152 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280965 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:40:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280965,9,7);					
[2015-05-18 23:40:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:40:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:40:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:40:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:40:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:40:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:40:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 99 F0 00 00 5A 00 00 00 00 00 53 BC 22 79 00 00 00| 
[2015-05-18 23:40:38][DEBUG]: The message is valid
[2015-05-18 23:40:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 153 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:40:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),153,90,0,0,9,7);					
[2015-05-18 23:40:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:40:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:40:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:40:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 9A F0 00 00 5A 00 00 00 00 00 53 BC 22 79 00 00 00| 
[2015-05-18 23:40:52][DEBUG]: The message is valid
[2015-05-18 23:40:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 154 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:40:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),154,90,0,0,9,7);					
[2015-05-18 23:40:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:40:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:41:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:41:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 9B F0 00 00 5A 00 00 00 00 00 53 BC 22 79 00 00 00| 
[2015-05-18 23:41:06][DEBUG]: The message is valid
[2015-05-18 23:41:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 155 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:41:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),155,90,0,0,9,7);					
[2015-05-18 23:41:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:41:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:41:19][DEBUG]: Message lu : size : 10
[2015-05-18 23:41:19][DEBUG]: Message lu : (20 first bytes): 0A 52 02 9C 91 01 00 6F 53 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:41:19][DEBUG]: The message is valid
[2015-05-18 23:41:19][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 156 
 id1: 91  
 id2: 01 
 Temperature: 11.10 
 Humidity: 83 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:41:19][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.10,83 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.10,home_data2=83;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),156,11.10,83,'wet',9,5);					
[2015-05-18 23:41:19][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:41:19][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:41:19][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:41:19][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.10", "Humidity" : "83" }}]
[2015-05-18 23:41:20][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:41:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:41:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:41:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:41:28][DEBUG]: MYSQL = 1
[2015-05-18 23:41:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:41:28][DEBUG]: PORT = 3306
[2015-05-18 23:41:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:41:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:41:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:41:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:41:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:41:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:41:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:41:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:41:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:41:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:41:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:41:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:41:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:41:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:41:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:41:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:41:28][DEBUG]: MDB_ID = 
[2015-05-18 23:41:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:41:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:41:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:41:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:41:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:41:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:41:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:41:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:41:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:41:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:41:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:36:28 

[2015-05-18 23:41:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:41:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:41:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:41:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:41:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:41:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:41:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:41:28][DEBUG]: Message lu : size : 4
[2015-05-18 23:41:28][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:41:28][DEBUG]: The message is valid
[2015-05-18 23:41:28][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:41:28][DEBUG]: Not Suported yet
[2015-05-18 23:41:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:41:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 9E 89 F2 00 00 00 00 F1 00 00 53 BC 26 06 79 00 00| 
[2015-05-18 23:41:31][DEBUG]: The message is valid
[2015-05-18 23:41:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 158 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280969 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:41:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280969,9,7);					
[2015-05-18 23:41:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:41:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:41:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:41:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:41:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:41:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:41:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 9F F0 00 00 5A 00 00 00 00 00 53 BC 26 79 00 00 00| 
[2015-05-18 23:41:34][DEBUG]: The message is valid
[2015-05-18 23:41:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 159 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:41:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),159,90,0,0,9,7);					
[2015-05-18 23:41:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:41:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:41:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:41:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 A0 F0 00 00 5A 00 00 00 00 00 53 BC 26 79 00 00 00| 
[2015-05-18 23:41:48][DEBUG]: The message is valid
[2015-05-18 23:41:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 160 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:41:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),160,90,0,0,9,7);					
[2015-05-18 23:41:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:41:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:41:48][DEBUG]: Message lu : size : 9
[2015-05-18 23:41:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 A1 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:41:48][DEBUG]: The message is valid
[2015-05-18 23:41:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 161 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:41:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),161,21,21,'Heating','Demand',6);					
[2015-05-18 23:41:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:41:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:42:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:42:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 A2 F0 00 00 5A 00 00 00 00 00 53 BC 26 79 00 00 00| 
[2015-05-18 23:42:02][DEBUG]: The message is valid
[2015-05-18 23:42:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 162 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),162,90,0,0,9,7);					
[2015-05-18 23:42:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:42:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:42:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:42:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 A3 F0 00 00 5A 00 00 00 00 00 53 BC 26 79 00 00 00| 
[2015-05-18 23:42:16][DEBUG]: The message is valid
[2015-05-18 23:42:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 163 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),163,90,0,0,9,7);					
[2015-05-18 23:42:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:42:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:42:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:42:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:42:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:42:28][DEBUG]: MYSQL = 1
[2015-05-18 23:42:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:42:28][DEBUG]: PORT = 3306
[2015-05-18 23:42:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:42:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:42:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:42:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:42:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:42:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:42:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:42:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:42:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:42:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:42:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:42:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:42:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:42:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:42:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:42:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:42:28][DEBUG]: MDB_ID = 
[2015-05-18 23:42:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:42:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:42:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:42:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:42:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:42:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:42:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:42:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:42:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:42:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:42:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:41:48 

[2015-05-18 23:42:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:42:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:42:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:42:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:42:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:42:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:42:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:42:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:42:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:42:29][DEBUG]: The message is valid
[2015-05-18 23:42:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:42:29][DEBUG]: Not Suported yet
[2015-05-18 23:42:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:42:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 A4 F0 00 00 5A 00 00 00 00 00 53 BC 26 79 00 00 00| 
[2015-05-18 23:42:30][DEBUG]: The message is valid
[2015-05-18 23:42:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 164 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),164,90,0,0,9,7);					
[2015-05-18 23:42:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:42:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:42:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:42:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 A5 89 F2 00 00 00 00 F1 00 00 53 BC 29 8A 79 00 00| 
[2015-05-18 23:42:31][DEBUG]: The message is valid
[2015-05-18 23:42:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 165 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280973 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280973,9,7);					
[2015-05-18 23:42:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:42:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:42:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:42:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:42:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:42:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:42:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 A6 F0 00 00 5A 00 00 00 00 00 53 BC 29 79 00 00 00| 
[2015-05-18 23:42:44][DEBUG]: The message is valid
[2015-05-18 23:42:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 166 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),166,90,0,0,9,7);					
[2015-05-18 23:42:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:42:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:42:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:42:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 A7 F0 00 00 5A 00 00 00 00 00 53 BC 29 79 00 00 00| 
[2015-05-18 23:42:58][DEBUG]: The message is valid
[2015-05-18 23:42:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 167 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:42:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),167,90,0,0,9,7);					
[2015-05-18 23:42:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:42:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:43:05][DEBUG]: Message lu : size : 10
[2015-05-18 23:43:05][DEBUG]: Message lu : (20 first bytes): 0A 52 02 A8 91 01 00 6F 53 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:43:05][DEBUG]: The message is valid
[2015-05-18 23:43:05][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 168 
 id1: 91  
 id2: 01 
 Temperature: 11.10 
 Humidity: 83 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:43:05][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.10,83 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.10,home_data2=83;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),168,11.10,83,'wet',9,5);					
[2015-05-18 23:43:05][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:43:05][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:43:05][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:43:05][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.10", "Humidity" : "83" }}]
[2015-05-18 23:43:06][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:43:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:43:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 A9 F0 00 00 5A 00 00 00 00 00 53 BC 29 79 00 00 00| 
[2015-05-18 23:43:12][DEBUG]: The message is valid
[2015-05-18 23:43:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 169 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:43:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),169,90,0,0,9,7);					
[2015-05-18 23:43:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:43:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:43:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:43:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 AA F0 00 00 5A 00 00 00 00 00 53 BC 29 79 00 00 00| 
[2015-05-18 23:43:26][DEBUG]: The message is valid
[2015-05-18 23:43:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 170 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:43:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),170,90,0,0,9,7);					
[2015-05-18 23:43:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:43:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:43:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:43:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:43:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:43:28][DEBUG]: MYSQL = 1
[2015-05-18 23:43:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:43:28][DEBUG]: PORT = 3306
[2015-05-18 23:43:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:43:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:43:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:43:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:43:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:43:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:43:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:43:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:43:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:43:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:43:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:43:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:43:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:43:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:43:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:43:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:43:28][DEBUG]: MDB_ID = 
[2015-05-18 23:43:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:43:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:43:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:43:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:43:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:43:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:43:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:43:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:43:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:43:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:43:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:41:48 

[2015-05-18 23:43:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:43:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:43:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:43:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:43:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:43:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:43:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:43:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:43:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:43:29][DEBUG]: The message is valid
[2015-05-18 23:43:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:43:29][DEBUG]: Not Suported yet
[2015-05-18 23:43:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:43:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 AB 89 F2 00 00 00 00 F1 00 00 53 BC 2D 08 79 00 00| 
[2015-05-18 23:43:31][DEBUG]: The message is valid
[2015-05-18 23:43:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 171 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280977 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:43:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280977,9,7);					
[2015-05-18 23:43:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:43:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:43:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:43:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:43:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:43:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:43:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 AC F0 00 00 5A 00 00 00 00 00 53 BC 2D 79 00 00 00| 
[2015-05-18 23:43:40][DEBUG]: The message is valid
[2015-05-18 23:43:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 172 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:43:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),172,90,0,0,9,7);					
[2015-05-18 23:43:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:43:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:43:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:43:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 AD F0 00 00 5A 00 00 00 00 00 53 BC 2D 79 00 00 00| 
[2015-05-18 23:43:54][DEBUG]: The message is valid
[2015-05-18 23:43:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 173 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:43:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),173,90,0,0,9,7);					
[2015-05-18 23:43:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:43:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:44:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:44:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 AE F0 00 00 5A 00 00 00 00 00 53 BC 2D 79 00 00 00| 
[2015-05-18 23:44:08][DEBUG]: The message is valid
[2015-05-18 23:44:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 174 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:44:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),174,90,0,0,9,7);					
[2015-05-18 23:44:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:44:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:44:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:44:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 AF F0 00 00 5A 00 00 00 00 00 53 BC 2D 79 00 00 00| 
[2015-05-18 23:44:22][DEBUG]: The message is valid
[2015-05-18 23:44:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 175 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:44:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),175,90,0,0,9,7);					
[2015-05-18 23:44:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:44:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:44:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:44:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:44:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:44:28][DEBUG]: MYSQL = 1
[2015-05-18 23:44:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:44:28][DEBUG]: PORT = 3306
[2015-05-18 23:44:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:44:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:44:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:44:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:44:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:44:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:44:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:44:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:44:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:44:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:44:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:44:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:44:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:44:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:44:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:44:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:44:28][DEBUG]: MDB_ID = 
[2015-05-18 23:44:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:44:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:44:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:44:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:44:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:44:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:44:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:44:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:44:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:44:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:44:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:41:48 

[2015-05-18 23:44:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:44:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:44:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:44:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:44:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:44:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:44:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:44:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:44:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:44:29][DEBUG]: The message is valid
[2015-05-18 23:44:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:44:29][DEBUG]: Not Suported yet
[2015-05-18 23:44:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:44:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 B0 89 F2 00 00 00 00 F1 00 00 53 BC 30 86 79 00 00| 
[2015-05-18 23:44:31][DEBUG]: The message is valid
[2015-05-18 23:44:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 176 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280981 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:44:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280981,9,7);					
[2015-05-18 23:44:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:44:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:44:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:44:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:44:31][DEBUG]: [EnOcean] Message received 

[2015-05-18 23:44:31][DEBUG]: [EnOcean] PacketType: RADIO Radio telegram 
[2015-05-18 23:44:31][DEBUG]: [EnOcean] Data =  a5 00 00 7e 08 00 88 fb 73 00
[2015-05-18 23:44:31][DEBUG]: [EnOcean] Optional Data =  01 ff ff ff ff 52 00
[2015-05-18 23:44:31][DEBUG]: [EnOcean] byte 1: a5
[2015-05-18 23:44:31][DEBUG]: [EnOcean] Record Mode : 0
[2015-05-18 23:44:31][DEBUG_SQL]: SELECT dc_id,packettype,subtype,type,id1,id2,id3,id4,enable FROM devices                           WHERE int_id=4 AND id1='00'AND id2='88'AND id3='FB'AND id4='73';
[2015-05-18 23:44:31][DEBUG]: [EnDevice] dc_id = 30 ,30
[2015-05-18 23:44:31][DEBUG]: [EnDevice] rorg = A5
[2015-05-18 23:44:31][DEBUG]: [EnDevice] func = 02
[2015-05-18 23:44:31][DEBUG]: [EnDevice] type = 05
[2015-05-18 23:44:31][DEBUG]: [EnDevice] id1 = 00
[2015-05-18 23:44:31][DEBUG]: [EnDevice] id2 = 88
[2015-05-18 23:44:31][DEBUG]: [EnDevice] id3 = FB
[2015-05-18 23:44:31][DEBUG]: [EnDevice] id4 = 73
[2015-05-18 23:44:31][DEBUG]: [EnDevice] enable = 1
[2015-05-18 23:44:31][DEBUG]: [EnOcean] device: 30
[2015-05-18 23:44:31][DEBUG]: [EnOcean] device: -1246171804
[2015-05-18 23:44:31][DEBUG]: [EnOcean] FUNC: 02 Temperature Sensors
[2015-05-18 23:44:31][DEBUG]: [EnOcean] TYPE: 05 Temperature Sensor Range 0Â°C to +40Â°C
[2015-05-18 23:44:31][DEBUG_SQL]: UPDATE devices SET last_update=NOW(),home_data1=20.24 WHERE dc_id=30;                 INSERT INTO weather (dc_id,datetime,temperature) VALUES ( 18888848, NOW(), 20.24);
[2015-05-18 23:44:31][DEBUG]: 

 [EnOcean] 
 Packetype: A5 Telegram  
 id1: 00  
 id2: 88 
 id3: FB  
 id4: 73 
 Learn Button: Teach-in telegram 
 temperature: 20.24 

[2015-05-18 23:44:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:44:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:44:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 B1 F0 00 00 5A 00 00 00 00 00 53 BC 30 79 00 00 00| 
[2015-05-18 23:44:36][DEBUG]: The message is valid
[2015-05-18 23:44:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 177 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:44:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),177,90,0,0,9,7);					
[2015-05-18 23:44:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:44:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:44:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:44:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 B2 F0 00 00 5A 00 00 00 00 00 53 BC 30 79 00 00 00| 
[2015-05-18 23:44:50][DEBUG]: The message is valid
[2015-05-18 23:44:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 178 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:44:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),178,90,0,0,9,7);					
[2015-05-18 23:44:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:44:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:45:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:45:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 B3 F0 00 00 5A 00 00 00 00 00 53 BC 30 79 00 00 00| 
[2015-05-18 23:45:04][DEBUG]: The message is valid
[2015-05-18 23:45:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 179 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:45:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),179,90,0,0,9,7);					
[2015-05-18 23:45:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:45:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:45:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:45:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 B4 F0 00 00 5A 00 00 00 00 00 53 BC 30 79 00 00 00| 
[2015-05-18 23:45:18][DEBUG]: The message is valid
[2015-05-18 23:45:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 180 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:45:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),180,90,0,0,9,7);					
[2015-05-18 23:45:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:45:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:45:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:45:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:45:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:45:28][DEBUG]: MYSQL = 1
[2015-05-18 23:45:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:45:28][DEBUG]: PORT = 3306
[2015-05-18 23:45:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:45:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:45:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:45:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:45:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:45:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:45:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:45:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:45:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:45:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:45:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:45:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:45:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:45:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:45:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:45:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:45:28][DEBUG]: MDB_ID = 
[2015-05-18 23:45:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:45:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:45:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:45:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:45:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:45:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:45:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:45:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:45:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:45:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:45:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:41:48 

[2015-05-18 23:45:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:45:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:45:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:45:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:45:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:45:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:45:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:45:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:45:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:45:29][DEBUG]: The message is valid
[2015-05-18 23:45:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:45:29][DEBUG]: Not Suported yet
[2015-05-18 23:45:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:45:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 B5 89 F2 00 00 00 00 F1 00 00 53 BC 34 04 79 00 00| 
[2015-05-18 23:45:31][DEBUG]: The message is valid
[2015-05-18 23:45:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 181 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280985 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:45:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280985,9,7);					
[2015-05-18 23:45:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:45:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:45:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:45:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:45:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:45:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:45:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 B6 F0 00 00 5A 00 00 00 00 00 53 BC 34 79 00 00 00| 
[2015-05-18 23:45:32][DEBUG]: The message is valid
[2015-05-18 23:45:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 182 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:45:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),182,90,0,0,9,7);					
[2015-05-18 23:45:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:45:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:45:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:45:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 B7 F0 00 00 5A 00 00 00 00 00 53 BC 34 79 00 00 00| 
[2015-05-18 23:45:46][DEBUG]: The message is valid
[2015-05-18 23:45:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 183 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:45:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),183,90,0,0,9,7);					
[2015-05-18 23:45:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:45:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:46:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:46:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 B8 F0 00 00 5A 00 00 00 00 00 53 BC 34 79 00 00 00| 
[2015-05-18 23:46:00][DEBUG]: The message is valid
[2015-05-18 23:46:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 184 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),184,90,0,0,9,7);					
[2015-05-18 23:46:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:46:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:46:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:46:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 B9 F0 00 00 5A 00 00 00 00 00 53 BC 34 79 00 00 00| 
[2015-05-18 23:46:14][DEBUG]: The message is valid
[2015-05-18 23:46:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 185 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),185,90,0,0,9,7);					
[2015-05-18 23:46:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:46:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:46:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:46:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 BA F0 00 00 5A 00 00 00 00 00 53 BC 34 79 00 00 00| 
[2015-05-18 23:46:28][DEBUG]: The message is valid
[2015-05-18 23:46:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 186 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),186,90,0,0,9,7);					
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:46:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:46:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:46:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:46:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:46:28][DEBUG]: MYSQL = 1
[2015-05-18 23:46:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:46:28][DEBUG]: PORT = 3306
[2015-05-18 23:46:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:46:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:46:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:46:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:46:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:46:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:46:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:46:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:46:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:46:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:46:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:46:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:46:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:46:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:46:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:46:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:46:28][DEBUG]: MDB_ID = 
[2015-05-18 23:46:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:46:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:46:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:46:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:46:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:46:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:46:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:46:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:46:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:46:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:46:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:41:48 

[2015-05-18 23:46:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:46:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:46:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:46:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:46:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:46:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:46:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:46:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:46:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:46:29][DEBUG]: The message is valid
[2015-05-18 23:46:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:46:29][DEBUG]: Not Suported yet
[2015-05-18 23:46:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:46:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 BB 89 F2 00 00 00 00 F1 00 00 53 BC 37 82 79 00 00| 
[2015-05-18 23:46:31][DEBUG]: The message is valid
[2015-05-18 23:46:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 187 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280989 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280989,9,7);					
[2015-05-18 23:46:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:46:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:46:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:46:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:46:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:46:37][DEBUG]: Message lu : size : 10
[2015-05-18 23:46:37][DEBUG]: Message lu : (20 first bytes): 0A 52 02 BC 91 01 00 6F 52 03 59 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:46:37][DEBUG]: The message is valid
[2015-05-18 23:46:37][DEBUG]: 

 Packetype: TEMPERATURE AND HUMIDITY SENSORS 
 Subtype: THGR810, THGN800, THGR810 
 Seqnbr: 188 
 id1: 91  
 id2: 01 
 Temperature: 11.10 
 Humidity: 82 
 Humidity Status: wet 
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:46:37][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'52','02',1,'91','01','tx',11.10,82 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=11.10,home_data2=82;					INSERT INTO weather (dc_id,datetime,seqnbr,temperature,humidity,humidity_status,battery,signal_level) VALUES ((select dc_id from devices where id1='91' AND id2='01' LIMIT 1),NOW(),188,11.10,82,'wet',9,5);					
[2015-05-18 23:46:37][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='91' AND id2='01' LIMIT 1;
[2015-05-18 23:46:37][DEBUG]: MDB Cloud: ISS status : 1  Name: fc1d3029b67843b8ab924cc9a446cd5d
[2015-05-18 23:46:37][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/fc1d3029b67843b8ab924cc9a446cd5d/values
[2015-05-18 23:46:37][DEBUG]: ISS POST DATA : [{ "value": { "Temperature" : "11.10", "Humidity" : "82" }}]
[2015-05-18 23:46:38][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:46:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:46:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 BD F0 00 00 5A 00 00 00 00 00 53 BC 37 79 00 00 00| 
[2015-05-18 23:46:42][DEBUG]: The message is valid
[2015-05-18 23:46:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 189 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),189,90,0,0,9,7);					
[2015-05-18 23:46:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:46:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:46:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:46:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 BE F0 00 00 5A 00 00 00 00 00 53 BC 37 79 00 00 00| 
[2015-05-18 23:46:56][DEBUG]: The message is valid
[2015-05-18 23:46:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 190 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:46:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),190,90,0,0,9,7);					
[2015-05-18 23:46:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:46:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:47:08][DEBUG]: Message lu : size : 9
[2015-05-18 23:47:08][DEBUG]: Message lu : (20 first bytes): 09 40 00 BF 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:47:08][DEBUG]: The message is valid
[2015-05-18 23:47:08][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 191 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:47:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),191,21,21,'Heating','Demand',6);					
[2015-05-18 23:47:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:47:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:47:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:47:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 C0 F0 00 00 5A 00 00 00 00 00 53 BC 37 79 00 00 00| 
[2015-05-18 23:47:10][DEBUG]: The message is valid
[2015-05-18 23:47:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 192 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:47:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),192,90,0,0,9,7);					
[2015-05-18 23:47:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:47:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:47:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:47:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 C1 F0 00 00 5A 00 00 00 00 00 53 BC 37 79 00 00 00| 
[2015-05-18 23:47:24][DEBUG]: The message is valid
[2015-05-18 23:47:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 193 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:47:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),193,90,0,0,9,7);					
[2015-05-18 23:47:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:47:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:47:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:47:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:47:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:47:28][DEBUG]: MYSQL = 1
[2015-05-18 23:47:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:47:28][DEBUG]: PORT = 3306
[2015-05-18 23:47:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:47:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:47:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:47:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:47:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:47:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:47:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:47:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:47:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:47:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:47:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:47:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:47:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:47:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:47:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:47:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:47:28][DEBUG]: MDB_ID = 
[2015-05-18 23:47:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:47:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:47:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:47:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:47:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:47:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:47:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:47:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:47:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:47:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:47:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:47:08 

[2015-05-18 23:47:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:47:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:47:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:47:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:47:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:47:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:47:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:47:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:47:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:47:29][DEBUG]: The message is valid
[2015-05-18 23:47:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:47:29][DEBUG]: Not Suported yet
[2015-05-18 23:47:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:47:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 C2 89 F2 00 00 00 00 F1 00 00 53 BC 3B 06 79 00 00| 
[2015-05-18 23:47:31][DEBUG]: The message is valid
[2015-05-18 23:47:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 194 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6280994 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:47:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6280994,9,7);					
[2015-05-18 23:47:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:47:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:47:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:47:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:47:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:47:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:47:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 C3 F0 00 00 5A 00 00 00 00 00 53 BC 3B 79 00 00 00| 
[2015-05-18 23:47:38][DEBUG]: The message is valid
[2015-05-18 23:47:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 195 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:47:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),195,90,0,0,9,7);					
[2015-05-18 23:47:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:47:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:47:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:47:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 C4 F0 00 00 5A 00 00 00 00 00 53 BC 3B 79 00 00 00| 
[2015-05-18 23:47:52][DEBUG]: The message is valid
[2015-05-18 23:47:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 196 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:47:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),196,90,0,0,9,7);					
[2015-05-18 23:47:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:47:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:48:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:48:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 C5 F0 00 00 5A 00 00 00 00 00 53 BC 3B 79 00 00 00| 
[2015-05-18 23:48:06][DEBUG]: The message is valid
[2015-05-18 23:48:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 197 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:48:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),197,90,0,0,9,7);					
[2015-05-18 23:48:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:48:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:48:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:48:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 C6 F0 00 00 5A 00 00 00 00 00 53 BC 3B 79 00 00 00| 
[2015-05-18 23:48:20][DEBUG]: The message is valid
[2015-05-18 23:48:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 198 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:48:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),198,90,0,0,9,7);					
[2015-05-18 23:48:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:48:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:48:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:48:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:48:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:48:28][DEBUG]: MYSQL = 1
[2015-05-18 23:48:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:48:28][DEBUG]: PORT = 3306
[2015-05-18 23:48:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:48:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:48:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:48:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:48:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:48:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:48:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:48:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:48:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:48:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:48:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:48:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:48:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:48:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:48:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:48:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:48:28][DEBUG]: MDB_ID = 
[2015-05-18 23:48:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:48:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:48:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:48:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:48:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:48:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:48:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:48:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:48:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:48:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:48:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:47:08 

[2015-05-18 23:48:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:48:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:48:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:48:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:48:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:48:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:48:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:48:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:48:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:48:29][DEBUG]: The message is valid
[2015-05-18 23:48:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:48:29][DEBUG]: Not Suported yet
[2015-05-18 23:48:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:48:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 C7 89 F2 00 00 00 01 01 00 00 53 BC 3E 90 79 00 00| 
[2015-05-18 23:48:31][DEBUG]: The message is valid
[2015-05-18 23:48:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 199 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 257 
 Total: 6280998 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:48:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 257 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=257;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,257,6280998,9,7);					
[2015-05-18 23:48:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:48:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:48:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:48:31][DEBUG]: ISS POST DATA : [{ "value": "257" }]
[2015-05-18 23:48:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:48:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:48:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 C8 F0 00 00 5A 00 00 00 00 00 53 BC 3E 79 00 00 00| 
[2015-05-18 23:48:34][DEBUG]: The message is valid
[2015-05-18 23:48:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 200 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:48:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),200,90,0,0,9,7);					
[2015-05-18 23:48:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:48:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:48:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:48:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 C9 F0 00 00 5A 00 00 00 00 00 53 BC 3E 79 00 00 00| 
[2015-05-18 23:48:48][DEBUG]: The message is valid
[2015-05-18 23:48:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 201 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:48:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),201,90,0,0,9,7);					
[2015-05-18 23:48:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:48:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:49:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:49:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 CA F0 00 00 5A 00 00 00 00 00 53 BC 3E 79 00 00 00| 
[2015-05-18 23:49:02][DEBUG]: The message is valid
[2015-05-18 23:49:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 202 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),202,90,0,0,9,7);					
[2015-05-18 23:49:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:49:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:49:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:49:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 CB F0 00 00 5A 00 00 00 00 00 53 BC 3E 79 00 00 00| 
[2015-05-18 23:49:16][DEBUG]: The message is valid
[2015-05-18 23:49:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 203 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),203,90,0,0,9,7);					
[2015-05-18 23:49:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:49:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:49:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:49:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:49:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:49:28][DEBUG]: MYSQL = 1
[2015-05-18 23:49:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:49:28][DEBUG]: PORT = 3306
[2015-05-18 23:49:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:49:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:49:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:49:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:49:28][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:49:28][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:49:28][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:49:28][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:49:28][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:49:28][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:49:28][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:49:28][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:49:28][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:49:28][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:49:28][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:49:28][DEBUG]: MDB_KEY = 
[2015-05-18 23:49:28][DEBUG]: MDB_ID = 
[2015-05-18 23:49:28][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:49:28][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:49:28][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:49:28][DEBUG]: --------------------------------------------------------

[2015-05-18 23:49:28][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:49:28][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:49:28][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:49:28][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:49:28][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:49:28][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:49:28][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:47:08 

[2015-05-18 23:49:28][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:49:28][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:49:28][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:49:28][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:49:28][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:49:28][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:49:28][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:49:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:49:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:49:29][DEBUG]: The message is valid
[2015-05-18 23:49:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:49:29][DEBUG]: Not Suported yet
[2015-05-18 23:49:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:49:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 CC F0 00 00 5A 00 00 00 00 00 53 BC 3E 79 00 00 00| 
[2015-05-18 23:49:30][DEBUG]: The message is valid
[2015-05-18 23:49:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 204 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),204,90,0,0,9,7);					
[2015-05-18 23:49:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:49:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:49:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:49:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 CD 89 F2 00 00 00 01 11 00 00 53 BC 42 56 79 00 00| 
[2015-05-18 23:49:31][DEBUG]: The message is valid
[2015-05-18 23:49:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 205 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 273 
 Total: 6281002 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 273 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=273;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,273,6281002,9,7);					
[2015-05-18 23:49:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:49:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:49:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:49:31][DEBUG]: ISS POST DATA : [{ "value": "273" }]
[2015-05-18 23:49:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:49:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:49:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 CE F0 00 00 5A 00 00 00 00 00 53 BC 42 79 00 00 00| 
[2015-05-18 23:49:44][DEBUG]: The message is valid
[2015-05-18 23:49:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 206 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),206,90,0,0,9,7);					
[2015-05-18 23:49:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:49:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:49:55][DEBUG]: Message lu : size : 17
[2015-05-18 23:49:55][DEBUG]: Message lu : (20 first bytes): 11 5A 02 CF 89 F2 03 00 00 00 F1 00 00 00 00 00 00 79 00 00| 
[2015-05-18 23:49:55][DEBUG]: The message is valid
[2015-05-18 23:49:55][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 207 
 id1: 89  
 id2: F2 
 Count: 3 
 Instant: 241 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:55][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),3,241,0,9,7);					
[2015-05-18 23:49:55][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:49:55][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:49:55][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:49:55][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:49:56][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:49:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:49:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 D0 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:49:58][DEBUG]: The message is valid
[2015-05-18 23:49:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 208 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:49:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),208,90,0,0,9,7);					
[2015-05-18 23:49:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:49:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:50:07][DEBUG]: Message lu : size : 17
[2015-05-18 23:50:07][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D1 89 F2 02 00 00 00 F1 00 00 00 00 00 00 79 00 00| 
[2015-05-18 23:50:07][DEBUG]: The message is valid
[2015-05-18 23:50:07][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 209 
 id1: 89  
 id2: F2 
 Count: 2 
 Instant: 241 
 Total: 0 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:07][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),2,241,0,9,7);					
[2015-05-18 23:50:07][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:50:07][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:50:07][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:50:07][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:50:08][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:50:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:50:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 D2 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:50:12][DEBUG]: The message is valid
[2015-05-18 23:50:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 210 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),210,90,0,0,9,7);					
[2015-05-18 23:50:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:50:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:50:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:50:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 D3 F0 00 00 5A 00 00 00 00 00 00 00 00 79 00 00 00| 
[2015-05-18 23:50:26][DEBUG]: The message is valid
[2015-05-18 23:50:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 211 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),211,90,0,0,9,7);					
[2015-05-18 23:50:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:50:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:50:28][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:50:28][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:50:28][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:50:28][DEBUG]: MYSQL = 1
[2015-05-18 23:50:28][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:50:28][DEBUG]: PORT = 3306
[2015-05-18 23:50:28][DEBUG]: LOGIN = mydombox
[2015-05-18 23:50:28][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:50:28][DEBUG]: DATABASE = mydombox
[2015-05-18 23:50:28][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:50:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:50:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:50:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:50:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:50:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:50:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:50:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:50:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:50:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:50:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:50:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:50:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:50:29][DEBUG]: MDB_ID = 
[2015-05-18 23:50:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:50:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:50:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:50:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:50:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:50:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:50:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:50:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:50:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:50:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:50:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:47:08 

[2015-05-18 23:50:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:50:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:50:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:50:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:50:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:50:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:50:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:50:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:50:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:50:29][DEBUG]: The message is valid
[2015-05-18 23:50:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:50:29][DEBUG]: Not Suported yet
[2015-05-18 23:50:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:50:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D4 89 F2 00 00 00 00 F1 00 00 53 BC 45 EC 79 00 00| 
[2015-05-18 23:50:31][DEBUG]: The message is valid
[2015-05-18 23:50:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 212 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281006 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281006,9,7);					
[2015-05-18 23:50:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:50:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:50:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:50:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:50:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:50:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:50:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 D5 F0 00 00 5A 00 00 00 00 00 53 BC 45 79 00 00 00| 
[2015-05-18 23:50:40][DEBUG]: The message is valid
[2015-05-18 23:50:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 213 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),213,90,0,0,9,7);					
[2015-05-18 23:50:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:50:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:50:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:50:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 D6 F0 00 00 5A 00 00 00 00 00 53 BC 45 79 00 00 00| 
[2015-05-18 23:50:54][DEBUG]: The message is valid
[2015-05-18 23:50:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 214 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:50:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),214,90,0,0,9,7);					
[2015-05-18 23:50:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:50:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:51:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:51:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 D7 F0 00 00 5A 00 00 00 00 00 53 BC 45 79 00 00 00| 
[2015-05-18 23:51:08][DEBUG]: The message is valid
[2015-05-18 23:51:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 215 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:51:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),215,90,0,0,9,7);					
[2015-05-18 23:51:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:51:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:51:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:51:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 D8 F0 00 00 5A 00 00 00 00 00 53 BC 45 79 00 00 00| 
[2015-05-18 23:51:22][DEBUG]: The message is valid
[2015-05-18 23:51:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 216 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:51:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),216,90,0,0,9,7);					
[2015-05-18 23:51:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:51:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:51:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:51:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:51:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:51:29][DEBUG]: MYSQL = 1
[2015-05-18 23:51:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:51:29][DEBUG]: PORT = 3306
[2015-05-18 23:51:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:51:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:51:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:51:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:51:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:51:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:51:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:51:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:51:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:51:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:51:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:51:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:51:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:51:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:51:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:51:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:51:29][DEBUG]: MDB_ID = 
[2015-05-18 23:51:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:51:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:51:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:51:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:51:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:51:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:51:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:51:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:51:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:51:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:51:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:47:08 

[2015-05-18 23:51:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:51:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:51:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:51:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:51:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:51:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:51:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:51:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:51:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:51:29][DEBUG]: The message is valid
[2015-05-18 23:51:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:51:29][DEBUG]: Not Suported yet
[2015-05-18 23:51:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:51:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 D9 89 F2 00 00 00 00 E1 00 00 53 BC 49 5E 79 00 00| 
[2015-05-18 23:51:31][DEBUG]: The message is valid
[2015-05-18 23:51:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 217 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 225 
 Total: 6281010 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:51:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 225 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=225;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,225,6281010,9,7);					
[2015-05-18 23:51:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:51:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:51:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:51:31][DEBUG]: ISS POST DATA : [{ "value": "225" }]
[2015-05-18 23:51:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:51:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:51:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 DA F0 00 00 5A 00 00 00 00 00 53 BC 49 79 00 00 00| 
[2015-05-18 23:51:36][DEBUG]: The message is valid
[2015-05-18 23:51:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 218 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:51:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),218,90,0,0,9,7);					
[2015-05-18 23:51:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:51:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:51:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:51:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 DB F0 00 00 5A 00 00 00 00 00 53 BC 49 79 00 00 00| 
[2015-05-18 23:51:50][DEBUG]: The message is valid
[2015-05-18 23:51:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 219 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:51:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),219,90,0,0,9,7);					
[2015-05-18 23:51:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:51:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:52:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:52:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 DC F0 00 00 5A 00 00 00 00 00 53 BC 49 79 00 00 00| 
[2015-05-18 23:52:04][DEBUG]: The message is valid
[2015-05-18 23:52:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 220 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:52:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),220,90,0,0,9,7);					
[2015-05-18 23:52:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:52:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:52:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:52:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 DD F0 00 00 5A 00 00 00 00 00 53 BC 49 79 00 00 00| 
[2015-05-18 23:52:18][DEBUG]: The message is valid
[2015-05-18 23:52:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 221 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:52:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),221,90,0,0,9,7);					
[2015-05-18 23:52:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:52:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:52:28][DEBUG]: Message lu : size : 9
[2015-05-18 23:52:28][DEBUG]: Message lu : (20 first bytes): 09 40 00 DE 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:52:28][DEBUG]: The message is valid
[2015-05-18 23:52:28][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 222 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:52:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),222,21,21,'Heating','Demand',6);					
[2015-05-18 23:52:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:52:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:52:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:52:29][DEBUG]: MYSQL = 1
[2015-05-18 23:52:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:52:29][DEBUG]: PORT = 3306
[2015-05-18 23:52:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:52:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:52:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:52:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:52:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:52:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:52:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:52:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:52:29][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:52:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:52:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:52:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:52:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:52:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:52:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:52:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:52:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:52:29][DEBUG]: MDB_ID = 
[2015-05-18 23:52:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:52:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:52:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:52:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:52:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:52:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:52:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:52:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:52:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:52:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:52:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:52:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:52:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:52:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:52:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:52:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:52:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:52:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:52:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:52:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:52:29][DEBUG]: The message is valid
[2015-05-18 23:52:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:52:29][DEBUG]: Not Suported yet
[2015-05-18 23:52:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:52:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 DF 89 F2 00 00 00 00 F1 00 00 53 BC 4C D6 79 00 00| 
[2015-05-18 23:52:31][DEBUG]: The message is valid
[2015-05-18 23:52:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 223 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281014 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:52:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281014,9,7);					
[2015-05-18 23:52:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:52:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:52:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:52:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:52:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:52:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:52:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 E0 F0 00 00 5A 00 00 00 00 00 53 BC 4C 79 00 00 00| 
[2015-05-18 23:52:32][DEBUG]: The message is valid
[2015-05-18 23:52:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 224 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:52:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),224,90,0,0,9,7);					
[2015-05-18 23:52:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:52:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:52:45][DEBUG]: Message lu : size : 11
[2015-05-18 23:52:45][DEBUG]: Message lu : (20 first bytes): 0B 55 02 E1 FC 00 00 00 00 42 A5 59 00 00 00 00 00 00 00 00| 
[2015-05-18 23:52:45][DEBUG]: The message is valid
[2015-05-18 23:52:45][DEBUG]: 

 Packetype: RAIN SENSSORS 
 Subtype: PCR800 
 Seqnbr: 225 
 id1: FC  
 id2: 00 
 Rain Rate: 0.00 mm/h 
 Total Rain: 170.60 mm
 Battery_level: 9 
 rssi: 5 

[2015-05-18 23:52:45][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2) SELECT MAX(dc_id)+1,NOW(),'55','02',1,'FC','00','tx',0.00,1706.00 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=0.00,home_data2=1706.00;					INSERT INTO weather (dc_id,datetime,seqnbr,rainrate,raintotal,battery,signal_level) VALUES ((select dc_id from devices where id1='FC' AND id2='00' LIMIT 1),NOW(),225,0.00,1706.00,9,5);					
[2015-05-18 23:52:45][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 23:52:45][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='FC' AND id2='00' LIMIT 1;
[2015-05-18 23:52:45][DEBUG]: MDB Cloud: ISS status : 1  Name: 1f6a2f7c36884767bcb2a1899f7a4f00
[2015-05-18 23:52:45][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/1f6a2f7c36884767bcb2a1899f7a4f00/values
[2015-05-18 23:52:45][DEBUG]: ISS POST DATA : [{ "value": "170.60" }]
[2015-05-18 23:52:45][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:52:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:52:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 E2 F0 00 00 5A 00 00 00 00 00 53 BC 4C 79 00 00 00| 
[2015-05-18 23:52:46][DEBUG]: The message is valid
[2015-05-18 23:52:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 226 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:52:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),226,90,0,0,9,7);					
[2015-05-18 23:52:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:52:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:53:00][DEBUG]: Message lu : size : 16
[2015-05-18 23:53:00][DEBUG]: Message lu : (20 first bytes): 10 56 02 E3 F0 00 00 5A 00 00 00 00 00 53 BC 4C 79 00 00 00| 
[2015-05-18 23:53:00][DEBUG]: The message is valid
[2015-05-18 23:53:00][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 227 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:00][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),227,90,0,0,9,7);					
[2015-05-18 23:53:00][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:53:00][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:53:14][DEBUG]: Message lu : size : 16
[2015-05-18 23:53:14][DEBUG]: Message lu : (20 first bytes): 10 56 02 E4 F0 00 00 5A 00 00 00 00 00 53 BC 4C 79 00 00 00| 
[2015-05-18 23:53:14][DEBUG]: The message is valid
[2015-05-18 23:53:14][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 228 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:14][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),228,90,0,0,9,7);					
[2015-05-18 23:53:14][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:53:14][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:53:28][DEBUG]: Message lu : size : 16
[2015-05-18 23:53:28][DEBUG]: Message lu : (20 first bytes): 10 56 02 E5 F0 00 00 5A 00 00 00 00 00 53 BC 4C 79 00 00 00| 
[2015-05-18 23:53:28][DEBUG]: The message is valid
[2015-05-18 23:53:28][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 229 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:28][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),229,90,0,0,9,7);					
[2015-05-18 23:53:28][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:53:28][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:53:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:53:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:53:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:53:29][DEBUG]: MYSQL = 1
[2015-05-18 23:53:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:53:29][DEBUG]: PORT = 3306
[2015-05-18 23:53:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:53:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:53:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:53:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:53:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:53:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:53:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:53:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:53:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:53:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:53:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:53:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:53:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:53:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:53:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:53:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:53:29][DEBUG]: MDB_ID = 
[2015-05-18 23:53:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:53:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:53:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:53:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:53:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:53:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:53:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:53:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:53:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:53:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:53:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:53:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:53:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:53:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:53:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:53:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:53:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:53:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:53:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:53:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:53:29][DEBUG]: The message is valid
[2015-05-18 23:53:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:53:29][DEBUG]: Not Suported yet
[2015-05-18 23:53:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:53:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 E6 89 F2 00 00 00 00 F1 00 00 53 BC 50 3C 79 00 00| 
[2015-05-18 23:53:31][DEBUG]: The message is valid
[2015-05-18 23:53:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 230 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281018 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281018,9,7);					
[2015-05-18 23:53:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:53:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:53:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:53:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:53:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:53:42][DEBUG]: Message lu : size : 16
[2015-05-18 23:53:42][DEBUG]: Message lu : (20 first bytes): 10 56 02 E7 F0 00 00 5A 00 00 00 00 00 53 BC 50 79 00 00 00| 
[2015-05-18 23:53:42][DEBUG]: The message is valid
[2015-05-18 23:53:42][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 231 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:42][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),231,90,0,0,9,7);					
[2015-05-18 23:53:42][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:53:42][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:53:56][DEBUG]: Message lu : size : 16
[2015-05-18 23:53:56][DEBUG]: Message lu : (20 first bytes): 10 56 02 E8 F0 00 00 5A 00 00 00 00 00 53 BC 50 79 00 00 00| 
[2015-05-18 23:53:56][DEBUG]: The message is valid
[2015-05-18 23:53:56][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 232 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:53:56][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),232,90,0,0,9,7);					
[2015-05-18 23:53:56][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:53:56][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:54:10][DEBUG]: Message lu : size : 16
[2015-05-18 23:54:10][DEBUG]: Message lu : (20 first bytes): 10 56 02 E9 F0 00 00 5A 00 00 00 00 00 53 BC 50 79 00 00 00| 
[2015-05-18 23:54:10][DEBUG]: The message is valid
[2015-05-18 23:54:10][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 233 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:54:10][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),233,90,0,0,9,7);					
[2015-05-18 23:54:10][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:54:10][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:54:24][DEBUG]: Message lu : size : 16
[2015-05-18 23:54:24][DEBUG]: Message lu : (20 first bytes): 10 56 02 EA F0 00 00 5A 00 00 00 00 00 53 BC 50 79 00 00 00| 
[2015-05-18 23:54:24][DEBUG]: The message is valid
[2015-05-18 23:54:24][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 234 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:54:24][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),234,90,0,0,9,7);					
[2015-05-18 23:54:24][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:54:24][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:54:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:54:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:54:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:54:29][DEBUG]: MYSQL = 1
[2015-05-18 23:54:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:54:29][DEBUG]: PORT = 3306
[2015-05-18 23:54:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:54:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:54:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:54:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:54:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:54:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:54:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:54:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:54:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:54:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:54:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:54:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:54:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:54:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:54:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:54:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:54:29][DEBUG]: MDB_ID = 
[2015-05-18 23:54:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:54:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:54:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:54:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:54:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:54:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:54:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:54:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:54:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:54:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:54:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:54:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:54:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:54:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:54:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:54:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:54:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:54:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:54:29][DEBUG]: Message lu : size : 4
[2015-05-18 23:54:29][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:54:29][DEBUG]: The message is valid
[2015-05-18 23:54:29][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:54:29][DEBUG]: Not Suported yet
[2015-05-18 23:54:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:54:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 EB 89 F2 00 00 00 00 F1 00 00 53 BC 53 C0 79 00 00| 
[2015-05-18 23:54:31][DEBUG]: The message is valid
[2015-05-18 23:54:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 235 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281022 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:54:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281022,9,7);					
[2015-05-18 23:54:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:54:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:54:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:54:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:54:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:54:38][DEBUG]: Message lu : size : 16
[2015-05-18 23:54:38][DEBUG]: Message lu : (20 first bytes): 10 56 02 EC F0 00 00 5A 00 00 00 00 00 53 BC 53 79 00 00 00| 
[2015-05-18 23:54:38][DEBUG]: The message is valid
[2015-05-18 23:54:38][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 236 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:54:38][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),236,90,0,0,9,7);					
[2015-05-18 23:54:38][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:54:38][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:54:52][DEBUG]: Message lu : size : 16
[2015-05-18 23:54:52][DEBUG]: Message lu : (20 first bytes): 10 56 02 ED F0 00 00 5A 00 00 00 00 00 53 BC 53 79 00 00 00| 
[2015-05-18 23:54:52][DEBUG]: The message is valid
[2015-05-18 23:54:52][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 237 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:54:52][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),237,90,0,0,9,7);					
[2015-05-18 23:54:52][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:54:52][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:55:06][DEBUG]: Message lu : size : 16
[2015-05-18 23:55:06][DEBUG]: Message lu : (20 first bytes): 10 56 02 EE F0 00 00 5A 00 00 00 00 00 53 BC 53 79 00 00 00| 
[2015-05-18 23:55:06][DEBUG]: The message is valid
[2015-05-18 23:55:06][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 238 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:55:06][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),238,90,0,0,9,7);					
[2015-05-18 23:55:06][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:55:06][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:55:20][DEBUG]: Message lu : size : 16
[2015-05-18 23:55:20][DEBUG]: Message lu : (20 first bytes): 10 56 02 EF F0 00 00 5A 00 00 00 00 00 53 BC 53 79 00 00 00| 
[2015-05-18 23:55:20][DEBUG]: The message is valid
[2015-05-18 23:55:20][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 239 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:55:20][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),239,90,0,0,9,7);					
[2015-05-18 23:55:20][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:55:20][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:55:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:55:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:55:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:55:29][DEBUG]: MYSQL = 1
[2015-05-18 23:55:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:55:29][DEBUG]: PORT = 3306
[2015-05-18 23:55:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:55:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:55:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:55:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:55:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:55:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:55:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:55:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:55:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:55:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:55:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:55:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:55:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:55:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:55:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:55:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:55:29][DEBUG]: MDB_ID = 
[2015-05-18 23:55:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:55:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:55:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:55:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:55:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:55:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:55:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:55:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:55:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:55:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:55:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:55:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:55:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:55:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:55:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:55:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:55:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:55:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:55:30][DEBUG]: Message lu : size : 4
[2015-05-18 23:55:30][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:55:30][DEBUG]: The message is valid
[2015-05-18 23:55:30][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:55:30][DEBUG]: Not Suported yet
[2015-05-18 23:55:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:55:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F0 89 F2 00 00 00 00 F1 00 00 53 BC 57 32 79 00 00| 
[2015-05-18 23:55:31][DEBUG]: The message is valid
[2015-05-18 23:55:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 240 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281026 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:55:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281026,9,7);					
[2015-05-18 23:55:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:55:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:55:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:55:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:55:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:55:34][DEBUG]: Message lu : size : 16
[2015-05-18 23:55:34][DEBUG]: Message lu : (20 first bytes): 10 56 02 F1 F0 00 00 5A 00 00 00 00 00 53 BC 57 79 00 00 00| 
[2015-05-18 23:55:34][DEBUG]: The message is valid
[2015-05-18 23:55:34][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 241 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:55:34][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),241,90,0,0,9,7);					
[2015-05-18 23:55:34][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:55:34][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:55:48][DEBUG]: Message lu : size : 16
[2015-05-18 23:55:48][DEBUG]: Message lu : (20 first bytes): 10 56 02 F2 F0 00 00 5A 00 00 00 00 00 53 BC 57 79 00 00 00| 
[2015-05-18 23:55:48][DEBUG]: The message is valid
[2015-05-18 23:55:48][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 242 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:55:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),242,90,0,0,9,7);					
[2015-05-18 23:55:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:55:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:56:02][DEBUG]: Message lu : size : 16
[2015-05-18 23:56:02][DEBUG]: Message lu : (20 first bytes): 10 56 02 F3 F0 00 00 5A 00 00 00 00 00 53 BC 57 79 00 00 00| 
[2015-05-18 23:56:02][DEBUG]: The message is valid
[2015-05-18 23:56:02][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 243 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:02][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),243,90,0,0,9,7);					
[2015-05-18 23:56:02][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:56:02][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:56:16][DEBUG]: Message lu : size : 16
[2015-05-18 23:56:16][DEBUG]: Message lu : (20 first bytes): 10 56 02 F4 F0 00 00 5A 00 00 00 00 00 53 BC 57 79 00 00 00| 
[2015-05-18 23:56:16][DEBUG]: The message is valid
[2015-05-18 23:56:16][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 244 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:16][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),244,90,0,0,9,7);					
[2015-05-18 23:56:16][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:56:16][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:56:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:56:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:56:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:56:29][DEBUG]: MYSQL = 1
[2015-05-18 23:56:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:56:29][DEBUG]: PORT = 3306
[2015-05-18 23:56:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:56:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:56:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:56:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:56:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:56:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:56:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:56:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:56:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:56:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:56:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:56:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:56:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:56:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:56:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:56:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:56:29][DEBUG]: MDB_ID = 
[2015-05-18 23:56:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:56:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:56:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:56:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:56:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:56:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:56:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:56:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:56:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:56:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:56:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:56:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:56:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:56:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:56:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:56:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:56:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:56:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:56:30][DEBUG]: Message lu : size : 4
[2015-05-18 23:56:30][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:56:30][DEBUG]: The message is valid
[2015-05-18 23:56:30][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:56:30][DEBUG]: Not Suported yet
[2015-05-18 23:56:30][DEBUG]: Message lu : size : 16
[2015-05-18 23:56:30][DEBUG]: Message lu : (20 first bytes): 10 56 02 F5 F0 00 00 5A 00 00 00 00 00 53 BC 57 79 00 00 00| 
[2015-05-18 23:56:30][DEBUG]: The message is valid
[2015-05-18 23:56:30][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 245 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:30][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),245,90,0,0,9,7);					
[2015-05-18 23:56:30][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:56:30][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:56:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:56:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 F6 89 F2 00 00 00 00 F1 00 00 53 BC 5A B6 79 00 00| 
[2015-05-18 23:56:31][DEBUG]: The message is valid
[2015-05-18 23:56:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 246 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281030 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281030,9,7);					
[2015-05-18 23:56:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:56:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:56:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:56:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:56:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:56:44][DEBUG]: Message lu : size : 16
[2015-05-18 23:56:44][DEBUG]: Message lu : (20 first bytes): 10 56 02 F7 F0 00 00 5A 00 00 00 00 00 53 BC 5A 79 00 00 00| 
[2015-05-18 23:56:44][DEBUG]: The message is valid
[2015-05-18 23:56:44][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 247 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:44][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),247,90,0,0,9,7);					
[2015-05-18 23:56:44][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:56:44][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:56:58][DEBUG]: Message lu : size : 16
[2015-05-18 23:56:58][DEBUG]: Message lu : (20 first bytes): 10 56 02 F8 F0 00 00 5A 00 00 00 00 00 53 BC 5A 79 00 00 00| 
[2015-05-18 23:56:58][DEBUG]: The message is valid
[2015-05-18 23:56:58][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 248 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:56:58][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),248,90,0,0,9,7);					
[2015-05-18 23:56:58][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:56:58][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:57:12][DEBUG]: Message lu : size : 16
[2015-05-18 23:57:12][DEBUG]: Message lu : (20 first bytes): 10 56 02 F9 F0 00 00 5A 00 00 00 00 00 53 BC 5A 79 00 00 00| 
[2015-05-18 23:57:12][DEBUG]: The message is valid
[2015-05-18 23:57:12][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 249 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:57:12][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),249,90,0,0,9,7);					
[2015-05-18 23:57:12][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:57:12][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:57:26][DEBUG]: Message lu : size : 16
[2015-05-18 23:57:26][DEBUG]: Message lu : (20 first bytes): 10 56 02 FA F0 00 00 5A 00 00 00 00 00 53 BC 5A 79 00 00 00| 
[2015-05-18 23:57:26][DEBUG]: The message is valid
[2015-05-18 23:57:26][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 250 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:57:26][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),250,90,0,0,9,7);					
[2015-05-18 23:57:26][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:57:26][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:57:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:57:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:57:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:57:29][DEBUG]: MYSQL = 1
[2015-05-18 23:57:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:57:29][DEBUG]: PORT = 3306
[2015-05-18 23:57:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:57:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:57:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:57:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:57:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:57:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:57:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:57:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:57:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:57:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:57:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:57:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:57:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:57:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:57:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:57:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:57:29][DEBUG]: MDB_ID = 
[2015-05-18 23:57:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:57:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:57:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:57:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:57:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:57:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:57:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:57:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:57:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:57:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:57:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:52:28 

[2015-05-18 23:57:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:57:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:57:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:57:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:57:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:57:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:57:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:57:30][DEBUG]: Message lu : size : 4
[2015-05-18 23:57:30][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:57:30][DEBUG]: The message is valid
[2015-05-18 23:57:30][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:57:30][DEBUG]: Not Suported yet
[2015-05-18 23:57:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:57:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 FB 89 F2 00 00 00 00 E1 00 00 53 BC 5E 2E 79 00 00| 
[2015-05-18 23:57:31][DEBUG]: The message is valid
[2015-05-18 23:57:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 251 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 225 
 Total: 6281034 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:57:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 225 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=225;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,225,6281034,9,7);					
[2015-05-18 23:57:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:57:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:57:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:57:31][DEBUG]: ISS POST DATA : [{ "value": "225" }]
[2015-05-18 23:57:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:57:40][DEBUG]: Message lu : size : 16
[2015-05-18 23:57:40][DEBUG]: Message lu : (20 first bytes): 10 56 02 FC F0 00 00 5A 00 00 00 00 00 53 BC 5E 79 00 00 00| 
[2015-05-18 23:57:40][DEBUG]: The message is valid
[2015-05-18 23:57:40][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 252 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:57:40][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),252,90,0,0,9,7);					
[2015-05-18 23:57:40][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:57:40][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:57:48][DEBUG]: Message lu : size : 9
[2015-05-18 23:57:48][DEBUG]: Message lu : (20 first bytes): 09 40 00 FD 4A AA 15 15 01 60 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:57:48][DEBUG]: The message is valid
[2015-05-18 23:57:48][DEBUG]: 

 Packetype: THERMOSTAT 1 
 Subtype: Digimax, TLX7506 
 Seqnbr: 253 
 id1: 4A  
 id2: AA 
 Temperature: 21 
 Temperature Set: 21 
 Mode: Heating 
 Status: Demand 
 rssi: 6 

[2015-05-18 23:57:48][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'40','00',1,'4A','AA','tx', 21 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=21;					INSERT INTO temperature (dc_id,datetime,seqnbr,temperature,temperature_set,mode,status,signal_level) VALUES ((select dc_id from devices where id1='4A' AND id2='AA' LIMIT 1),NOW(),253,21,21,'Heating','Demand',6);					
[2015-05-18 23:57:48][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='4A' AND id2='AA' LIMIT 1;
[2015-05-18 23:57:48][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:57:54][DEBUG]: Message lu : size : 16
[2015-05-18 23:57:54][DEBUG]: Message lu : (20 first bytes): 10 56 02 FE F0 00 00 5A 00 00 00 00 00 53 BC 5E 79 00 00 00| 
[2015-05-18 23:57:54][DEBUG]: The message is valid
[2015-05-18 23:57:54][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 254 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:57:54][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),254,90,0,0,9,7);					
[2015-05-18 23:57:54][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:57:54][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:58:08][DEBUG]: Message lu : size : 16
[2015-05-18 23:58:08][DEBUG]: Message lu : (20 first bytes): 10 56 02 FF F0 00 00 5A 00 00 00 00 00 53 BC 5E 79 00 00 00| 
[2015-05-18 23:58:08][DEBUG]: The message is valid
[2015-05-18 23:58:08][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 255 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:58:08][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),255,90,0,0,9,7);					
[2015-05-18 23:58:08][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:58:08][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:58:22][DEBUG]: Message lu : size : 16
[2015-05-18 23:58:22][DEBUG]: Message lu : (20 first bytes): 10 56 02 00 F0 00 00 5A 00 00 00 00 00 53 BC 5E 79 00 00 00| 
[2015-05-18 23:58:22][DEBUG]: The message is valid
[2015-05-18 23:58:22][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 0 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:58:22][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),0,90,0,0,9,7);					
[2015-05-18 23:58:22][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:58:22][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:58:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:58:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:58:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:58:29][DEBUG]: MYSQL = 1
[2015-05-18 23:58:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:58:29][DEBUG]: PORT = 3306
[2015-05-18 23:58:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:58:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:58:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:58:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:58:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:58:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:58:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:58:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:58:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:58:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:58:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:58:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:58:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:58:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:58:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:58:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:58:29][DEBUG]: MDB_ID = 
[2015-05-18 23:58:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:58:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:58:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:58:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:58:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:58:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:58:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:58:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:58:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:58:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:58:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:57:48 

[2015-05-18 23:58:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:58:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:58:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:58:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:58:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:58:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:58:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:58:30][DEBUG]: Message lu : size : 4
[2015-05-18 23:58:30][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:58:30][DEBUG]: The message is valid
[2015-05-18 23:58:30][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:58:30][DEBUG]: Not Suported yet
[2015-05-18 23:58:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:58:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 01 89 F2 00 00 00 00 F1 00 00 53 BC 61 88 79 00 00| 
[2015-05-18 23:58:31][DEBUG]: The message is valid
[2015-05-18 23:58:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 1 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281038 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:58:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281038,9,7);					
[2015-05-18 23:58:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:58:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:58:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:58:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:58:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:58:36][DEBUG]: Message lu : size : 16
[2015-05-18 23:58:36][DEBUG]: Message lu : (20 first bytes): 10 56 02 02 F0 00 00 5A 00 00 00 00 00 53 BC 61 79 00 00 00| 
[2015-05-18 23:58:36][DEBUG]: The message is valid
[2015-05-18 23:58:36][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 2 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:58:36][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),2,90,0,0,9,7);					
[2015-05-18 23:58:36][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:58:36][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:58:50][DEBUG]: Message lu : size : 16
[2015-05-18 23:58:50][DEBUG]: Message lu : (20 first bytes): 10 56 02 03 F0 00 00 5A 00 00 00 00 00 53 BC 61 79 00 00 00| 
[2015-05-18 23:58:50][DEBUG]: The message is valid
[2015-05-18 23:58:50][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 3 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:58:50][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),3,90,0,0,9,7);					
[2015-05-18 23:58:50][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:58:50][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:59:04][DEBUG]: Message lu : size : 16
[2015-05-18 23:59:04][DEBUG]: Message lu : (20 first bytes): 10 56 02 04 F0 00 00 5A 00 00 00 00 00 53 BC 61 79 00 00 00| 
[2015-05-18 23:59:04][DEBUG]: The message is valid
[2015-05-18 23:59:04][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 4 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:59:04][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),4,90,0,0,9,7);					
[2015-05-18 23:59:04][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:59:04][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:59:18][DEBUG]: Message lu : size : 16
[2015-05-18 23:59:18][DEBUG]: Message lu : (20 first bytes): 10 56 02 05 F0 00 00 5A 00 00 00 00 00 53 BC 61 79 00 00 00| 
[2015-05-18 23:59:18][DEBUG]: The message is valid
[2015-05-18 23:59:18][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 5 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:59:18][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),5,90,0,0,9,7);					
[2015-05-18 23:59:18][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:59:18][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:59:29][INFO]: 
--------- Loading Mydombox Server configuration ---------
[2015-05-18 23:59:29][DEBUG]: LOG_FILE_PATH = log
[2015-05-18 23:59:29][DEBUG]: LOG_LEVEL = DEBUG_SQL
[2015-05-18 23:59:29][DEBUG]: MYSQL = 1
[2015-05-18 23:59:29][DEBUG]: HOSTNAME = localhost
[2015-05-18 23:59:29][DEBUG]: PORT = 3306
[2015-05-18 23:59:29][DEBUG]: LOGIN = mydombox
[2015-05-18 23:59:29][DEBUG]: PASSWORD = mydomboxpwd
[2015-05-18 23:59:29][DEBUG]: DATABASE = mydombox
[2015-05-18 23:59:29][DEBUG]: MODULE_RFXTRX433 = 1
[2015-05-18 23:59:29][DEBUG]: PORT_RFXTRX433 = /dev/ttyUSB1
[2015-05-18 23:59:29][DEBUG]: MODULE_ENOUSB300 = 1
[2015-05-18 23:59:29][DEBUG]: PORT_ENOUSB300 = /dev/ttyUSB0
[2015-05-18 23:59:29][DEBUG]: MODULE_SOAP = 1
[2015-05-18 23:59:29][DEBUG]: PORT_SOAP = 8888
[2015-05-18 23:59:29][DEBUG]: MODULE_RPIDOM = 0
[2015-05-18 23:59:29][DEBUG]: PORT_RPIDOM = /dev/ttyAMA0
[2015-05-18 23:59:29][DEBUG]: RPIDOM_TELE1_TYPE = 3
[2015-05-18 23:59:29][DEBUG]: RPIDOM_TELE2_TYPE = 0
[2015-05-18 23:59:29][DEBUG]: RPIDOM_1WIRE = 1
[2015-05-18 23:59:29][DEBUG]: MDB_CLOUD = 1
[2015-05-18 23:59:29][DEBUG]: MDB_KEY = 
[2015-05-18 23:59:29][DEBUG]: MDB_ID = 
[2015-05-18 23:59:29][DEBUG]: MDB_X_ISS_Key = aa08f68bbe7740779aab2e34ec236971
[2015-05-18 23:59:29][DEBUG]: MDB_X_OAPI_Key = 28FOP1901d0di3r8indCa2iNTnJoGCr9
[2015-05-18 23:59:29][DEBUG]: MDB_DATASOURCE = a4b3cc24b88642b28706b0e7e6316a89
[2015-05-18 23:59:29][DEBUG]: --------------------------------------------------------

[2015-05-18 23:59:29][DEBUG_SQL]: SELECT dc_id,sch_action FROM scheduler WHERE ((sch_day= 1) OR (sch_day=0)) AND ( CURRENT_TIME <= sch_time) AND (sch_time < TIME(ADDTIME(NOW(),'00:01:00')));
[2015-05-18 23:59:29][DEBUG]: Thermostat: Starting looking for thermostat
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT th_id FROM thermostat
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT recept_id,th_use,th_mode,tp_set,sc_id FROM thermostat WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:59:29][DEBUG]: Thermostat_Calc: Working with th_id=0 ,recept_id = 6 , on/off : on , mode: auto , Manual tp_set= 21.00 °C, Scenario=2
[2015-05-18 23:59:29][DEBUG]: Thermostat_Calc: Thermostat 0 is on in auto mode
[2015-05-18 23:59:29][DEBUG]: Scenario : day number in the week : 1
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT tp_prog FROM scenario WHERE sc_id = 2 AND ((sc_day= 1) OR (sc_day=0)) AND (sc_periode_start < CURRENT_TIME) AND ( CURRENT_TIME < sc_periode_stop) LIMIT 1;
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT devices.packettype,  devices.subtype FROM devices , thermostat  WHERE thermostat.sensor_id = devices.dc_id AND th_id = 0 LIMIT 1;
[2015-05-18 23:59:29][DEBUG]: Thermostat:last_tp function: Thermostat Sensor type: 20
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT last_update, home_data1 from devices INNER JOIN thermostat ON devices.dc_id = thermostat.sensor_id WHERE th_id = 0 LIMIT 1;
[2015-05-18 23:59:29][DEBUG]: Thermostat:last_tp function: Starting working with th_id: 0 , last: 21.00 C at 2015-05-18 23:57:48 

[2015-05-18 23:59:29][DEBUG]: Thermostat_Calc: Consigne= 17.00 last= 21.00
[2015-05-18 23:59:29][DEBUG]: Thermostat_Calc:Send Message OFF
[2015-05-18 23:59:29][DEBUG]: [Encode Message] Starting Encoding Thermostat Message for dc_id: 6, tp_consigne: 17.00 , tp_current: 21.00 , demand: no demand
[2015-05-18 23:59:29][DEBUG_SQL]: SELECT packettype,subtype,id1,id2 FROM devices WHERE dc_id=6 LIMIT 1;
[2015-05-18 23:59:29][DEBUG]: [Encode Message] Encoding Message for device: 6, Packettype: 40, subtype: 00, id1: AA, id2: BB 
[2015-05-18 23:59:29][DEBUG]: Message sent: 09 40 00 00 AA BB 15 11 02 09 00 00 20 1C 00
[2015-05-18 23:59:29][DEBUG]: Thermostat: Thermostat process terminated
[2015-05-18 23:59:30][DEBUG]: Message lu : size : 4
[2015-05-18 23:59:30][DEBUG]: Message lu : (20 first bytes): 04 02 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00| 
[2015-05-18 23:59:30][DEBUG]: The message is valid
[2015-05-18 23:59:30][DEBUG]: Message de type: Receiver/Transmitter Message
[2015-05-18 23:59:30][DEBUG]: Not Suported yet
[2015-05-18 23:59:31][DEBUG]: Message lu : size : 17
[2015-05-18 23:59:31][DEBUG]: Message lu : (20 first bytes): 11 5A 02 06 89 F2 00 00 00 00 F1 00 00 53 BC 65 0C 79 00 00| 
[2015-05-18 23:59:31][DEBUG]: The message is valid
[2015-05-18 23:59:31][DEBUG]: 

 Packetype: ENERGY USAGE SENSORS 
 Subtype: ELEC3, CM180 
 Seqnbr: 6 
 id1: 89  
 id2: F2 
 Count: 0 
 Instant: 241 
 Total: 6281042 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:59:31][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1) SELECT MAX(dc_id)+1,NOW(),'5A','02',1,'89','F2','tx', 241 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=241;					INSERT INTO energy (dc_id,datetime,count,instant,total,battery,signal_level) VALUES ((select dc_id from devices where id1='89' AND id2='F2' LIMIT 1),NOW(),0,241,6281042,9,7);					
[2015-05-18 23:59:31][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='89' AND id2='F2' LIMIT 1;
[2015-05-18 23:59:31][DEBUG]: MDB Cloud: ISS status : 1  Name: dc611207a9a64ae6a506d6b19896f6a1
[2015-05-18 23:59:31][DEBUG]: ISS POST URL : https://api.orange.com/datavenue/v1/datasources/a4b3cc24b88642b28706b0e7e6316a89/streams/dc611207a9a64ae6a506d6b19896f6a1/values
[2015-05-18 23:59:31][DEBUG]: ISS POST DATA : [{ "value": "241" }]
[2015-05-18 23:59:32][DEBUG]: HTTP Code Return : 202
[2015-05-18 23:59:32][DEBUG]: Message lu : size : 16
[2015-05-18 23:59:32][DEBUG]: Message lu : (20 first bytes): 10 56 02 07 F0 00 00 5A 00 00 00 00 00 53 BC 65 79 00 00 00| 
[2015-05-18 23:59:32][DEBUG]: The message is valid
[2015-05-18 23:59:32][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 7 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:59:32][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),7,90,0,0,9,7);					
[2015-05-18 23:59:32][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:59:32][DEBUG]: MDB Cloud: ISS status : 0  Name: 
[2015-05-18 23:59:46][DEBUG]: Message lu : size : 16
[2015-05-18 23:59:46][DEBUG]: Message lu : (20 first bytes): 10 56 02 08 F0 00 00 5A 00 00 00 00 00 53 BC 65 79 00 00 00| 
[2015-05-18 23:59:46][DEBUG]: The message is valid
[2015-05-18 23:59:46][DEBUG]: 

 Packetype: WIND SENSSORS 
 Subtype: WGR800 
 Seqnbr: 8 
 id1: F0  
 id2: 00 
 Direction: 90 degrees 
 Average Speed: 0 m/sec 
 Wind gust: 0 m/sec 
 Battery_level: 9 
 rssi: 7 

[2015-05-18 23:59:46][DEBUG_SQL]: INSERT IGNORE INTO devices (dc_id,last_update,packettype,subtype,int_id,id1,id2,com,home_data1,home_data2,home_data3) SELECT MAX(dc_id)+1,'NOW()','56','02',1,'F0','00','tx',90,0,0 FROM devices ON DUPLICATE KEY UPDATE last_update=NOW(),home_data1=90,home_data2=0,home_data3=0;					INSERT INTO weather (dc_id,datetime,seqnbr,winddirection,av_speed,gust,battery,signal_level) VALUES ((select dc_id from devices where id1='F0' AND id2='00' LIMIT 1),NOW(),8,90,0,0,9,7);					
[2015-05-18 23:59:46][DEBUG_SQL]: SELECT iss_status,iss_stream,enable,deleted FROM devices WHERE id1='F0' AND id2='00' LIMIT 1;
[2015-05-18 23:59:46][DEBUG]: MDB Cloud: ISS status : 0  Name: 
